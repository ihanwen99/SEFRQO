sql file: q1-002.sql

sql: select count(*) from tag, site, question, tag_question
where
site.site_name='pm' and
tag.name='delays' and
tag.site_id = site.site_id and
question.site_id = site.site_id and
tag_question.site_id = site.site_id and
tag_question.question_id = question.id and
tag_question.tag_id = tag.id

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 6515.24, 'Total Cost': 6515.25, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 1.102, 'Actual Total Time': 1.103, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.56, 'Total Cost': 6515.24, 'Plan Rows': 1, 'Plan Width': 0, 'Actual Startup Time': 0.261, 'Actual Total Time': 1.102, 'Actual Rows': 1, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(tag.site_id = question.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.13, 'Total Cost': 6368.74, 'Plan Rows': 23, 'Plan Width': 16, 'Actual Startup Time': 0.253, 'Actual Total Time': 1.094, 'Actual Rows': 1, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.56, 'Total Cost': 6306.75, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.245, 'Actual Total Time': 1.085, 'Actual Rows': 1, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Index Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'site_pkey', 'Relation Name': 'site', 'Alias': 'site', 'Startup Cost': 0.14, 'Total Cost': 15.17, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.006, 'Actual Total Time': 0.008, 'Actual Rows': 1, 'Actual Loops': 1, 'Filter': "((site_name)::text = 'pm'::text)", 'Rows Removed by Filter': 172}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_pkey', 'Relation Name': 'tag', 'Alias': 'tag', 'Startup Cost': 0.42, 'Total Cost': 6291.56, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.238, 'Actual Total Time': 1.076, 'Actual Rows': 1, 'Actual Loops': 1, 'Index Cond': '(site_id = site.site_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((name)::text = 'delays'::text)", 'Rows Removed by Filter': 271}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tag_question', 'Startup Cost': 0.56, 'Total Cost': 61.69, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.007, 'Actual Total Time': 0.008, 'Actual Rows': 1, 'Actual Loops': 1, 'Index Cond': '((site_id = tag.site_id) AND (tag_id = tag.id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'question', 'Startup Cost': 0.43, 'Total Cost': 6.36, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.007, 'Actual Total Time': 0.007, 'Actual Rows': 1, 'Actual Loops': 1, 'Index Cond': '((id = tag_question.question_id) AND (site_id = tag_question.site_id))', 'Rows Removed by Index Recheck': 0}]}]}


sql file: q2-004.sql

sql: select distinct account.display_name
from
tag t1, site s1, question q1, tag_question tq1, so_user u1,
tag t2, site s2, question q2, tag_question tq2, so_user u2,
account
where
-- group theory askers
s1.site_name='stats' and
t1.name  = 'machine-learning' and
t1.site_id = s1.site_id and
q1.site_id = s1.site_id and
tq1.site_id = s1.site_id and
tq1.question_id = q1.id and
tq1.tag_id = t1.id and
q1.owner_user_id = u1.id and
q1.site_id = u1.site_id and

-- D&D askers
s2.site_name='stackoverflow' and
t2.name  = 'heroku' and
t2.site_id = s2.site_id and
q2.site_id = s2.site_id and
tq2.site_id = s2.site_id and
tq2.question_id = q2.id and
tq2.tag_id = t2.id and
q2.owner_user_id = u2.id and
q2.site_id = u2.site_id and

-- intersect
u1.account_id = u2.account_id and
account.id = u1.account_id;

detailed info: {'Node Type': 'Unique', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 6510.53, 'Total Cost': 6510.54, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 93.036, 'Actual Total Time': 93.156, 'Actual Rows': 61, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 6510.53, 'Total Cost': 6510.54, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 93.035, 'Actual Total Time': 93.147, 'Actual Rows': 191, 'Actual Loops': 1, 'Sort Key': ['account.display_name'], 'Sort Method': 'quicksort', 'Sort Space Used': 28, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 6329.82, 'Total Cost': 6510.52, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 67.931, 'Actual Total Time': 93.103, 'Actual Rows': 191, 'Actual Loops': 1, 'Inner Unique': True, 'Plans': [{'Node Type': 'Gather', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 6329.38, 'Total Cost': 6503.01, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 67.926, 'Actual Total Time': 92.822, 'Actual Rows': 191, 'Actual Loops': 1, 'Workers Planned': 1, 'Workers Launched': 1, 'Single Copy': False, 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 5329.38, 'Total Cost': 5502.91, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 66.256, 'Actual Total Time': 78.648, 'Actual Rows': 96, 'Actual Loops': 2, 'Inner Unique': False, 'Hash Cond': '(u1.account_id = u2.account_id)', 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2577.93, 'Total Cost': 2751.44, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 3.003, 'Actual Total Time': 15.541, 'Actual Rows': 3289, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(t1.site_id = u1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2577.49, 'Total Cost': 2743.91, 'Plan Rows': 1, 'Plan Width': 20, 'Actual Startup Time': 3.0, 'Actual Total Time': 9.999, 'Actual Rows': 3289, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(t1.site_id = q1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2577.06, 'Total Cost': 2638.51, 'Plan Rows': 14, 'Plan Width': 16, 'Actual Startup Time': 2.997, 'Actual Total Time': 4.134, 'Actual Rows': 3289, 'Actual Loops': 2, 'Inner Unique': False, 'Workers': [], 'Plans': [{'Node Type': 'Merge Join', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2576.49, 'Total Cost': 2576.52, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 2.991, 'Actual Total Time': 2.992, 'Actual Rows': 0, 'Actual Loops': 2, 'Inner Unique': True, 'Merge Cond': '(t1.site_id = s1.site_id)', 'Workers': [], 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 2573.32, 'Total Cost': 2573.32, 'Plan Rows': 2, 'Plan Width': 8, 'Actual Startup Time': 2.98, 'Actual Total Time': 2.981, 'Actual Rows': 16, 'Actual Loops': 2, 'Sort Key': ['t1.site_id'], 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory', 'Workers': [{'Worker Number': 0, 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory'}], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.0, 'Total Cost': 2573.31, 'Plan Rows': 2, 'Plan Width': 8, 'Actual Startup Time': 0.18, 'Actual Total Time': 2.974, 'Actual Rows': 16, 'Actual Loops': 2, 'Filter': "((name)::text = 'machine-learning'::text)", 'Rows Removed by Filter': 93368, 'Workers': []}]}, {'Node Type': 'Sort', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3.17, 'Total Cost': 3.18, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.01, 'Actual Total Time': 0.01, 'Actual Rows': 1, 'Actual Loops': 2, 'Sort Key': ['s1.site_id'], 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory', 'Workers': [{'Worker Number': 0, 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory'}], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Relation Name': 'site', 'Alias': 's1', 'Startup Cost': 0.0, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.005, 'Actual Total Time': 0.006, 'Actual Rows': 1, 'Actual Loops': 2, 'Filter': "((site_name)::text = 'stats'::text)", 'Rows Removed by Filter': 172, 'Workers': []}]}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.69, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.009, 'Actual Total Time': 2.013, 'Actual Rows': 6578, 'Actual Loops': 1, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 6578, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 7.52, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 6578, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 7.52, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 6578, 'Index Cond': '((id = q1.owner_user_id) AND (site_id = q1.site_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': True, 'Async Capable': False, 'Startup Cost': 2751.44, 'Total Cost': 2751.44, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 62.721, 'Actual Total Time': 62.722, 'Actual Rows': 6398, 'Actual Loops': 2, 'Hash Buckets': 16384, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 760, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2577.93, 'Total Cost': 2751.44, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 3.246, 'Actual Total Time': 32.485, 'Actual Rows': 6398, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(t2.site_id = u2.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2577.49, 'Total Cost': 2743.91, 'Plan Rows': 1, 'Plan Width': 20, 'Actual Startup Time': 3.243, 'Actual Total Time': 20.398, 'Actual Rows': 6398, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(t2.site_id = q2.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2577.06, 'Total Cost': 2638.51, 'Plan Rows': 14, 'Plan Width': 16, 'Actual Startup Time': 3.239, 'Actual Total Time': 7.557, 'Actual Rows': 6398, 'Actual Loops': 2, 'Inner Unique': False, 'Workers': [], 'Plans': [{'Node Type': 'Merge Join', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2576.49, 'Total Cost': 2576.52, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 3.23, 'Actual Total Time': 3.231, 'Actual Rows': 0, 'Actual Loops': 2, 'Inner Unique': True, 'Merge Cond': '(t2.site_id = s2.site_id)', 'Workers': [], 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 2573.32, 'Total Cost': 2573.32, 'Plan Rows': 2, 'Plan Width': 8, 'Actual Startup Time': 3.213, 'Actual Total Time': 3.214, 'Actual Rows': 7, 'Actual Loops': 2, 'Sort Key': ['t2.site_id'], 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory', 'Workers': [{'Worker Number': 0, 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory'}], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 't2', 'Startup Cost': 0.0, 'Total Cost': 2573.31, 'Plan Rows': 2, 'Plan Width': 8, 'Actual Startup Time': 0.492, 'Actual Total Time': 3.203, 'Actual Rows': 8, 'Actual Loops': 2, 'Filter': "((name)::text = 'heroku'::text)", 'Rows Removed by Filter': 93377, 'Workers': []}]}, {'Node Type': 'Sort', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3.17, 'Total Cost': 3.18, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.014, 'Actual Total Time': 0.014, 'Actual Rows': 1, 'Actual Loops': 2, 'Sort Key': ['s2.site_id'], 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory', 'Workers': [{'Worker Number': 0, 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory'}], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Relation Name': 'site', 'Alias': 's2', 'Startup Cost': 0.0, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.01, 'Actual Total Time': 0.011, 'Actual Rows': 1, 'Actual Loops': 2, 'Filter': "((site_name)::text = 'stackoverflow'::text)", 'Rows Removed by Filter': 172, 'Workers': []}]}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq2', 'Startup Cost': 0.56, 'Total Cost': 61.69, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.017, 'Actual Total Time': 8.12, 'Actual Rows': 12797, 'Actual Loops': 1, 'Index Cond': '((site_id = t2.site_id) AND (tag_id = t2.id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 12797, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q2', 'Startup Cost': 0.43, 'Total Cost': 7.52, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 12797, 'Index Cond': '((id = tq2.question_id) AND (site_id = tq2.site_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u2', 'Startup Cost': 0.44, 'Total Cost': 7.52, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 12797, 'Index Cond': '((id = q2.owner_user_id) AND (site_id = q2.site_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}]}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'account', 'Startup Cost': 0.43, 'Total Cost': 7.51, 'Plan Rows': 1, 'Plan Width': 15, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 191, 'Index Cond': '(id = u1.account_id)', 'Rows Removed by Index Recheck': 0}]}]}]}


sql file: q10-003.sql

sql: select count(distinct q1.id) from
site, post_link pl1, post_link pl2, question q1, question q2, question q3 where

site.site_name = 'cseducators' and
q1.site_id = site.site_id and
q1.site_id = q2.site_id and
q2.site_id = q3.site_id and

pl1.site_id = q1.site_id and
pl1.post_id_from = q1.id and
pl1.post_id_to = q2.id and

pl2.site_id = q1.site_id and
pl2.post_id_from = q2.id and
pl2.post_id_to = q3.id and

exists ( select * from comment where comment.site_id = q3.site_id and comment.post_id = q3.id ) and
exists ( select * from comment where comment.site_id = q2.site_id and comment.post_id = q2.id ) and
exists ( select * from comment where comment.site_id = q1.site_id and comment.post_id = q1.id ) and

q1.score > q3.score;

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 133556.26, 'Total Cost': 133556.27, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.724, 'Actual Total Time': 0.725, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 133556.0, 'Total Cost': 133556.13, 'Plan Rows': 52, 'Plan Width': 4, 'Actual Startup Time': 0.718, 'Actual Total Time': 0.719, 'Actual Rows': 40, 'Actual Loops': 1, 'Sort Key': ['q1.id'], 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Semi', 'Startup Cost': 4.01, 'Total Cost': 133554.52, 'Plan Rows': 52, 'Plan Width': 4, 'Actual Startup Time': 0.09, 'Actual Total Time': 0.713, 'Actual Rows': 40, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(pl1.post_id_from = comment_2.post_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Semi', 'Startup Cost': 3.44, 'Total Cost': 133511.33, 'Plan Rows': 52, 'Plan Width': 40, 'Actual Startup Time': 0.088, 'Actual Total Time': 0.666, 'Actual Rows': 40, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(q1.site_id = comment_1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Semi', 'Startup Cost': 2.88, 'Total Cost': 133468.13, 'Plan Rows': 52, 'Plan Width': 48, 'Actual Startup Time': 0.086, 'Actual Total Time': 0.632, 'Actual Rows': 40, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(q1.site_id = comment.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.31, 'Total Cost': 133424.94, 'Plan Rows': 52, 'Plan Width': 52, 'Actual Startup Time': 0.078, 'Actual Total Time': 0.587, 'Actual Rows': 42, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(q1.site_id = q2.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.88, 'Total Cost': 133200.61, 'Plan Rows': 52, 'Plan Width': 44, 'Actual Startup Time': 0.075, 'Actual Total Time': 0.552, 'Actual Rows': 42, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '((q1.score > q3.score) AND (q1.site_id = q3.site_id))', 'Rows Removed by Join Filter': 96, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.44, 'Total Cost': 131926.77, 'Plan Rows': 156, 'Plan Width': 40, 'Actual Startup Time': 0.042, 'Actual Total Time': 0.385, 'Actual Rows': 138, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(site.site_id = q1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.0, 'Total Cost': 130653.33, 'Plan Rows': 156, 'Plan Width': 28, 'Actual Startup Time': 0.035, 'Actual Total Time': 0.179, 'Actual Rows': 138, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(site.site_id = pl2.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.57, 'Total Cost': 23915.3, 'Plan Rows': 13089, 'Plan Width': 16, 'Actual Startup Time': 0.029, 'Actual Total Time': 0.061, 'Actual Rows': 159, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Index Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'site_pkey', 'Relation Name': 'site', 'Alias': 'site', 'Startup Cost': 0.14, 'Total Cost': 15.17, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.015, 'Actual Total Time': 0.021, 'Actual Rows': 1, 'Actual Loops': 1, 'Filter': "((site_name)::text = 'cseducators'::text)", 'Rows Removed by Filter': 172}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'post_link_pkey', 'Relation Name': 'post_link', 'Alias': 'pl1', 'Startup Cost': 0.43, 'Total Cost': 23762.05, 'Plan Rows': 13807, 'Plan Width': 12, 'Actual Startup Time': 0.013, 'Actual Total Time': 0.033, 'Actual Rows': 159, 'Actual Loops': 1, 'Index Cond': '(site_id = site.site_id)', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 159}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'post_link_pkey', 'Relation Name': 'post_link', 'Alias': 'pl2', 'Startup Cost': 0.43, 'Total Cost': 8.14, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 159, 'Index Cond': '((site_id = pl1.site_id) AND (post_id_from = pl1.post_id_to))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 138}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 8.15, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 138, 'Index Cond': '((id = pl1.post_id_from) AND (site_id = pl1.site_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q3', 'Startup Cost': 0.43, 'Total Cost': 8.15, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 138, 'Index Cond': '((id = pl2.post_id_to) AND (site_id = pl2.site_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q2', 'Startup Cost': 0.43, 'Total Cost': 4.3, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 42, 'Index Cond': '((id = pl1.post_id_to) AND (site_id = pl1.site_id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 0}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'comment_site_id_post_id_idx', 'Relation Name': 'comment', 'Alias': 'comment', 'Startup Cost': 0.57, 'Total Cost': 4.44, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 42, 'Index Cond': '((site_id = pl2.site_id) AND (post_id = pl2.post_id_to))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 0}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'comment_site_id_post_id_idx', 'Relation Name': 'comment', 'Alias': 'comment_1', 'Startup Cost': 0.57, 'Total Cost': 4.44, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 40, 'Index Cond': '((site_id = pl1.site_id) AND (post_id = pl1.post_id_to))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 0}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'comment_site_id_post_id_idx', 'Relation Name': 'comment', 'Alias': 'comment_2', 'Startup Cost': 0.57, 'Total Cost': 4.44, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 40, 'Index Cond': '((site_id = q1.site_id) AND (post_id = q1.id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 0}]}]}]}


sql file: q3-005.sql

sql: select COUNT(distinct account.display_name)
from
tag t1, site s1, question q1, answer a1, tag_question tq1, so_user u1,
tag t2, site s2, question q2, tag_question tq2, so_user u2,
account
where
-- answerers
s1.site_name='stackoverflow' and
t1.name  = 'file-io' and
t1.site_id = s1.site_id and
q1.site_id = s1.site_id and
tq1.site_id = s1.site_id and
tq1.question_id = q1.id and
tq1.tag_id = t1.id and
a1.site_id = q1.site_id and
a1.question_id = q1.id and
a1.owner_user_id = u1.id and
a1.site_id = u1.site_id and

-- askers
s2.site_name='ru' and
t2.name  = 'javascript' and
t2.site_id = s2.site_id and
q2.site_id = s2.site_id and
tq2.site_id = s2.site_id and
tq2.question_id = q2.id and
tq2.tag_id = t2.id and
q2.owner_user_id = u2.id and
q2.site_id = u2.site_id and


-- intersect
u1.account_id = u2.account_id and
account.id = u1.account_id;

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 6522.33, 'Total Cost': 6522.34, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 120.702, 'Actual Total Time': 120.878, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 6522.32, 'Total Cost': 6522.32, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 120.695, 'Actual Total Time': 120.871, 'Actual Rows': 13, 'Actual Loops': 1, 'Sort Key': ['account.display_name'], 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3758.89, 'Total Cost': 6522.31, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 79.534, 'Actual Total Time': 120.86, 'Actual Rows': 13, 'Actual Loops': 1, 'Inner Unique': True, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3758.46, 'Total Cost': 6514.65, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 79.528, 'Actual Total Time': 120.823, 'Actual Rows': 13, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(t1.site_id = q1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Gather', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3758.02, 'Total Cost': 6506.98, 'Plan Rows': 1, 'Plan Width': 36, 'Actual Startup Time': 79.522, 'Actual Total Time': 120.781, 'Actual Rows': 13, 'Actual Loops': 1, 'Workers Planned': 1, 'Workers Launched': 1, 'Single Copy': False, 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2758.02, 'Total Cost': 5506.88, 'Plan Rows': 1, 'Plan Width': 36, 'Actual Startup Time': 75.21, 'Actual Total Time': 95.753, 'Actual Rows': 6, 'Actual Loops': 2, 'Inner Unique': False, 'Hash Cond': '(u1.account_id = u2.account_id)', 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.61, 'Total Cost': 2753.46, 'Plan Rows': 1, 'Plan Width': 32, 'Actual Startup Time': 3.038, 'Actual Total Time': 27.346, 'Actual Rows': 4062, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(t1.site_id = u1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.17, 'Total Cost': 2745.78, 'Plan Rows': 1, 'Plan Width': 28, 'Actual Startup Time': 3.036, 'Actual Total Time': 18.866, 'Actual Rows': 4062, 'Actual Loops': 2, 'Inner Unique': False, 'Join Filter': '(t1.site_id = a1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.74, 'Total Cost': 2638.48, 'Plan Rows': 14, 'Plan Width': 16, 'Actual Startup Time': 3.032, 'Actual Total Time': 7.029, 'Actual Rows': 6032, 'Actual Loops': 2, 'Inner Unique': False, 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.18, 'Total Cost': 2576.49, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 3.028, 'Actual Total Time': 3.03, 'Actual Rows': 0, 'Actual Loops': 2, 'Inner Unique': True, 'Hash Cond': '(t1.site_id = s1.site_id)', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.0, 'Total Cost': 2573.31, 'Plan Rows': 2, 'Plan Width': 8, 'Actual Startup Time': 2.351, 'Actual Total Time': 3.016, 'Actual Rows': 2, 'Actual Loops': 2, 'Filter': "((name)::text = 'file-io'::text)", 'Rows Removed by Filter': 93384, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3.16, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.009, 'Actual Total Time': 0.009, 'Actual Rows': 1, 'Actual Loops': 2, 'Hash Buckets': 1024, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 9, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Relation Name': 'site', 'Alias': 's1', 'Startup Cost': 0.0, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.006, 'Actual Total Time': 0.006, 'Actual Rows': 1, 'Actual Loops': 2, 'Filter': "((site_name)::text = 'stackoverflow'::text)", 'Rows Removed by Filter': 172, 'Workers': []}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.69, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.006, 'Actual Total Time': 7.415, 'Actual Rows': 12063, 'Actual Loops': 1, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'answer_site_id_question_id_idx', 'Relation Name': 'answer', 'Alias': 'a1', 'Startup Cost': 0.43, 'Total Cost': 7.65, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 12063, 'Index Cond': '((site_id = tq1.site_id) AND (question_id = tq1.question_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 7.66, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 8125, 'Index Cond': '((id = a1.owner_user_id) AND (site_id = a1.site_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': True, 'Async Capable': False, 'Startup Cost': 2753.4, 'Total Cost': 2753.4, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 68.017, 'Actual Total Time': 68.018, 'Actual Rows': 10890, 'Actual Loops': 2, 'Hash Buckets': 32768, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 1368, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.61, 'Total Cost': 2753.4, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 3.182, 'Actual Total Time': 35.588, 'Actual Rows': 10890, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(t2.site_id = u2.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.17, 'Total Cost': 2745.73, 'Plan Rows': 1, 'Plan Width': 20, 'Actual Startup Time': 3.179, 'Actual Total Time': 22.077, 'Actual Rows': 10890, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(t2.site_id = q2.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.74, 'Total Cost': 2638.35, 'Plan Rows': 14, 'Plan Width': 16, 'Actual Startup Time': 3.176, 'Actual Total Time': 6.19, 'Actual Rows': 10890, 'Actual Loops': 2, 'Inner Unique': False, 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.18, 'Total Cost': 2576.57, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 3.17, 'Actual Total Time': 3.171, 'Actual Rows': 0, 'Actual Loops': 2, 'Inner Unique': True, 'Hash Cond': '(t2.site_id = s2.site_id)', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 't2', 'Startup Cost': 0.0, 'Total Cost': 2573.31, 'Plan Rows': 33, 'Plan Width': 8, 'Actual Startup Time': 0.124, 'Actual Total Time': 3.153, 'Actual Rows': 26, 'Actual Loops': 2, 'Filter': "((name)::text = 'javascript'::text)", 'Rows Removed by Filter': 93359, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3.16, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.013, 'Actual Total Time': 0.013, 'Actual Rows': 1, 'Actual Loops': 2, 'Hash Buckets': 1024, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 9, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Relation Name': 'site', 'Alias': 's2', 'Startup Cost': 0.0, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.009, 'Actual Total Time': 0.01, 'Actual Rows': 1, 'Actual Loops': 2, 'Filter': "((site_name)::text = 'ru'::text)", 'Rows Removed by Filter': 172, 'Workers': []}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq2', 'Startup Cost': 0.56, 'Total Cost': 61.47, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.01, 'Actual Total Time': 5.005, 'Actual Rows': 21781, 'Actual Loops': 1, 'Index Cond': '((site_id = t2.site_id) AND (tag_id = t2.id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q2', 'Startup Cost': 0.43, 'Total Cost': 7.66, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 21781, 'Index Cond': '((id = tq2.question_id) AND (site_id = tq2.site_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u2', 'Startup Cost': 0.44, 'Total Cost': 7.66, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 21781, 'Index Cond': '((id = q2.owner_user_id) AND (site_id = q2.site_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}]}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 7.66, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.003, 'Actual Rows': 1, 'Actual Loops': 13, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'account', 'Startup Cost': 0.43, 'Total Cost': 7.65, 'Plan Rows': 1, 'Plan Width': 15, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 13, 'Index Cond': '(id = u1.account_id)', 'Rows Removed by Index Recheck': 0}]}]}]}


sql file: q9-013.sql

sql: select count(distinct account.id) from
account, site, so_user, question q, post_link pl, tag, tag_question tq where
not exists (select * from answer a where a.site_id = q.site_id and a.question_id = q.id) and
site.site_name = 'stackoverflow' and
site.site_id = q.site_id and
pl.site_id = q.site_id and
pl.post_id_to = q.id and

tag.name = 'codeigniter' and
tag.site_id = q.site_id and

q.creation_date > '2016-01-01'::date and

tq.site_id = tag.site_id and
tq.tag_id = tag.id and
tq.question_id = q.id and

q.owner_user_id = so_user.id and
q.site_id = so_user.site_id and
so_user.reputation > 126 and

account.id = so_user.account_id and
account.website_url != '';

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3321734.8, 'Total Cost': 3321734.81, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 1584.952, 'Actual Total Time': 1600.063, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3321734.79, 'Total Cost': 3321734.8, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 1584.944, 'Actual Total Time': 1600.056, 'Actual Rows': 15, 'Actual Loops': 1, 'Sort Key': ['account.id'], 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Gather', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 2510810.97, 'Total Cost': 3321734.78, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 1584.739, 'Actual Total Time': 1600.047, 'Actual Rows': 15, 'Actual Loops': 1, 'Workers Planned': 7, 'Workers Launched': 7, 'Single Copy': False, 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Join Type': 'Right Anti', 'Startup Cost': 2509810.97, 'Total Cost': 3320734.68, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 1582.499, 'Actual Total Time': 1582.512, 'Actual Rows': 2, 'Actual Loops': 8, 'Inner Unique': False, 'Hash Cond': '((a.site_id = q.site_id) AND (a.question_id = q.id))', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'answer', 'Alias': 'a', 'Startup Cost': 0.0, 'Total Cost': 804116.4, 'Plan Rows': 907640, 'Plan Width': 8, 'Actual Startup Time': 0.017, 'Actual Total Time': 133.147, 'Actual Rows': 793444, 'Actual Loops': 8, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': True, 'Async Capable': False, 'Startup Cost': 2509810.95, 'Total Cost': 2509810.95, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 1401.976, 'Actual Total Time': 1401.987, 'Actual Rows': 4, 'Actual Loops': 8, 'Hash Buckets': 1024, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 264, 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2482580.42, 'Total Cost': 2509810.95, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 1392.96, 'Actual Total Time': 1401.964, 'Actual Rows': 4, 'Actual Loops': 8, 'Inner Unique': False, 'Hash Cond': '((pl.site_id = site.site_id) AND (pl.post_id_to = q.id))', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'post_link', 'Alias': 'pl', 'Startup Cost': 0.0, 'Total Cost': 21752.3, 'Plan Rows': 730430, 'Plan Width': 8, 'Actual Startup Time': 0.005, 'Actual Total Time': 11.722, 'Actual Rows': 283042, 'Actual Loops': 8, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': True, 'Async Capable': False, 'Startup Cost': 2482580.4, 'Total Cost': 2482580.4, 'Plan Rows': 1, 'Plan Width': 32, 'Actual Startup Time': 1377.456, 'Actual Total Time': 1377.466, 'Actual Rows': 99, 'Actual Loops': 8, 'Hash Buckets': 1024, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 264, 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2333002.41, 'Total Cost': 2482580.4, 'Plan Rows': 1, 'Plan Width': 32, 'Actual Startup Time': 1303.964, 'Actual Total Time': 1377.425, 'Actual Rows': 99, 'Actual Loops': 8, 'Inner Unique': False, 'Hash Cond': '(account.id = so_user.account_id)', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'account', 'Alias': 'account', 'Startup Cost': 0.0, 'Total Cost': 149034.54, 'Plan Rows': 144919, 'Plan Width': 4, 'Actual Startup Time': 0.018, 'Actual Total Time': 69.008, 'Actual Rows': 90584, 'Actual Loops': 8, 'Filter': "((website_url)::text <> ''::text)", 'Rows Removed by Filter': 1643435, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': True, 'Async Capable': False, 'Startup Cost': 2333002.4, 'Total Cost': 2333002.4, 'Plan Rows': 1, 'Plan Width': 32, 'Actual Startup Time': 1302.958, 'Actual Total Time': 1302.966, 'Actual Rows': 472, 'Actual Loops': 8, 'Hash Buckets': 1024, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 296, 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2081174.74, 'Total Cost': 2333002.4, 'Plan Rows': 1, 'Plan Width': 32, 'Actual Startup Time': 1209.517, 'Actual Total Time': 1302.887, 'Actual Rows': 472, 'Actual Loops': 8, 'Inner Unique': False, 'Hash Cond': '((so_user.site_id = site.site_id) AND (so_user.id = q.owner_user_id))', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'so_user', 'Alias': 'so_user', 'Startup Cost': 0.0, 'Total Cost': 249942.21, 'Plan Rows': 251391, 'Plan Width': 12, 'Actual Startup Time': 0.016, 'Actual Total Time': 84.77, 'Actual Rows': 154705, 'Actual Loops': 8, 'Filter': '(reputation > 126)', 'Rows Removed by Filter': 2482458, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': True, 'Async Capable': False, 'Startup Cost': 2081174.73, 'Total Cost': 2081174.73, 'Plan Rows': 1, 'Plan Width': 28, 'Actual Startup Time': 1208.845, 'Actual Total Time': 1208.852, 'Actual Rows': 1773, 'Actual Loops': 8, 'Hash Buckets': 16384, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 1272, 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 295801.63, 'Total Cost': 2081174.73, 'Plan Rows': 1, 'Plan Width': 28, 'Actual Startup Time': 976.379, 'Actual Total Time': 1147.162, 'Actual Rows': 1773, 'Actual Loops': 8, 'Inner Unique': False, 'Hash Cond': '((q.site_id = site.site_id) AND (q.id = tq.question_id))', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'question', 'Alias': 'q', 'Startup Cost': 0.0, 'Total Cost': 1779220.98, 'Plan Rows': 820281, 'Plan Width': 12, 'Actual Startup Time': 0.078, 'Actual Total Time': 365.507, 'Actual Rows': 726054, 'Actual Loops': 8, 'Filter': "(creation_date > '2016-01-01'::date)", 'Rows Removed by Filter': 857251, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': True, 'Async Capable': False, 'Startup Cost': 295801.55, 'Total Cost': 295801.55, 'Plan Rows': 5, 'Plan Width': 16, 'Actual Startup Time': 738.129, 'Actual Total Time': 738.133, 'Actual Rows': 4414, 'Actual Loops': 8, 'Hash Buckets': 32768, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 2296, 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2576.51, 'Total Cost': 295801.55, 'Plan Rows': 5, 'Plan Width': 16, 'Actual Startup Time': 47.777, 'Actual Total Time': 556.97, 'Actual Rows': 4414, 'Actual Loops': 8, 'Inner Unique': True, 'Hash Cond': '((site.site_id = tag.site_id) AND (tq.tag_id = tag.id))', 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.18, 'Total Cost': 293004.34, 'Plan Rows': 42642, 'Plan Width': 16, 'Actual Startup Time': 46.305, 'Actual Total Time': 449.038, 'Actual Rows': 3477604, 'Actual Loops': 8, 'Inner Unique': True, 'Hash Cond': '(tq.site_id = site.site_id)', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag_question', 'Alias': 'tq', 'Startup Cost': 0.0, 'Total Cost': 273162.12, 'Plan Rows': 7377012, 'Plan Width': 12, 'Actual Startup Time': 0.028, 'Actual Total Time': 170.521, 'Actual Rows': 4610477, 'Actual Loops': 8, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3.16, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.014, 'Actual Total Time': 0.015, 'Actual Rows': 1, 'Actual Loops': 8, 'Hash Buckets': 1024, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 9, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Relation Name': 'site', 'Alias': 'site', 'Startup Cost': 0.0, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.011, 'Actual Total Time': 0.012, 'Actual Rows': 1, 'Actual Loops': 8, 'Filter': "((site_name)::text = 'stackoverflow'::text)", 'Rows Removed by Filter': 172, 'Workers': []}]}]}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': True, 'Async Capable': False, 'Startup Cost': 2573.31, 'Total Cost': 2573.31, 'Plan Rows': 2, 'Plan Width': 8, 'Actual Startup Time': 0.964, 'Actual Total Time': 0.964, 'Actual Rows': 1, 'Actual Loops': 8, 'Hash Buckets': 1024, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 136, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 'tag', 'Startup Cost': 0.0, 'Total Cost': 2573.31, 'Plan Rows': 2, 'Plan Width': 8, 'Actual Startup Time': 0.447, 'Actual Total Time': 0.947, 'Actual Rows': 1, 'Actual Loops': 8, 'Filter': "((name)::text = 'codeigniter'::text)", 'Rows Removed by Filter': 23345, 'Workers': []}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}


sql file: q10-004.sql

sql: select count(distinct q1.id) from
site, post_link pl1, post_link pl2, question q1, question q2, question q3 where

site.site_name = 'pm' and
q1.site_id = site.site_id and
q1.site_id = q2.site_id and
q2.site_id = q3.site_id and

pl1.site_id = q1.site_id and
pl1.post_id_from = q1.id and
pl1.post_id_to = q2.id and

pl2.site_id = q1.site_id and
pl2.post_id_from = q2.id and
pl2.post_id_to = q3.id and

exists ( select * from comment where comment.site_id = q3.site_id and comment.post_id = q3.id ) and
exists ( select * from comment where comment.site_id = q2.site_id and comment.post_id = q2.id ) and
exists ( select * from comment where comment.site_id = q1.site_id and comment.post_id = q1.id ) and

q1.score > q3.score;

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 133556.26, 'Total Cost': 133556.27, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.804, 'Actual Total Time': 0.805, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 133556.0, 'Total Cost': 133556.13, 'Plan Rows': 52, 'Plan Width': 4, 'Actual Startup Time': 0.798, 'Actual Total Time': 0.8, 'Actual Rows': 8, 'Actual Loops': 1, 'Sort Key': ['q1.id'], 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Semi', 'Startup Cost': 4.01, 'Total Cost': 133554.52, 'Plan Rows': 52, 'Plan Width': 4, 'Actual Startup Time': 0.073, 'Actual Total Time': 0.794, 'Actual Rows': 8, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(pl1.post_id_from = comment_2.post_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Semi', 'Startup Cost': 3.44, 'Total Cost': 133511.33, 'Plan Rows': 52, 'Plan Width': 40, 'Actual Startup Time': 0.071, 'Actual Total Time': 0.776, 'Actual Rows': 10, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(q1.site_id = comment_1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Semi', 'Startup Cost': 2.88, 'Total Cost': 133468.13, 'Plan Rows': 52, 'Plan Width': 48, 'Actual Startup Time': 0.069, 'Actual Total Time': 0.757, 'Actual Rows': 16, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(q1.site_id = comment.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.31, 'Total Cost': 133424.94, 'Plan Rows': 52, 'Plan Width': 52, 'Actual Startup Time': 0.061, 'Actual Total Time': 0.717, 'Actual Rows': 20, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(q1.site_id = q2.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.88, 'Total Cost': 133200.61, 'Plan Rows': 52, 'Plan Width': 44, 'Actual Startup Time': 0.059, 'Actual Total Time': 0.69, 'Actual Rows': 20, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '((q1.score > q3.score) AND (q1.site_id = q3.site_id))', 'Rows Removed by Join Filter': 73, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.44, 'Total Cost': 131926.77, 'Plan Rows': 156, 'Plan Width': 40, 'Actual Startup Time': 0.048, 'Actual Total Time': 0.522, 'Actual Rows': 93, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(site.site_id = q1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.0, 'Total Cost': 130653.33, 'Plan Rows': 156, 'Plan Width': 28, 'Actual Startup Time': 0.041, 'Actual Total Time': 0.302, 'Actual Rows': 93, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(site.site_id = pl2.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.57, 'Total Cost': 23915.3, 'Plan Rows': 13089, 'Plan Width': 16, 'Actual Startup Time': 0.034, 'Actual Total Time': 0.09, 'Actual Rows': 369, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Index Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'site_pkey', 'Relation Name': 'site', 'Alias': 'site', 'Startup Cost': 0.14, 'Total Cost': 15.17, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.019, 'Actual Total Time': 0.022, 'Actual Rows': 1, 'Actual Loops': 1, 'Filter': "((site_name)::text = 'pm'::text)", 'Rows Removed by Filter': 172}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'post_link_pkey', 'Relation Name': 'post_link', 'Alias': 'pl1', 'Startup Cost': 0.43, 'Total Cost': 23762.05, 'Plan Rows': 13807, 'Plan Width': 12, 'Actual Startup Time': 0.013, 'Actual Total Time': 0.051, 'Actual Rows': 369, 'Actual Loops': 1, 'Index Cond': '(site_id = site.site_id)', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 369}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'post_link_pkey', 'Relation Name': 'post_link', 'Alias': 'pl2', 'Startup Cost': 0.43, 'Total Cost': 8.14, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.0, 'Actual Total Time': 0.0, 'Actual Rows': 0, 'Actual Loops': 369, 'Index Cond': '((site_id = pl1.site_id) AND (post_id_from = pl1.post_id_to))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 93}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 8.15, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 93, 'Index Cond': '((id = pl1.post_id_from) AND (site_id = pl1.site_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q3', 'Startup Cost': 0.43, 'Total Cost': 8.15, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 93, 'Index Cond': '((id = pl2.post_id_to) AND (site_id = pl2.site_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q2', 'Startup Cost': 0.43, 'Total Cost': 4.3, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 20, 'Index Cond': '((id = pl1.post_id_to) AND (site_id = pl1.site_id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 0}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'comment_site_id_post_id_idx', 'Relation Name': 'comment', 'Alias': 'comment', 'Startup Cost': 0.57, 'Total Cost': 4.44, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 20, 'Index Cond': '((site_id = pl2.site_id) AND (post_id = pl2.post_id_to))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 0}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'comment_site_id_post_id_idx', 'Relation Name': 'comment', 'Alias': 'comment_1', 'Startup Cost': 0.57, 'Total Cost': 4.44, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 16, 'Index Cond': '((site_id = pl1.site_id) AND (post_id = pl1.post_id_to))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 0}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'comment_site_id_post_id_idx', 'Relation Name': 'comment', 'Alias': 'comment_2', 'Startup Cost': 0.57, 'Total Cost': 4.44, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 10, 'Index Cond': '((site_id = q1.site_id) AND (post_id = q1.id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 0}]}]}]}


sql file: q6-002.sql

sql: select COUNT(distinct account.display_name)
from
tag t1, site s1, question q1, tag_question tq1, so_user u1, comment c1,
account
where
-- underappreciated (high votes, low views) questions with at least one comment
s1.site_name='dba' and
t1.name in ('pgadmin', 'aggregate') and
t1.site_id = s1.site_id and
q1.site_id = s1.site_id and
tq1.site_id = s1.site_id and
tq1.question_id = q1.id and
tq1.tag_id = t1.id and
q1.owner_user_id = u1.id and
q1.site_id = u1.site_id and
c1.site_id = q1.site_id and
c1.post_id = q1.id and
c1.score > q1.score and

-- to get the display name
account.id = u1.account_id;

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 7016.2, 'Total Cost': 7016.21, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 5.312, 'Actual Total Time': 5.313, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 7016.19, 'Total Cost': 7016.2, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 5.303, 'Actual Total Time': 5.305, 'Actual Rows': 70, 'Actual Loops': 1, 'Sort Key': ['account.display_name'], 'Sort Method': 'quicksort', 'Sort Space Used': 26, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.0, 'Total Cost': 7016.18, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 0.455, 'Actual Total Time': 5.281, 'Actual Rows': 70, 'Actual Loops': 1, 'Inner Unique': True, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.57, 'Total Cost': 7008.55, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.448, 'Actual Total Time': 5.119, 'Actual Rows': 70, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '((c1.score > q1.score) AND (t1.site_id = c1.site_id))', 'Rows Removed by Join Filter': 693, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.0, 'Total Cost': 7000.75, 'Plan Rows': 1, 'Plan Width': 36, 'Actual Startup Time': 0.129, 'Actual Total Time': 3.799, 'Actual Rows': 418, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(t1.site_id = u1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.56, 'Total Cost': 6993.1, 'Plan Rows': 1, 'Plan Width': 32, 'Actual Startup Time': 0.123, 'Actual Total Time': 2.721, 'Actual Rows': 418, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(t1.site_id = q1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.13, 'Total Cost': 6817.31, 'Plan Rows': 23, 'Plan Width': 16, 'Actual Startup Time': 0.116, 'Actual Total Time': 1.649, 'Actual Rows': 418, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.56, 'Total Cost': 6755.31, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.105, 'Actual Total Time': 1.372, 'Actual Rows': 2, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Index Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'site_pkey', 'Relation Name': 'site', 'Alias': 's1', 'Startup Cost': 0.14, 'Total Cost': 15.17, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.013, 'Actual Total Time': 0.018, 'Actual Rows': 1, 'Actual Loops': 1, 'Filter': "((site_name)::text = 'dba'::text)", 'Rows Removed by Filter': 172}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_pkey', 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.42, 'Total Cost': 6740.13, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.091, 'Actual Total Time': 1.351, 'Actual Rows': 2, 'Actual Loops': 1, 'Index Cond': '(site_id = s1.site_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((name)::text = ANY ('{pgadmin,aggregate}'::text[]))", 'Rows Removed by Filter': 1117}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.69, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.007, 'Actual Total Time': 0.128, 'Actual Rows': 209, 'Actual Loops': 2, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 7.63, 'Plan Rows': 1, 'Plan Width': 16, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 418, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 7.64, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 418, 'Index Cond': '((id = q1.owner_user_id) AND (site_id = q1.site_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'comment_site_id_post_id_idx', 'Relation Name': 'comment', 'Alias': 'c1', 'Startup Cost': 0.57, 'Total Cost': 7.79, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.003, 'Actual Rows': 2, 'Actual Loops': 418, 'Index Cond': '((site_id = tq1.site_id) AND (post_id = tq1.question_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'account', 'Startup Cost': 0.43, 'Total Cost': 7.63, 'Plan Rows': 1, 'Plan Width': 15, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 70, 'Index Cond': '(id = u1.account_id)', 'Rows Removed by Index Recheck': 0}]}]}]}


sql file: q4-004.sql

sql: select COUNT(distinct account.display_name)
from
tag t1, site s1, question q1, answer a1, tag_question tq1, so_user u1,
account
where
-- answerers posted at least 1 yr after the question was asked
s1.site_name='chemistry' and
t1.name = 'organic-chemistry' and
t1.site_id = s1.site_id and
q1.site_id = s1.site_id and
tq1.site_id = s1.site_id and
tq1.question_id = q1.id and
tq1.tag_id = t1.id and
a1.site_id = q1.site_id and
a1.question_id = q1.id and
a1.owner_user_id = u1.id and
a1.site_id = u1.site_id and
a1.creation_date >= q1.creation_date + '1 year'::interval and

-- to get the display name
account.id = u1.account_id;

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 6797.88, 'Total Cost': 6797.89, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 13.193, 'Actual Total Time': 13.194, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 6797.87, 'Total Cost': 6797.88, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 13.174, 'Actual Total Time': 13.18, 'Actual Rows': 228, 'Actual Loops': 1, 'Sort Key': ['account.display_name'], 'Sort Method': 'quicksort', 'Sort Space Used': 30, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.87, 'Total Cost': 6797.86, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 0.073, 'Actual Total Time': 13.107, 'Actual Rows': 228, 'Actual Loops': 1, 'Inner Unique': True, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.44, 'Total Cost': 6790.76, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.066, 'Actual Total Time': 12.484, 'Actual Rows': 228, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(t1.site_id = u1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.0, 'Total Cost': 6783.63, 'Plan Rows': 1, 'Plan Width': 24, 'Actual Startup Time': 0.058, 'Actual Total Time': 11.895, 'Actual Rows': 228, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': "((t1.site_id = q1.site_id) AND (a1.creation_date >= (q1.creation_date + '1 year'::interval)))", 'Rows Removed by Join Filter': 2554, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.56, 'Total Cost': 6776.51, 'Plan Rows': 1, 'Plan Width': 36, 'Actual Startup Time': 0.047, 'Actual Total Time': 6.901, 'Actual Rows': 2782, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(t1.site_id = a1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.13, 'Total Cost': 6613.11, 'Plan Rows': 23, 'Plan Width': 16, 'Actual Startup Time': 0.04, 'Actual Total Time': 2.403, 'Actual Rows': 5135, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.56, 'Total Cost': 6551.11, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.03, 'Actual Total Time': 1.23, 'Actual Rows': 1, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Index Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'site_pkey', 'Relation Name': 'site', 'Alias': 's1', 'Startup Cost': 0.14, 'Total Cost': 15.17, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.014, 'Actual Total Time': 0.02, 'Actual Rows': 1, 'Actual Loops': 1, 'Filter': "((site_name)::text = 'chemistry'::text)", 'Rows Removed by Filter': 172}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_pkey', 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.42, 'Total Cost': 6535.93, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.014, 'Actual Total Time': 1.208, 'Actual Rows': 1, 'Actual Loops': 1, 'Index Cond': '(site_id = s1.site_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((name)::text = 'organic-chemistry'::text)", 'Rows Removed by Filter': 326}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.69, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.01, 'Actual Total Time': 0.911, 'Actual Rows': 5135, 'Actual Loops': 1, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'answer_site_id_question_id_idx', 'Relation Name': 'answer', 'Alias': 'a1', 'Startup Cost': 0.43, 'Total Cost': 7.09, 'Plan Rows': 1, 'Plan Width': 20, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 5135, 'Index Cond': '((site_id = tq1.site_id) AND (question_id = tq1.question_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 7.1, 'Plan Rows': 1, 'Plan Width': 16, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 2782, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 7.12, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 228, 'Index Cond': '((id = a1.owner_user_id) AND (site_id = a1.site_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'account', 'Startup Cost': 0.43, 'Total Cost': 7.1, 'Plan Rows': 1, 'Plan Width': 15, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.003, 'Actual Rows': 1, 'Actual Loops': 228, 'Index Cond': '(id = u1.account_id)', 'Rows Removed by Index Recheck': 0}]}]}]}


sql file: q15-003.sql

sql: SELECT b1.name, count(*)
FROM
site as s,
so_user as u1,
tag as t1,
tag_question as tq1,
question as q1,
badge as b1,
account as acc
WHERE
s.site_id = u1.site_id
AND s.site_id = b1.site_id
AND s.site_id = t1.site_id
AND s.site_id = tq1.site_id
AND s.site_id = q1.site_id
AND t1.id = tq1.tag_id
AND q1.id = tq1.question_id
AND q1.owner_user_id = u1.id
AND acc.id = u1.account_id
AND b1.user_id = u1.id
AND (q1.view_count >= 10)
AND (q1.view_count <= 1000)
AND (s.site_name in ('stackoverflow'))
AND (t1.name in ('avr','chromium','clang++','comparator','nginx','paypal','sqoop'))
AND (acc.website_url ILIKE ('%en'))
GROUP BY b1.name
ORDER BY COUNT(*)
DESC
LIMIT 100

detailed info: {'Node Type': 'Limit', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 4502.46, 'Total Cost': 4502.46, 'Plan Rows': 1, 'Plan Width': 19, 'Actual Startup Time': 559.515, 'Actual Total Time': 559.573, 'Actual Rows': 45, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 4502.46, 'Total Cost': 4502.46, 'Plan Rows': 1, 'Plan Width': 19, 'Actual Startup Time': 559.513, 'Actual Total Time': 559.569, 'Actual Rows': 45, 'Actual Loops': 1, 'Sort Key': ['(count(*)) DESC'], 'Sort Method': 'quicksort', 'Sort Space Used': 27, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Aggregate', 'Strategy': 'Sorted', 'Partial Mode': 'Simple', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 4502.43, 'Total Cost': 4502.45, 'Plan Rows': 1, 'Plan Width': 19, 'Actual Startup Time': 559.469, 'Actual Total Time': 559.562, 'Actual Rows': 45, 'Actual Loops': 1, 'Group Key': ['b1.name'], 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 4502.43, 'Total Cost': 4502.43, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 559.462, 'Actual Total Time': 559.53, 'Actual Rows': 671, 'Actual Loops': 1, 'Sort Key': ['b1.name'], 'Sort Method': 'quicksort', 'Sort Space Used': 42, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4265.76, 'Total Cost': 4502.42, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 57.279, 'Actual Total Time': 559.439, 'Actual Rows': 671, 'Actual Loops': 1, 'Inner Unique': True, 'Plans': [{'Node Type': 'Gather', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 4265.33, 'Total Cost': 4495.35, 'Plan Rows': 1, 'Plan Width': 15, 'Actual Startup Time': 9.375, 'Actual Total Time': 49.096, 'Actual Rows': 786994, 'Actual Loops': 1, 'Workers Planned': 1, 'Workers Launched': 1, 'Single Copy': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3265.33, 'Total Cost': 3495.25, 'Plan Rows': 1, 'Plan Width': 15, 'Actual Startup Time': 10.722, 'Actual Total Time': 166.467, 'Actual Rows': 393497, 'Actual Loops': 2, 'Inner Unique': False, 'Join Filter': '(s.site_id = b1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3264.76, 'Total Cost': 3491.36, 'Plan Rows': 1, 'Plan Width': 32, 'Actual Startup Time': 10.468, 'Actual Total Time': 96.122, 'Actual Rows': 10128, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(s.site_id = u1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3264.33, 'Total Cost': 3422.19, 'Plan Rows': 10, 'Plan Width': 20, 'Actual Startup Time': 9.348, 'Actual Total Time': 68.326, 'Actual Rows': 10128, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(s.site_id = q1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3263.89, 'Total Cost': 3325.47, 'Plan Rows': 14, 'Plan Width': 16, 'Actual Startup Time': 8.205, 'Actual Total Time': 29.13, 'Actual Rows': 13771, 'Actual Loops': 2, 'Inner Unique': False, 'Join Filter': '(s.site_id = tq1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Merge Join', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3263.33, 'Total Cost': 3263.4, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 7.976, 'Actual Total Time': 7.984, 'Actual Rows': 4, 'Actual Loops': 2, 'Inner Unique': True, 'Merge Cond': '(t1.site_id = s.site_id)', 'Workers': [], 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3260.15, 'Total Cost': 3260.18, 'Plan Rows': 11, 'Plan Width': 8, 'Actual Startup Time': 7.949, 'Actual Total Time': 7.951, 'Actual Rows': 27, 'Actual Loops': 2, 'Sort Key': ['t1.site_id'], 'Sort Method': 'quicksort', 'Sort Space Used': 26, 'Sort Space Type': 'Memory', 'Workers': [{'Worker Number': 0, 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory'}], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.0, 'Total Cost': 3259.96, 'Plan Rows': 11, 'Plan Width': 8, 'Actual Startup Time': 0.174, 'Actual Total Time': 7.939, 'Actual Rows': 31, 'Actual Loops': 2, 'Filter': "((name)::text = ANY ('{avr,chromium,clang++,comparator,nginx,paypal,sqoop}'::text[]))", 'Rows Removed by Filter': 93354, 'Workers': []}]}, {'Node Type': 'Sort', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3.17, 'Total Cost': 3.18, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.023, 'Actual Total Time': 0.024, 'Actual Rows': 1, 'Actual Loops': 2, 'Sort Key': ['s.site_id'], 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory', 'Workers': [{'Worker Number': 0, 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory'}], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Relation Name': 'site', 'Alias': 's', 'Startup Cost': 0.0, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.012, 'Actual Total Time': 0.013, 'Actual Rows': 1, 'Actual Loops': 2, 'Filter': "((site_name)::text = 'stackoverflow'::text)", 'Rows Removed by Filter': 172, 'Workers': []}]}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.69, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.071, 'Actual Total Time': 5.832, 'Actual Rows': 3935, 'Actual Loops': 7, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 27542, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 6.9, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.003, 'Actual Rows': 1, 'Actual Loops': 27542, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((view_count >= 10) AND (view_count <= 1000))', 'Rows Removed by Filter': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 6.9, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.003, 'Actual Rows': 1, 'Actual Loops': 20257, 'Index Cond': '((id = q1.owner_user_id) AND (site_id = q1.site_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'badge_pkey', 'Relation Name': 'badge', 'Alias': 'b1', 'Startup Cost': 0.56, 'Total Cost': 3.87, 'Plan Rows': 1, 'Plan Width': 19, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.005, 'Actual Rows': 39, 'Actual Loops': 20257, 'Index Cond': '((site_id = q1.site_id) AND (user_id = q1.owner_user_id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 0, 'Workers': []}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'acc', 'Startup Cost': 0.43, 'Total Cost': 6.89, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 0, 'Actual Loops': 786994, 'Index Cond': '(id = u1.account_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((website_url)::text ~~* '%en'::text)", 'Rows Removed by Filter': 1}]}]}]}]}]}


sql file: q15-002.sql

sql: SELECT b1.name, count(*)
FROM
site as s,
so_user as u1,
tag as t1,
tag_question as tq1,
question as q1,
badge as b1,
account as acc
WHERE
s.site_id = u1.site_id
AND s.site_id = b1.site_id
AND s.site_id = t1.site_id
AND s.site_id = tq1.site_id
AND s.site_id = q1.site_id
AND t1.id = tq1.tag_id
AND q1.id = tq1.question_id
AND q1.owner_user_id = u1.id
AND acc.id = u1.account_id
AND b1.user_id = u1.id
AND (q1.score >= 10)
AND (q1.score <= 1000)
AND (s.site_name in ('stackoverflow','superuser'))
AND (t1.name in ('binding','makefile','replace'))
AND (acc.website_url ILIKE ('%'))
GROUP BY b1.name
ORDER BY COUNT(*)
DESC
LIMIT 100

detailed info: {'Node Type': 'Limit', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3906.52, 'Total Cost': 3906.53, 'Plan Rows': 1, 'Plan Width': 19, 'Actual Startup Time': 278.172, 'Actual Total Time': 278.234, 'Actual Rows': 90, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3906.52, 'Total Cost': 3906.53, 'Plan Rows': 1, 'Plan Width': 19, 'Actual Startup Time': 278.171, 'Actual Total Time': 278.23, 'Actual Rows': 90, 'Actual Loops': 1, 'Sort Key': ['(count(*)) DESC'], 'Sort Method': 'quicksort', 'Sort Space Used': 30, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Aggregate', 'Strategy': 'Sorted', 'Partial Mode': 'Simple', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3906.49, 'Total Cost': 3906.51, 'Plan Rows': 1, 'Plan Width': 19, 'Actual Startup Time': 272.662, 'Actual Total Time': 278.216, 'Actual Rows': 90, 'Actual Loops': 1, 'Group Key': ['b1.name'], 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3906.49, 'Total Cost': 3906.5, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 272.652, 'Actual Total Time': 274.987, 'Actual Rows': 111361, 'Actual Loops': 1, 'Sort Key': ['b1.name'], 'Sort Method': 'quicksort', 'Sort Space Used': 6015, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1002.44, 'Total Cost': 3906.48, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 4.032, 'Actual Total Time': 264.321, 'Actual Rows': 111361, 'Actual Loops': 1, 'Inner Unique': True, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1002.0, 'Total Cost': 3899.59, 'Plan Rows': 1, 'Plan Width': 15, 'Actual Startup Time': 4.026, 'Actual Total Time': 138.749, 'Actual Rows': 198749, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '((s.site_id = b1.site_id) AND (b1.user_id = q1.owner_user_id))', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1001.44, 'Total Cost': 3892.42, 'Plan Rows': 1, 'Plan Width': 32, 'Actual Startup Time': 4.019, 'Actual Total Time': 25.416, 'Actual Rows': 1289, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(s.site_id = u1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Gather', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 1001.0, 'Total Cost': 3885.47, 'Plan Rows': 1, 'Plan Width': 20, 'Actual Startup Time': 4.013, 'Actual Total Time': 22.052, 'Actual Rows': 1289, 'Actual Loops': 1, 'Workers Planned': 1, 'Workers Launched': 1, 'Single Copy': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.0, 'Total Cost': 2885.37, 'Plan Rows': 1, 'Plan Width': 20, 'Actual Startup Time': 2.985, 'Actual Total Time': 55.836, 'Actual Rows': 644, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(s.site_id = q1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.56, 'Total Cost': 2788.65, 'Plan Rows': 14, 'Plan Width': 16, 'Actual Startup Time': 2.971, 'Actual Total Time': 18.066, 'Actual Rows': 14344, 'Actual Loops': 2, 'Inner Unique': False, 'Join Filter': '(s.site_id = tq1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.0, 'Total Cost': 2726.58, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 2.952, 'Actual Total Time': 4.688, 'Actual Rows': 2, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(s.site_id = t1.site_id)', 'Rows Removed by Join Filter': 26, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.0, 'Total Cost': 2710.64, 'Plan Rows': 5, 'Plan Width': 8, 'Actual Startup Time': 0.195, 'Actual Total Time': 4.58, 'Actual Rows': 15, 'Actual Loops': 2, 'Filter': "((name)::text = ANY ('{binding,makefile,replace}'::text[]))", 'Rows Removed by Filter': 93370, 'Workers': []}, {'Node Type': 'Seq Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Relation Name': 'site', 'Alias': 's', 'Startup Cost': 0.0, 'Total Cost': 3.16, 'Plan Rows': 2, 'Plan Width': 4, 'Actual Startup Time': 0.006, 'Actual Total Time': 0.007, 'Actual Rows': 2, 'Actual Loops': 30, 'Filter': "((site_name)::text = ANY ('{stackoverflow,superuser}'::text[]))", 'Rows Removed by Filter': 168, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.69, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.013, 'Actual Total Time': 6.28, 'Actual Rows': 7172, 'Actual Loops': 4, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 6.9, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.003, 'Actual Rows': 0, 'Actual Loops': 28687, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((score >= 10) AND (score <= 1000))', 'Rows Removed by Filter': 1, 'Workers': []}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 6.94, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 1289, 'Index Cond': '((id = q1.owner_user_id) AND (site_id = q1.site_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'badge_pkey', 'Relation Name': 'badge', 'Alias': 'b1', 'Startup Cost': 0.56, 'Total Cost': 7.16, 'Plan Rows': 1, 'Plan Width': 19, 'Actual Startup Time': 0.004, 'Actual Total Time': 0.079, 'Actual Rows': 154, 'Actual Loops': 1289, 'Index Cond': '((site_id = u1.site_id) AND (user_id = u1.id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'acc', 'Startup Cost': 0.43, 'Total Cost': 6.89, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 198749, 'Index Cond': '(id = u1.account_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((website_url)::text ~~* '%'::text)", 'Rows Removed by Filter': 0}]}]}]}]}]}


sql file: q8-005.sql

sql: select count(distinct q1.id) from
site, post_link pl, question q1, question q2, comment c1, comment c2,
tag, tag_question tq1, tag_question tq2
where
site.site_name = 'german' and
pl.site_id = site.site_id and

pl.site_id = q1.site_id and
pl.post_id_from = q1.id and
pl.site_id = q2.site_id and
pl.post_id_to = q2.id and

c1.site_id = q1.site_id and
c1.post_id = q1.id and

c2.site_id = q2.site_id and
c2.post_id = q2.id and

c1.date > c2.date and

tag.name in ('ruby-on-rails', 'javascript', 'python-3.x', 'excel') and
tag.id = tq1.tag_id and
tag.site_id = tq1.site_id and
tag.id = tq2.tag_id and
tag.site_id = tq1.site_id and

tag.site_id = pl.site_id and

tq1.site_id = q1.site_id and
tq1.question_id = q1.id and
tq2.site_id = q2.site_id and
tq2.question_id = q2.id;

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 7111.57, 'Total Cost': 7111.58, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 1.336, 'Actual Total Time': 1.339, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 7111.56, 'Total Cost': 7111.56, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 1.334, 'Actual Total Time': 1.335, 'Actual Rows': 0, 'Actual Loops': 1, 'Sort Key': ['q1.id'], 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.13, 'Total Cost': 7111.55, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 1.329, 'Actual Total Time': 1.331, 'Actual Rows': 0, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '((c1.date > c2.date) AND (pl.post_id_to = c2.post_id) AND (c2.site_id = tag.site_id))', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.56, 'Total Cost': 7103.38, 'Plan Rows': 1, 'Plan Width': 56, 'Actual Startup Time': 1.329, 'Actual Total Time': 1.331, 'Actual Rows': 0, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '((tag.id = tq2.tag_id) AND (tag.site_id = tq2.site_id))', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.0, 'Total Cost': 7095.21, 'Plan Rows': 1, 'Plan Width': 56, 'Actual Startup Time': 1.329, 'Actual Total Time': 1.33, 'Actual Rows': 0, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(q2.site_id = tag.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.56, 'Total Cost': 7090.97, 'Plan Rows': 1, 'Plan Width': 48, 'Actual Startup Time': 1.329, 'Actual Total Time': 1.33, 'Actual Rows': 0, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(pl.site_id = tag.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.13, 'Total Cost': 7082.94, 'Plan Rows': 1, 'Plan Width': 48, 'Actual Startup Time': 1.329, 'Actual Total Time': 1.329, 'Actual Rows': 0, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(c1.site_id = tag.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.56, 'Total Cost': 7074.78, 'Plan Rows': 1, 'Plan Width': 32, 'Actual Startup Time': 1.328, 'Actual Total Time': 1.329, 'Actual Rows': 0, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(q1.site_id = tag.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.13, 'Total Cost': 6977.09, 'Plan Rows': 23, 'Plan Width': 24, 'Actual Startup Time': 1.328, 'Actual Total Time': 1.329, 'Actual Rows': 0, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.56, 'Total Cost': 6915.34, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 1.328, 'Actual Total Time': 1.328, 'Actual Rows': 0, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Index Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'site_pkey', 'Relation Name': 'site', 'Alias': 'site', 'Startup Cost': 0.14, 'Total Cost': 15.17, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.016, 'Actual Total Time': 0.022, 'Actual Rows': 1, 'Actual Loops': 1, 'Filter': "((site_name)::text = 'german'::text)", 'Rows Removed by Filter': 172}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_pkey', 'Relation Name': 'tag', 'Alias': 'tag', 'Startup Cost': 0.42, 'Total Cost': 6900.16, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 1.305, 'Actual Total Time': 1.305, 'Actual Rows': 0, 'Actual Loops': 1, 'Index Cond': '(site_id = site.site_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((name)::text = ANY ('{ruby-on-rails,javascript,python-3.x,excel}'::text[]))", 'Rows Removed by Filter': 258}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.44, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.0, 'Actual Total Time': 0.0, 'Actual Rows': 0, 'Actual Loops': 0, 'Index Cond': '((site_id = tag.site_id) AND (tag_id = tag.id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 0}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 4.23, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.0, 'Actual Total Time': 0.0, 'Actual Rows': 0, 'Actual Loops': 0, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'comment_site_id_post_id_idx', 'Relation Name': 'comment', 'Alias': 'c1', 'Startup Cost': 0.57, 'Total Cost': 8.15, 'Plan Rows': 1, 'Plan Width': 16, 'Actual Startup Time': 0.0, 'Actual Total Time': 0.0, 'Actual Rows': 0, 'Actual Loops': 0, 'Index Cond': '((site_id = q1.site_id) AND (post_id = q1.id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'post_link_pkey', 'Relation Name': 'post_link', 'Alias': 'pl', 'Startup Cost': 0.43, 'Total Cost': 8.01, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.0, 'Actual Total Time': 0.0, 'Actual Rows': 0, 'Actual Loops': 0, 'Index Cond': '((site_id = q1.site_id) AND (post_id_from = q1.id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 0}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q2', 'Startup Cost': 0.43, 'Total Cost': 4.23, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.0, 'Actual Total Time': 0.0, 'Actual Rows': 0, 'Actual Loops': 0, 'Index Cond': '((id = pl.post_id_to) AND (site_id = pl.site_id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 0}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_pkey', 'Relation Name': 'tag_question', 'Alias': 'tq2', 'Startup Cost': 0.56, 'Total Cost': 8.15, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.0, 'Actual Total Time': 0.0, 'Actual Rows': 0, 'Actual Loops': 0, 'Index Cond': '((site_id = pl.site_id) AND (question_id = pl.post_id_to))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'comment_site_id_post_id_idx', 'Relation Name': 'comment', 'Alias': 'c2', 'Startup Cost': 0.57, 'Total Cost': 8.15, 'Plan Rows': 1, 'Plan Width': 16, 'Actual Startup Time': 0.0, 'Actual Total Time': 0.0, 'Actual Rows': 0, 'Actual Loops': 0, 'Index Cond': '((site_id = tq2.site_id) AND (post_id = tq2.question_id))', 'Rows Removed by Index Recheck': 0}]}]}]}


sql file: q7-004.sql

sql: select count(distinct account.display_name) from account, so_user, badge b1, badge b2 where
account.website_url != '' and
account.id = so_user.account_id and

b1.site_id = so_user.site_id and
b1.user_id = so_user.id and
b1.name = 'Custodian' and

b2.site_id = so_user.site_id and
b2.user_id = so_user.id and
b2.name = 'Commentator' and
b2.date > b1.date + '11 months'::interval

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 1525709.67, 'Total Cost': 1525709.68, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 714.232, 'Actual Total Time': 752.91, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Gather Merge', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 1525564.18, 'Total Cost': 1525706.75, 'Plan Rows': 1169, 'Plan Width': 11, 'Actual Startup Time': 713.004, 'Actual Total Time': 752.752, 'Actual Rows': 3925, 'Actual Loops': 1, 'Workers Planned': 6, 'Workers Launched': 6, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 1524564.09, 'Total Cost': 1524564.57, 'Plan Rows': 195, 'Plan Width': 11, 'Actual Startup Time': 711.117, 'Actual Total Time': 711.132, 'Actual Rows': 561, 'Actual Loops': 7, 'Sort Key': ['account.display_name'], 'Sort Method': 'quicksort', 'Sort Space Used': 39, 'Sort Space Type': 'Memory', 'Workers': [{'Worker Number': 0, 'Sort Method': 'quicksort', 'Sort Space Used': 37, 'Sort Space Type': 'Memory'}, {'Worker Number': 1, 'Sort Method': 'quicksort', 'Sort Space Used': 36, 'Sort Space Type': 'Memory'}, {'Worker Number': 2, 'Sort Method': 'quicksort', 'Sort Space Used': 36, 'Sort Space Type': 'Memory'}, {'Worker Number': 3, 'Sort Method': 'quicksort', 'Sort Space Used': 38, 'Sort Space Type': 'Memory'}, {'Worker Number': 4, 'Sort Method': 'quicksort', 'Sort Space Used': 35, 'Sort Space Type': 'Memory'}, {'Worker Number': 5, 'Sort Method': 'quicksort', 'Sort Space Used': 37, 'Sort Space Type': 'Memory'}], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.44, 'Total Cost': 1524556.67, 'Plan Rows': 195, 'Plan Width': 11, 'Actual Startup Time': 3.332, 'Actual Total Time': 710.842, 'Actual Rows': 561, 'Actual Loops': 7, 'Inner Unique': True, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.0, 'Total Cost': 1507339.64, 'Plan Rows': 3729, 'Plan Width': 4, 'Actual Startup Time': 0.963, 'Actual Total Time': 691.89, 'Actual Rows': 3272, 'Actual Loops': 7, 'Inner Unique': True, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.57, 'Total Cost': 1071784.54, 'Plan Rows': 90454, 'Plan Width': 16, 'Actual Startup Time': 0.948, 'Actual Total Time': 673.117, 'Actual Rows': 3272, 'Actual Loops': 7, 'Inner Unique': False, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'badge', 'Alias': 'b1', 'Startup Cost': 0.0, 'Total Cost': 477779.26, 'Plan Rows': 188202, 'Plan Width': 16, 'Actual Startup Time': 0.022, 'Actual Total Time': 252.147, 'Actual Rows': 154945, 'Actual Loops': 7, 'Filter': "((name)::text = 'Custodian'::text)", 'Rows Removed by Filter': 7164613, 'Workers': []}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'badge_pkey', 'Relation Name': 'badge', 'Alias': 'b2', 'Startup Cost': 0.57, 'Total Cost': 3.15, 'Plan Rows': 1, 'Plan Width': 16, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.003, 'Actual Rows': 0, 'Actual Loops': 1084613, 'Index Cond': "((site_id = b1.site_id) AND (user_id = b1.user_id) AND (name = 'Commentator'::text) AND (date > (b1.date + '11 mons'::interval)))", 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'so_user', 'Startup Cost': 0.44, 'Total Cost': 4.82, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.006, 'Actual Total Time': 0.006, 'Actual Rows': 1, 'Actual Loops': 22902, 'Index Cond': '((id = b1.user_id) AND (site_id = b1.site_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'account', 'Startup Cost': 0.43, 'Total Cost': 4.62, 'Plan Rows': 1, 'Plan Width': 15, 'Actual Startup Time': 0.006, 'Actual Total Time': 0.006, 'Actual Rows': 0, 'Actual Loops': 22902, 'Index Cond': '(id = so_user.account_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((website_url)::text <> ''::text)", 'Rows Removed by Filter': 1, 'Workers': []}]}]}]}]}


sql file: q10-005.sql

sql: select count(distinct q1.id) from
site, post_link pl1, post_link pl2, question q1, question q2, question q3 where

site.site_name = 'martialarts' and
q1.site_id = site.site_id and
q1.site_id = q2.site_id and
q2.site_id = q3.site_id and

pl1.site_id = q1.site_id and
pl1.post_id_from = q1.id and
pl1.post_id_to = q2.id and

pl2.site_id = q1.site_id and
pl2.post_id_from = q2.id and
pl2.post_id_to = q3.id and

exists ( select * from comment where comment.site_id = q3.site_id and comment.post_id = q3.id ) and
exists ( select * from comment where comment.site_id = q2.site_id and comment.post_id = q2.id ) and
exists ( select * from comment where comment.site_id = q1.site_id and comment.post_id = q1.id ) and

q1.score > q3.score;

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 133797.16, 'Total Cost': 133797.17, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.62, 'Actual Total Time': 0.621, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 133796.9, 'Total Cost': 133797.03, 'Plan Rows': 52, 'Plan Width': 4, 'Actual Startup Time': 0.615, 'Actual Total Time': 0.616, 'Actual Rows': 11, 'Actual Loops': 1, 'Sort Key': ['q1.id'], 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Semi', 'Startup Cost': 4.01, 'Total Cost': 133795.42, 'Plan Rows': 52, 'Plan Width': 4, 'Actual Startup Time': 0.118, 'Actual Total Time': 0.611, 'Actual Rows': 11, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(pl1.post_id_from = comment_2.post_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Semi', 'Startup Cost': 3.44, 'Total Cost': 133738.64, 'Plan Rows': 52, 'Plan Width': 40, 'Actual Startup Time': 0.115, 'Actual Total Time': 0.578, 'Actual Rows': 14, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '((q1.site_id = comment_1.site_id) AND (pl1.post_id_to = comment_1.post_id))', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Semi', 'Startup Cost': 2.88, 'Total Cost': 133681.87, 'Plan Rows': 52, 'Plan Width': 48, 'Actual Startup Time': 0.098, 'Actual Total Time': 0.561, 'Actual Rows': 16, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '((q1.site_id = comment.site_id) AND (pl2.post_id_to = comment.post_id))', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.31, 'Total Cost': 133625.09, 'Plan Rows': 52, 'Plan Width': 52, 'Actual Startup Time': 0.063, 'Actual Total Time': 0.528, 'Actual Rows': 18, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(q1.site_id = q2.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.88, 'Total Cost': 133200.61, 'Plan Rows': 52, 'Plan Width': 44, 'Actual Startup Time': 0.06, 'Actual Total Time': 0.508, 'Actual Rows': 18, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '((q1.score > q3.score) AND (q1.site_id = q3.site_id))', 'Rows Removed by Join Filter': 86, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.44, 'Total Cost': 131926.77, 'Plan Rows': 156, 'Plan Width': 40, 'Actual Startup Time': 0.044, 'Actual Total Time': 0.398, 'Actual Rows': 104, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(site.site_id = q1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.0, 'Total Cost': 130653.33, 'Plan Rows': 156, 'Plan Width': 28, 'Actual Startup Time': 0.037, 'Actual Total Time': 0.207, 'Actual Rows': 104, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(site.site_id = pl2.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.57, 'Total Cost': 23915.3, 'Plan Rows': 13089, 'Plan Width': 16, 'Actual Startup Time': 0.031, 'Actual Total Time': 0.064, 'Actual Rows': 232, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Index Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'site_pkey', 'Relation Name': 'site', 'Alias': 'site', 'Startup Cost': 0.14, 'Total Cost': 15.17, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.019, 'Actual Total Time': 0.022, 'Actual Rows': 1, 'Actual Loops': 1, 'Filter': "((site_name)::text = 'martialarts'::text)", 'Rows Removed by Filter': 172}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'post_link_pkey', 'Relation Name': 'post_link', 'Alias': 'pl1', 'Startup Cost': 0.43, 'Total Cost': 23762.05, 'Plan Rows': 13807, 'Plan Width': 12, 'Actual Startup Time': 0.011, 'Actual Total Time': 0.029, 'Actual Rows': 232, 'Actual Loops': 1, 'Index Cond': '(site_id = site.site_id)', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'post_link_pkey', 'Relation Name': 'post_link', 'Alias': 'pl2', 'Startup Cost': 0.43, 'Total Cost': 8.14, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.0, 'Actual Total Time': 0.001, 'Actual Rows': 0, 'Actual Loops': 232, 'Index Cond': '((site_id = pl1.site_id) AND (post_id_from = pl1.post_id_to))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 8.15, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 104, 'Index Cond': '((id = pl1.post_id_from) AND (site_id = pl1.site_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q3', 'Startup Cost': 0.43, 'Total Cost': 8.15, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 104, 'Index Cond': '((id = pl2.post_id_to) AND (site_id = pl2.site_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q2', 'Startup Cost': 0.43, 'Total Cost': 8.15, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 18, 'Index Cond': '((id = pl1.post_id_to) AND (site_id = pl1.site_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'comment_site_id_post_id_idx', 'Relation Name': 'comment', 'Alias': 'comment', 'Startup Cost': 0.57, 'Total Cost': 8.28, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 18, 'Index Cond': '((site_id = q3.site_id) AND (post_id = q3.id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'comment_site_id_post_id_idx', 'Relation Name': 'comment', 'Alias': 'comment_1', 'Startup Cost': 0.57, 'Total Cost': 8.28, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 16, 'Index Cond': '((site_id = q2.site_id) AND (post_id = q2.id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'comment_site_id_post_id_idx', 'Relation Name': 'comment', 'Alias': 'comment_2', 'Startup Cost': 0.57, 'Total Cost': 8.28, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 14, 'Index Cond': '((site_id = q1.site_id) AND (post_id = q1.id))', 'Rows Removed by Index Recheck': 0}]}]}]}


sql file: q7-003.sql

sql: select count(distinct account.display_name) from account, so_user, badge b1, badge b2 where
account.website_url != '' and
account.id = so_user.account_id and

b1.site_id = so_user.site_id and
b1.user_id = so_user.id and
b1.name = 'API Evangelist' and

b2.site_id = so_user.site_id and
b2.user_id = so_user.id and
b2.name = 'Documentation Pioneer' and
b2.date > b1.date + '7 months'::interval

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 483680.67, 'Total Cost': 483680.68, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 219.046, 'Actual Total Time': 220.903, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 483680.66, 'Total Cost': 483680.67, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 219.042, 'Actual Total Time': 220.899, 'Actual Rows': 0, 'Actual Loops': 1, 'Sort Key': ['account.display_name'], 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1001.44, 'Total Cost': 483680.65, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 219.038, 'Actual Total Time': 220.894, 'Actual Rows': 0, 'Actual Loops': 1, 'Inner Unique': True, 'Plans': [{'Node Type': 'Gather', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 1001.0, 'Total Cost': 483676.03, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 219.037, 'Actual Total Time': 220.893, 'Actual Rows': 0, 'Actual Loops': 1, 'Workers Planned': 6, 'Workers Launched': 6, 'Single Copy': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.0, 'Total Cost': 482675.93, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 217.353, 'Actual Total Time': 217.354, 'Actual Rows': 0, 'Actual Loops': 7, 'Inner Unique': True, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.57, 'Total Cost': 482651.38, 'Plan Rows': 3, 'Plan Width': 16, 'Actual Startup Time': 217.352, 'Actual Total Time': 217.353, 'Actual Rows': 0, 'Actual Loops': 7, 'Inner Unique': False, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'badge', 'Alias': 'b1', 'Startup Cost': 0.0, 'Total Cost': 477779.26, 'Plan Rows': 1068, 'Plan Width': 16, 'Actual Startup Time': 215.791, 'Actual Total Time': 217.344, 'Actual Rows': 2, 'Actual Loops': 7, 'Filter': "((name)::text = 'API Evangelist'::text)", 'Rows Removed by Filter': 7319555, 'Workers': []}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'badge_pkey', 'Relation Name': 'badge', 'Alias': 'b2', 'Startup Cost': 0.57, 'Total Cost': 4.55, 'Plan Rows': 1, 'Plan Width': 16, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.003, 'Actual Rows': 0, 'Actual Loops': 15, 'Index Cond': "((site_id = b1.site_id) AND (user_id = b1.user_id) AND (name = 'Documentation Pioneer'::text) AND (date > (b1.date + '7 mons'::interval)))", 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'so_user', 'Startup Cost': 0.44, 'Total Cost': 8.18, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.0, 'Actual Total Time': 0.0, 'Actual Rows': 0, 'Actual Loops': 0, 'Index Cond': '((id = b1.user_id) AND (site_id = b1.site_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'account', 'Startup Cost': 0.43, 'Total Cost': 4.62, 'Plan Rows': 1, 'Plan Width': 15, 'Actual Startup Time': 0.0, 'Actual Total Time': 0.0, 'Actual Rows': 0, 'Actual Loops': 0, 'Index Cond': '(id = so_user.account_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((website_url)::text <> ''::text)", 'Rows Removed by Filter': 0}]}]}]}


sql file: q13-003.sql

sql: SELECT acc.location, count(*)
FROM
site as s,
so_user as u1,
question as q1,
answer as a1,
tag as t1,
tag_question as tq1,
badge as b,
account as acc
WHERE
s.site_id = q1.site_id
AND s.site_id = u1.site_id
AND s.site_id = a1.site_id
AND s.site_id = t1.site_id
AND s.site_id = tq1.site_id
AND s.site_id = b.site_id
AND q1.id = tq1.question_id
AND q1.id = a1.question_id
AND a1.owner_user_id = u1.id
AND t1.id = tq1.tag_id
AND b.user_id = u1.id
AND acc.id = u1.account_id
AND (s.site_name in ('money','scifi','security','webapps'))
AND (t1.name in ('aliens','canada','certificates','cryptography','dc','india','network','passwords','privacy','windows'))
AND (q1.view_count >= 10)
AND (q1.view_count <= 1000)
AND (u1.downvotes >= 10)
AND (u1.downvotes <= 100000)
AND (b.name in ('Citizen Patrol','Excavator','Informed'))
GROUP BY acc.location
ORDER BY COUNT(*)
DESC
LIMIT 100

detailed info: {'Node Type': 'Limit', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 5451.81, 'Total Cost': 5451.82, 'Plan Rows': 1, 'Plan Width': 26, 'Actual Startup Time': 59.441, 'Actual Total Time': 59.483, 'Actual Rows': 100, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 5451.81, 'Total Cost': 5451.82, 'Plan Rows': 1, 'Plan Width': 26, 'Actual Startup Time': 59.44, 'Actual Total Time': 59.478, 'Actual Rows': 100, 'Actual Loops': 1, 'Sort Key': ['(count(*)) DESC'], 'Sort Method': 'quicksort', 'Sort Space Used': 37, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Aggregate', 'Strategy': 'Sorted', 'Partial Mode': 'Simple', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 5451.78, 'Total Cost': 5451.8, 'Plan Rows': 1, 'Plan Width': 26, 'Actual Startup Time': 59.219, 'Actual Total Time': 59.46, 'Actual Rows': 200, 'Actual Loops': 1, 'Group Key': ['acc.location'], 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 5451.78, 'Total Cost': 5451.79, 'Plan Rows': 1, 'Plan Width': 18, 'Actual Startup Time': 59.214, 'Actual Total Time': 59.329, 'Actual Rows': 3809, 'Actual Loops': 1, 'Sort Key': ['acc.location'], 'Sort Method': 'quicksort', 'Sort Space Used': 160, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1003.01, 'Total Cost': 5451.77, 'Plan Rows': 1, 'Plan Width': 18, 'Actual Startup Time': 4.768, 'Actual Total Time': 58.831, 'Actual Rows': 3809, 'Actual Loops': 1, 'Inner Unique': True, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1002.58, 'Total Cost': 5444.47, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 4.764, 'Actual Total Time': 55.622, 'Actual Rows': 3809, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(s.site_id = b.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1002.01, 'Total Cost': 5440.43, 'Plan Rows': 1, 'Plan Width': 36, 'Actual Startup Time': 4.756, 'Actual Total Time': 18.825, 'Actual Rows': 1502, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(s.site_id = q1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Gather', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 1001.58, 'Total Cost': 5433.16, 'Plan Rows': 1, 'Plan Width': 40, 'Actual Startup Time': 4.711, 'Actual Total Time': 11.636, 'Actual Rows': 3999, 'Actual Loops': 1, 'Workers Planned': 1, 'Workers Launched': 1, 'Single Copy': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.58, 'Total Cost': 4433.06, 'Plan Rows': 1, 'Plan Width': 40, 'Actual Startup Time': 3.505, 'Actual Total Time': 26.528, 'Actual Rows': 2000, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(s.site_id = u1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.14, 'Total Cost': 4425.79, 'Plan Rows': 1, 'Plan Width': 28, 'Actual Startup Time': 3.497, 'Actual Total Time': 19.693, 'Actual Rows': 3587, 'Actual Loops': 2, 'Inner Unique': False, 'Join Filter': '(s.site_id = a1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.71, 'Total Cost': 4034.27, 'Plan Rows': 54, 'Plan Width': 16, 'Actual Startup Time': 3.483, 'Actual Total Time': 12.301, 'Actual Rows': 5607, 'Actual Loops': 2, 'Inner Unique': False, 'Join Filter': '(s.site_id = tq1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.14, 'Total Cost': 3911.67, 'Plan Rows': 2, 'Plan Width': 12, 'Actual Startup Time': 3.466, 'Actual Total Time': 9.464, 'Actual Rows': 7, 'Actual Loops': 2, 'Inner Unique': True, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.0, 'Total Cost': 3671.96, 'Plan Rows': 109, 'Plan Width': 8, 'Actual Startup Time': 0.07, 'Actual Total Time': 9.391, 'Actual Rows': 120, 'Actual Loops': 2, 'Filter': "((name)::text = ANY ('{aliens,canada,certificates,cryptography,dc,india,network,passwords,privacy,windows}'::text[]))", 'Rows Removed by Filter': 93265, 'Workers': []}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'site_pkey', 'Relation Name': 'site', 'Alias': 's', 'Startup Cost': 0.14, 'Total Cost': 2.21, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 0, 'Actual Loops': 240, 'Index Cond': '(site_id = t1.site_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((site_name)::text = ANY ('{money,scifi,security,webapps}'::text[]))", 'Rows Removed by Filter': 1, 'Workers': []}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 60.91, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.007, 'Actual Total Time': 0.365, 'Actual Rows': 801, 'Actual Loops': 14, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 11214, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'answer_site_id_question_id_idx', 'Relation Name': 'answer', 'Alias': 'a1', 'Startup Cost': 0.43, 'Total Cost': 7.24, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 11214, 'Index Cond': '((site_id = tq1.site_id) AND (question_id = tq1.question_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 7.26, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 7174, 'Index Cond': '((id = a1.owner_user_id) AND (site_id = a1.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((downvotes >= 10) AND (downvotes <= 100000))', 'Rows Removed by Filter': 0, 'Workers': []}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 7.25, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 0, 'Actual Loops': 3999, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((view_count >= 10) AND (view_count <= 1000))', 'Rows Removed by Filter': 1}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'badge_pkey', 'Relation Name': 'badge', 'Alias': 'b', 'Startup Cost': 0.56, 'Total Cost': 4.03, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.024, 'Actual Rows': 3, 'Actual Loops': 1502, 'Index Cond': '((site_id = a1.site_id) AND (user_id = a1.owner_user_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((name)::text = ANY (\'{"Citizen Patrol",Excavator,Informed}\'::text[]))', 'Rows Removed by Filter': 449, 'Heap Fetches': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'acc', 'Startup Cost': 0.43, 'Total Cost': 7.3, 'Plan Rows': 1, 'Plan Width': 22, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 3809, 'Index Cond': '(id = u1.account_id)', 'Rows Removed by Index Recheck': 0}]}]}]}]}]}


sql file: q5-002.sql

sql: select COUNT(distinct account.display_name)
from
tag t1, site s1, question q1, tag_question tq1, so_user u1, comment c1,
account
where
-- underappreciated (high votes, low views) questions with at least one comment
s1.site_name='ux' and
t1.name in ('design', 'security', 'user-expectation') and
t1.site_id = s1.site_id and
q1.site_id = s1.site_id and
tq1.site_id = s1.site_id and
tq1.question_id = q1.id and
tq1.tag_id = t1.id and
q1.owner_user_id = u1.id and
q1.site_id = u1.site_id and
q1.score > 11 and
q1.view_count < 1565 and
c1.site_id = q1.site_id and
c1.post_id = q1.id and

-- to get the display name
account.id = u1.account_id;

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 7017.5, 'Total Cost': 7017.51, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 4.028, 'Actual Total Time': 4.03, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 7017.49, 'Total Cost': 7017.5, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 4.021, 'Actual Total Time': 4.024, 'Actual Rows': 41, 'Actual Loops': 1, 'Sort Key': ['account.display_name'], 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.0, 'Total Cost': 7017.48, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 0.318, 'Actual Total Time': 4.01, 'Actual Rows': 41, 'Actual Loops': 1, 'Inner Unique': True, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.57, 'Total Cost': 7009.85, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.313, 'Actual Total Time': 3.953, 'Actual Rows': 41, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(t1.site_id = c1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.0, 'Total Cost': 7002.05, 'Plan Rows': 1, 'Plan Width': 32, 'Actual Startup Time': 0.307, 'Actual Total Time': 3.902, 'Actual Rows': 15, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(t1.site_id = u1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.56, 'Total Cost': 6994.39, 'Plan Rows': 1, 'Plan Width': 28, 'Actual Startup Time': 0.3, 'Actual Total Time': 3.852, 'Actual Rows': 15, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(t1.site_id = q1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.13, 'Total Cost': 6818.48, 'Plan Rows': 23, 'Plan Width': 16, 'Actual Startup Time': 0.213, 'Actual Total Time': 1.78, 'Actual Rows': 1037, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.56, 'Total Cost': 6756.66, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.204, 'Actual Total Time': 1.357, 'Actual Rows': 3, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Index Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'site_pkey', 'Relation Name': 'site', 'Alias': 's1', 'Startup Cost': 0.14, 'Total Cost': 15.17, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.018, 'Actual Total Time': 0.019, 'Actual Rows': 1, 'Actual Loops': 1, 'Filter': "((site_name)::text = 'ux'::text)", 'Rows Removed by Filter': 172}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_pkey', 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.42, 'Total Cost': 6741.48, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.185, 'Actual Total Time': 1.335, 'Actual Rows': 3, 'Actual Loops': 1, 'Index Cond': '(site_id = s1.site_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((name)::text = ANY ('{design,security,user-expectation}'::text[]))", 'Rows Removed by Filter': 1027}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.51, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.006, 'Actual Total Time': 0.123, 'Actual Rows': 346, 'Actual Loops': 3, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 7.64, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 0, 'Actual Loops': 1037, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((score > 11) AND (view_count < 1565))', 'Rows Removed by Filter': 1}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 7.65, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.003, 'Actual Rows': 1, 'Actual Loops': 15, 'Index Cond': '((id = q1.owner_user_id) AND (site_id = q1.site_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'comment_site_id_post_id_idx', 'Relation Name': 'comment', 'Alias': 'c1', 'Startup Cost': 0.57, 'Total Cost': 7.79, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.003, 'Actual Rows': 3, 'Actual Loops': 15, 'Index Cond': '((site_id = tq1.site_id) AND (post_id = tq1.question_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'account', 'Startup Cost': 0.43, 'Total Cost': 7.63, 'Plan Rows': 1, 'Plan Width': 15, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 41, 'Index Cond': '(id = u1.account_id)', 'Rows Removed by Index Recheck': 0}]}]}]}


sql file: q4-002.sql

sql: select COUNT(distinct account.display_name)
from
tag t1, site s1, question q1, answer a1, tag_question tq1, so_user u1,
account
where
-- answerers posted at least 1 yr after the question was asked
s1.site_name='math' and
t1.name = 'optimization' and
t1.site_id = s1.site_id and
q1.site_id = s1.site_id and
tq1.site_id = s1.site_id and
tq1.question_id = q1.id and
tq1.tag_id = t1.id and
a1.site_id = q1.site_id and
a1.question_id = q1.id and
a1.owner_user_id = u1.id and
a1.site_id = u1.site_id and
a1.creation_date >= q1.creation_date + '1 year'::interval and

-- to get the display name
account.id = u1.account_id;

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 6797.72, 'Total Cost': 6797.73, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 23.456, 'Actual Total Time': 23.458, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 6797.71, 'Total Cost': 6797.72, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 23.443, 'Actual Total Time': 23.447, 'Actual Rows': 145, 'Actual Loops': 1, 'Sort Key': ['account.display_name'], 'Sort Method': 'quicksort', 'Sort Space Used': 28, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.87, 'Total Cost': 6797.7, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 0.336, 'Actual Total Time': 23.397, 'Actual Rows': 145, 'Actual Loops': 1, 'Inner Unique': True, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.44, 'Total Cost': 6790.6, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.328, 'Actual Total Time': 22.979, 'Actual Rows': 145, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(t1.site_id = u1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.0, 'Total Cost': 6783.47, 'Plan Rows': 1, 'Plan Width': 24, 'Actual Startup Time': 0.322, 'Actual Total Time': 22.558, 'Actual Rows': 145, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': "((t1.site_id = q1.site_id) AND (a1.creation_date >= (q1.creation_date + '1 year'::interval)))", 'Rows Removed by Join Filter': 3571, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.56, 'Total Cost': 6776.35, 'Plan Rows': 1, 'Plan Width': 36, 'Actual Startup Time': 0.224, 'Actual Total Time': 15.594, 'Actual Rows': 3716, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(t1.site_id = a1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.13, 'Total Cost': 6612.95, 'Plan Rows': 23, 'Plan Width': 16, 'Actual Startup Time': 0.217, 'Actual Total Time': 5.828, 'Actual Rows': 8414, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.56, 'Total Cost': 6551.11, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.204, 'Actual Total Time': 1.382, 'Actual Rows': 1, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Index Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'site_pkey', 'Relation Name': 'site', 'Alias': 's1', 'Startup Cost': 0.14, 'Total Cost': 15.17, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.016, 'Actual Total Time': 0.019, 'Actual Rows': 1, 'Actual Loops': 1, 'Filter': "((site_name)::text = 'math'::text)", 'Rows Removed by Filter': 172}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_pkey', 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.42, 'Total Cost': 6535.93, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.187, 'Actual Total Time': 1.361, 'Actual Rows': 1, 'Actual Loops': 1, 'Index Cond': '(site_id = s1.site_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((name)::text = 'optimization'::text)", 'Rows Removed by Filter': 1801}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.53, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.012, 'Actual Total Time': 4.105, 'Actual Rows': 8414, 'Actual Loops': 1, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 8414}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'answer_site_id_question_id_idx', 'Relation Name': 'answer', 'Alias': 'a1', 'Startup Cost': 0.43, 'Total Cost': 7.09, 'Plan Rows': 1, 'Plan Width': 20, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 0, 'Actual Loops': 8414, 'Index Cond': '((site_id = tq1.site_id) AND (question_id = tq1.question_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 7.1, 'Plan Rows': 1, 'Plan Width': 16, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 3716, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 7.12, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.003, 'Actual Rows': 1, 'Actual Loops': 145, 'Index Cond': '((id = a1.owner_user_id) AND (site_id = a1.site_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'account', 'Startup Cost': 0.43, 'Total Cost': 7.1, 'Plan Rows': 1, 'Plan Width': 15, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.003, 'Actual Rows': 1, 'Actual Loops': 145, 'Index Cond': '(id = u1.account_id)', 'Rows Removed by Index Recheck': 0}]}]}]}


sql file: q12-004.sql

sql: SELECT t1.name, count(*)
FROM
site as s,
so_user as u1,
question as q1,
answer as a1,
tag as t1,
tag_question as tq1
WHERE
q1.owner_user_id = u1.id
AND a1.question_id = q1.id
AND a1.owner_user_id = u1.id
AND s.site_id = q1.site_id
AND s.site_id = a1.site_id
AND s.site_id = u1.site_id
AND s.site_id = tq1.site_id
AND s.site_id = t1.site_id
AND q1.id = tq1.question_id
AND t1.id = tq1.tag_id
AND (s.site_name in ('stackoverflow'))
AND (t1.name in ('c-preprocessor','cursor','iteration','left-join','multiprocessing','phpstorm','polymorphism','printf','pyqt5','sdk','tabs','uibutton','uinavigationcontroller','vb6'))
AND (q1.favorite_count >= 0)
AND (q1.favorite_count <= 1)
AND (u1.downvotes >= 10)
AND (u1.downvotes <= 100000)
GROUP BY t1.name

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Sorted', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 4026.2, 'Total Cost': 4026.22, 'Plan Rows': 1, 'Plan Width': 19, 'Actual Startup Time': 163.595, 'Actual Total Time': 192.522, 'Actual Rows': 14, 'Actual Loops': 1, 'Group Key': ['t1.name'], 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 4026.2, 'Total Cost': 4026.21, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 163.589, 'Actual Total Time': 192.511, 'Actual Rows': 105, 'Actual Loops': 1, 'Sort Key': ['t1.name'], 'Sort Method': 'quicksort', 'Sort Space Used': 27, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1005.08, 'Total Cost': 4026.19, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 6.722, 'Actual Total Time': 192.486, 'Actual Rows': 105, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '((u1.id = q1.owner_user_id) AND (q1.id = a1.question_id) AND (s.site_id = q1.site_id))', 'Rows Removed by Join Filter': 4015, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1004.64, 'Total Cost': 4019.12, 'Plan Rows': 1, 'Plan Width': 47, 'Actual Startup Time': 4.577, 'Actual Total Time': 147.65, 'Actual Rows': 21960, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(s.site_id = u1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Gather', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 1004.21, 'Total Cost': 4012.04, 'Plan Rows': 1, 'Plan Width': 39, 'Actual Startup Time': 4.573, 'Actual Total Time': 83.788, 'Actual Rows': 34041, 'Actual Loops': 1, 'Workers Planned': 1, 'Workers Launched': 1, 'Single Copy': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.21, 'Total Cost': 3011.94, 'Plan Rows': 1, 'Plan Width': 39, 'Actual Startup Time': 3.543, 'Actual Total Time': 106.542, 'Actual Rows': 17020, 'Actual Loops': 2, 'Inner Unique': False, 'Join Filter': '(s.site_id = a1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.78, 'Total Cost': 2913.21, 'Plan Rows': 14, 'Plan Width': 27, 'Actual Startup Time': 3.515, 'Actual Total Time': 35.541, 'Actual Rows': 32600, 'Actual Loops': 2, 'Inner Unique': False, 'Join Filter': '(s.site_id = tq1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.21, 'Total Cost': 2851.24, 'Plan Rows': 1, 'Plan Width': 23, 'Actual Startup Time': 3.478, 'Actual Total Time': 5.534, 'Actual Rows': 7, 'Actual Loops': 2, 'Inner Unique': True, 'Hash Cond': '(t1.site_id = s.site_id)', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.04, 'Total Cost': 2848.01, 'Plan Rows': 21, 'Plan Width': 19, 'Actual Startup Time': 0.18, 'Actual Total Time': 5.489, 'Actual Rows': 46, 'Actual Loops': 2, 'Filter': "((name)::text = ANY ('{c-preprocessor,cursor,iteration,left-join,multiprocessing,phpstorm,polymorphism,printf,pyqt5,sdk,tabs,uibutton,uinavigationcontroller,vb6}'::text[]))", 'Rows Removed by Filter': 93339, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3.16, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.011, 'Actual Total Time': 0.011, 'Actual Rows': 1, 'Actual Loops': 2, 'Hash Buckets': 1024, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 9, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Relation Name': 'site', 'Alias': 's', 'Startup Cost': 0.0, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.008, 'Actual Total Time': 0.009, 'Actual Rows': 1, 'Actual Loops': 2, 'Filter': "((site_name)::text = 'stackoverflow'::text)", 'Rows Removed by Filter': 172, 'Workers': []}]}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.59, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.011, 'Actual Total Time': 4.058, 'Actual Rows': 4657, 'Actual Loops': 14, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 65201, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'answer_site_id_question_id_idx', 'Relation Name': 'answer', 'Alias': 'a1', 'Startup Cost': 0.43, 'Total Cost': 7.04, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 65201, 'Index Cond': '((site_id = tq1.site_id) AND (question_id = tq1.question_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 7.07, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 34041, 'Index Cond': '((id = a1.owner_user_id) AND (site_id = a1.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((downvotes >= 10) AND (downvotes <= 100000))', 'Rows Removed by Filter': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 7.06, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 0, 'Actual Loops': 21960, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((favorite_count >= 0) AND (favorite_count <= 1))', 'Rows Removed by Filter': 1}]}]}]}


sql file: q11-001.sql

sql: SELECT COUNT(*)
FROM
tag as t,
site as s,
question as q,
tag_question as tq
WHERE
t.site_id = s.site_id
AND q.site_id = s.site_id
AND tq.site_id = s.site_id
AND tq.question_id = q.id
AND tq.tag_id = t.id
AND (s.site_name in ('stackoverflow'))
AND (t.name in ('api','audio','events','file-io','forms','functional-programming','java-ee','serialization','sqlite','ubuntu','unicode'))
AND (q.favorite_count >= 5)
AND (q.favorite_count <= 5000)

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 4002.25, 'Total Cost': 4002.26, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 573.013, 'Actual Total Time': 617.854, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Gather', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 1004.2, 'Total Cost': 4002.25, 'Plan Rows': 1, 'Plan Width': 0, 'Actual Startup Time': 4.31, 'Actual Total Time': 617.644, 'Actual Rows': 7146, 'Actual Loops': 1, 'Workers Planned': 1, 'Workers Launched': 1, 'Single Copy': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.2, 'Total Cost': 3002.15, 'Plan Rows': 1, 'Plan Width': 0, 'Actual Startup Time': 3.273, 'Actual Total Time': 555.873, 'Actual Rows': 3573, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(t.site_id = q.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.77, 'Total Cost': 2912.91, 'Plan Rows': 14, 'Plan Width': 16, 'Actual Startup Time': 3.248, 'Actual Total Time': 155.078, 'Actual Rows': 115428, 'Actual Loops': 2, 'Inner Unique': False, 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.2, 'Total Cost': 2851.33, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 3.225, 'Actual Total Time': 5.355, 'Actual Rows': 6, 'Actual Loops': 2, 'Inner Unique': True, 'Hash Cond': '(t.site_id = s.site_id)', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 't', 'Startup Cost': 0.03, 'Total Cost': 2848.0, 'Plan Rows': 61, 'Plan Width': 8, 'Actual Startup Time': 0.108, 'Actual Total Time': 5.305, 'Actual Rows': 117, 'Actual Loops': 2, 'Filter': "((name)::text = ANY ('{api,audio,events,file-io,forms,functional-programming,java-ee,serialization,sqlite,ubuntu,unicode}'::text[]))", 'Rows Removed by Filter': 93268, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3.16, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.01, 'Actual Total Time': 0.011, 'Actual Rows': 1, 'Actual Loops': 2, 'Hash Buckets': 1024, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 9, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Relation Name': 'site', 'Alias': 's', 'Startup Cost': 0.0, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.008, 'Actual Total Time': 0.009, 'Actual Rows': 1, 'Actual Loops': 2, 'Filter': "((site_name)::text = 'stackoverflow'::text)", 'Rows Removed by Filter': 172, 'Workers': []}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq', 'Startup Cost': 0.56, 'Total Cost': 61.26, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.012, 'Actual Total Time': 25.998, 'Actual Rows': 20987, 'Actual Loops': 11, 'Index Cond': '((site_id = t.site_id) AND (tag_id = t.id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q', 'Startup Cost': 0.43, 'Total Cost': 6.36, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.003, 'Actual Rows': 0, 'Actual Loops': 230855, 'Index Cond': '((id = tq.question_id) AND (site_id = tq.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((favorite_count >= 5) AND (favorite_count <= 5000))', 'Rows Removed by Filter': 1, 'Workers': []}]}]}]}


sql file: q12-005.sql

sql: SELECT t1.name, count(*)
FROM
site as s,
so_user as u1,
question as q1,
answer as a1,
tag as t1,
tag_question as tq1
WHERE
q1.owner_user_id = u1.id
AND a1.question_id = q1.id
AND a1.owner_user_id = u1.id
AND s.site_id = q1.site_id
AND s.site_id = a1.site_id
AND s.site_id = u1.site_id
AND s.site_id = tq1.site_id
AND s.site_id = t1.site_id
AND q1.id = tq1.question_id
AND t1.id = tq1.tag_id
AND (s.site_name in ('askubuntu','math'))
AND (t1.name in ('congruences','sheaf-theory'))
AND (q1.view_count >= 10)
AND (q1.view_count <= 1000)
AND (u1.reputation >= 10)
AND (u1.reputation <= 100000)
GROUP BY t1.name

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Sorted', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 12528.24, 'Total Cost': 12528.26, 'Plan Rows': 1, 'Plan Width': 19, 'Actual Startup Time': 8.601, 'Actual Total Time': 8.603, 'Actual Rows': 2, 'Actual Loops': 1, 'Group Key': ['t1.name'], 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 12528.24, 'Total Cost': 12528.25, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 8.597, 'Actual Total Time': 8.598, 'Actual Rows': 29, 'Actual Loops': 1, 'Sort Key': ['t1.name'], 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.44, 'Total Cost': 12528.23, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 2.129, 'Actual Total Time': 8.59, 'Actual Rows': 29, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(s.site_id = u1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.0, 'Total Cost': 12521.15, 'Plan Rows': 1, 'Plan Width': 39, 'Actual Startup Time': 2.123, 'Actual Total Time': 8.489, 'Actual Rows': 29, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '((a1.owner_user_id = q1.owner_user_id) AND (q1.id = a1.question_id) AND (s.site_id = q1.site_id))', 'Rows Removed by Join Filter': 711, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.56, 'Total Cost': 12514.08, 'Plan Rows': 1, 'Plan Width': 39, 'Actual Startup Time': 1.822, 'Actual Total Time': 6.668, 'Actual Rows': 860, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(s.site_id = a1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.13, 'Total Cost': 12351.88, 'Plan Rows': 23, 'Plan Width': 27, 'Actual Startup Time': 1.808, 'Actual Total Time': 3.771, 'Actual Rows': 1894, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(s.site_id = tq1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.56, 'Total Cost': 12289.81, 'Plan Rows': 1, 'Plan Width': 23, 'Actual Startup Time': 1.798, 'Actual Total Time': 2.56, 'Actual Rows': 2, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Index Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'site_pkey', 'Relation Name': 'site', 'Alias': 's', 'Startup Cost': 0.14, 'Total Cost': 15.17, 'Plan Rows': 2, 'Plan Width': 4, 'Actual Startup Time': 0.012, 'Actual Total Time': 0.02, 'Actual Rows': 2, 'Actual Loops': 1, 'Filter': "((site_name)::text = ANY ('{askubuntu,math}'::text[]))", 'Rows Removed by Filter': 171}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_pkey', 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.42, 'Total Cost': 6137.31, 'Plan Rows': 1, 'Plan Width': 19, 'Actual Startup Time': 0.89, 'Actual Total Time': 1.269, 'Actual Rows': 1, 'Actual Loops': 2, 'Index Cond': '(site_id = s.site_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((name)::text = ANY ('{congruences,sheaf-theory}'::text[]))", 'Rows Removed by Filter': 2442}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.69, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.007, 'Actual Total Time': 0.549, 'Actual Rows': 947, 'Actual Loops': 2, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'answer_site_id_question_id_idx', 'Relation Name': 'answer', 'Alias': 'a1', 'Startup Cost': 0.43, 'Total Cost': 7.04, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 0, 'Actual Loops': 1894, 'Index Cond': '((site_id = tq1.site_id) AND (question_id = tq1.question_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 7.06, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 860, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((view_count >= 10) AND (view_count <= 1000))', 'Rows Removed by Filter': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 7.07, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.003, 'Actual Rows': 1, 'Actual Loops': 29, 'Index Cond': '((id = q1.owner_user_id) AND (site_id = q1.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((reputation >= 10) AND (reputation <= 100000))', 'Rows Removed by Filter': 0}]}]}]}


sql file: q11-003.sql

sql: SELECT COUNT(*)
FROM
tag as t,
site as s,
question as q,
tag_question as tq
WHERE
t.site_id = s.site_id
AND q.site_id = s.site_id
AND tq.site_id = s.site_id
AND tq.question_id = q.id
AND tq.tag_id = t.id
AND (s.site_name in ('scifi'))
AND (t.name in ('harry-potter','short-stories','star-trek','star-wars'))
AND (q.view_count >= 10)
AND (q.view_count <= 1000)

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 4017.25, 'Total Cost': 4017.26, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 16.749, 'Actual Total Time': 19.619, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Gather', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 1001.15, 'Total Cost': 4017.24, 'Plan Rows': 1, 'Plan Width': 0, 'Actual Startup Time': 3.697, 'Actual Total Time': 19.484, 'Actual Rows': 6121, 'Actual Loops': 1, 'Workers Planned': 1, 'Workers Launched': 1, 'Single Copy': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.16, 'Total Cost': 3017.14, 'Plan Rows': 1, 'Plan Width': 0, 'Actual Startup Time': 2.64, 'Actual Total Time': 15.369, 'Actual Rows': 3060, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(t.site_id = q.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.72, 'Total Cost': 2927.9, 'Plan Rows': 14, 'Plan Width': 16, 'Actual Startup Time': 2.559, 'Actual Total Time': 6.563, 'Actual Rows': 6622, 'Actual Loops': 2, 'Inner Unique': False, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.15, 'Total Cost': 2865.91, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 2.541, 'Actual Total Time': 5.121, 'Actual Rows': 2, 'Actual Loops': 2, 'Inner Unique': True, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 't', 'Startup Cost': 0.0, 'Total Cost': 2847.97, 'Plan Rows': 6, 'Plan Width': 8, 'Actual Startup Time': 0.747, 'Actual Total Time': 5.106, 'Actual Rows': 7, 'Actual Loops': 2, 'Filter': "((name)::text = ANY ('{harry-potter,short-stories,star-trek,star-wars}'::text[]))", 'Rows Removed by Filter': 93378, 'Workers': []}, {'Node Type': 'Memoize', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 0.15, 'Total Cost': 2.97, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 0, 'Actual Loops': 14, 'Cache Key': 't.site_id', 'Cache Mode': 'logical', 'Cache Hits': 4, 'Cache Misses': 5, 'Cache Evictions': 0, 'Cache Overflows': 0, 'Peak Memory Usage': 1, 'Workers': [{'Worker Number': 0, 'Cache Hits': 2, 'Cache Misses': 3, 'Cache Evictions': 0, 'Cache Overflows': 0, 'Peak Memory Usage': 1}], 'Plans': [{'Node Type': 'Index Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'site_pkey', 'Relation Name': 'site', 'Alias': 's', 'Startup Cost': 0.14, 'Total Cost': 2.96, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 0, 'Actual Loops': 8, 'Index Cond': '(site_id = t.site_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((site_name)::text = 'scifi'::text)", 'Rows Removed by Filter': 1, 'Workers': []}]}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq', 'Startup Cost': 0.56, 'Total Cost': 61.69, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.01, 'Actual Total Time': 0.585, 'Actual Rows': 3311, 'Actual Loops': 4, 'Index Cond': '((site_id = t.site_id) AND (tag_id = t.id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 13245, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q', 'Startup Cost': 0.43, 'Total Cost': 6.36, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 0, 'Actual Loops': 13245, 'Index Cond': '((id = tq.question_id) AND (site_id = tq.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((view_count >= 10) AND (view_count <= 1000))', 'Rows Removed by Filter': 1, 'Workers': []}]}]}]}


sql file: q8-004.sql

sql: select count(distinct q1.id) from
site, post_link pl, question q1, question q2, comment c1, comment c2,
tag, tag_question tq1, tag_question tq2
where
site.site_name = 'german' and
pl.site_id = site.site_id and

pl.site_id = q1.site_id and
pl.post_id_from = q1.id and
pl.site_id = q2.site_id and
pl.post_id_to = q2.id and

c1.site_id = q1.site_id and
c1.post_id = q1.id and

c2.site_id = q2.site_id and
c2.post_id = q2.id and

c1.date < c2.date and

tag.name in ('sql-server', 'c#', 'asp.net', 'objective-c') and
tag.id = tq1.tag_id and
tag.site_id = tq1.site_id and
tag.id = tq2.tag_id and
tag.site_id = tq1.site_id and

tag.site_id = pl.site_id and

tq1.site_id = q1.site_id and
tq1.question_id = q1.id and
tq2.site_id = q2.site_id and
tq2.question_id = q2.id;

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 7111.81, 'Total Cost': 7111.82, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 1.293, 'Actual Total Time': 1.293, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 7111.81, 'Total Cost': 7111.81, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 1.291, 'Actual Total Time': 1.291, 'Actual Rows': 0, 'Actual Loops': 1, 'Sort Key': ['q1.id'], 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.13, 'Total Cost': 7111.8, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 1.287, 'Actual Total Time': 1.288, 'Actual Rows': 0, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '((c1.date < c2.date) AND (pl.post_id_to = c2.post_id) AND (c2.site_id = tag.site_id))', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.56, 'Total Cost': 7103.62, 'Plan Rows': 1, 'Plan Width': 56, 'Actual Startup Time': 1.287, 'Actual Total Time': 1.287, 'Actual Rows': 0, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '((tag.id = tq2.tag_id) AND (tag.site_id = tq2.site_id))', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.0, 'Total Cost': 7095.46, 'Plan Rows': 1, 'Plan Width': 56, 'Actual Startup Time': 1.287, 'Actual Total Time': 1.287, 'Actual Rows': 0, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(q2.site_id = tag.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.56, 'Total Cost': 7091.21, 'Plan Rows': 1, 'Plan Width': 48, 'Actual Startup Time': 1.287, 'Actual Total Time': 1.287, 'Actual Rows': 0, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(pl.site_id = tag.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.13, 'Total Cost': 7083.19, 'Plan Rows': 1, 'Plan Width': 48, 'Actual Startup Time': 1.287, 'Actual Total Time': 1.287, 'Actual Rows': 0, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(c1.site_id = tag.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.56, 'Total Cost': 7075.02, 'Plan Rows': 1, 'Plan Width': 32, 'Actual Startup Time': 1.287, 'Actual Total Time': 1.287, 'Actual Rows': 0, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(q1.site_id = tag.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.13, 'Total Cost': 6977.34, 'Plan Rows': 23, 'Plan Width': 24, 'Actual Startup Time': 1.286, 'Actual Total Time': 1.287, 'Actual Rows': 0, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.56, 'Total Cost': 6915.34, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 1.286, 'Actual Total Time': 1.287, 'Actual Rows': 0, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Index Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'site_pkey', 'Relation Name': 'site', 'Alias': 'site', 'Startup Cost': 0.14, 'Total Cost': 15.17, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.017, 'Actual Total Time': 0.022, 'Actual Rows': 1, 'Actual Loops': 1, 'Filter': "((site_name)::text = 'german'::text)", 'Rows Removed by Filter': 172}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_pkey', 'Relation Name': 'tag', 'Alias': 'tag', 'Startup Cost': 0.42, 'Total Cost': 6900.16, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 1.264, 'Actual Total Time': 1.264, 'Actual Rows': 0, 'Actual Loops': 1, 'Index Cond': '(site_id = site.site_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((name)::text = ANY ('{sql-server,c#,asp.net,objective-c}'::text[]))", 'Rows Removed by Filter': 258}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.69, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.0, 'Actual Total Time': 0.0, 'Actual Rows': 0, 'Actual Loops': 0, 'Index Cond': '((site_id = tag.site_id) AND (tag_id = tag.id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 0}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 4.23, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.0, 'Actual Total Time': 0.0, 'Actual Rows': 0, 'Actual Loops': 0, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'comment_site_id_post_id_idx', 'Relation Name': 'comment', 'Alias': 'c1', 'Startup Cost': 0.57, 'Total Cost': 8.15, 'Plan Rows': 1, 'Plan Width': 16, 'Actual Startup Time': 0.0, 'Actual Total Time': 0.0, 'Actual Rows': 0, 'Actual Loops': 0, 'Index Cond': '((site_id = q1.site_id) AND (post_id = q1.id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'post_link_pkey', 'Relation Name': 'post_link', 'Alias': 'pl', 'Startup Cost': 0.43, 'Total Cost': 8.01, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.0, 'Actual Total Time': 0.0, 'Actual Rows': 0, 'Actual Loops': 0, 'Index Cond': '((site_id = q1.site_id) AND (post_id_from = q1.id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 0}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q2', 'Startup Cost': 0.43, 'Total Cost': 4.23, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.0, 'Actual Total Time': 0.0, 'Actual Rows': 0, 'Actual Loops': 0, 'Index Cond': '((id = pl.post_id_to) AND (site_id = pl.site_id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 0}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_pkey', 'Relation Name': 'tag_question', 'Alias': 'tq2', 'Startup Cost': 0.56, 'Total Cost': 8.15, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.0, 'Actual Total Time': 0.0, 'Actual Rows': 0, 'Actual Loops': 0, 'Index Cond': '((site_id = pl.site_id) AND (question_id = pl.post_id_to))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'comment_site_id_post_id_idx', 'Relation Name': 'comment', 'Alias': 'c2', 'Startup Cost': 0.57, 'Total Cost': 8.15, 'Plan Rows': 1, 'Plan Width': 16, 'Actual Startup Time': 0.0, 'Actual Total Time': 0.0, 'Actual Rows': 0, 'Actual Loops': 0, 'Index Cond': '((site_id = tq2.site_id) AND (post_id = tq2.question_id))', 'Rows Removed by Index Recheck': 0}]}]}]}


sql file: q9-003.sql

sql: select count(distinct account.id) from
account, site, so_user, question q, post_link pl, tag, tag_question tq where
not exists (select * from answer a where a.site_id = q.site_id and a.question_id = q.id) and
site.site_name = 'stackoverflow' and
site.site_id = q.site_id and
pl.site_id = q.site_id and
pl.post_id_to = q.id and

tag.name = 'debugging' and
tag.site_id = q.site_id and

q.creation_date > '2018-01-01'::date and

tq.site_id = tag.site_id and
tq.tag_id = tag.id and
tq.question_id = q.id and

q.owner_user_id = so_user.id and
q.site_id = so_user.site_id and
so_user.reputation > 118 and

account.id = so_user.account_id and
account.website_url != '';

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3318513.48, 'Total Cost': 3318513.49, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 1532.56, 'Actual Total Time': 1547.408, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3318513.48, 'Total Cost': 3318513.48, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 1532.551, 'Actual Total Time': 1547.398, 'Actual Rows': 9, 'Actual Loops': 1, 'Sort Key': ['account.id'], 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Gather', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 2507589.65, 'Total Cost': 3318513.47, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 1532.421, 'Actual Total Time': 1547.391, 'Actual Rows': 9, 'Actual Loops': 1, 'Workers Planned': 7, 'Workers Launched': 7, 'Single Copy': False, 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Join Type': 'Right Anti', 'Startup Cost': 2506589.65, 'Total Cost': 3317513.37, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 1530.218, 'Actual Total Time': 1530.231, 'Actual Rows': 1, 'Actual Loops': 8, 'Inner Unique': False, 'Hash Cond': '((a.site_id = q.site_id) AND (a.question_id = q.id))', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'answer', 'Alias': 'a', 'Startup Cost': 0.0, 'Total Cost': 804116.4, 'Plan Rows': 907640, 'Plan Width': 8, 'Actual Startup Time': 0.012, 'Actual Total Time': 156.962, 'Actual Rows': 793444, 'Actual Loops': 8, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': True, 'Async Capable': False, 'Startup Cost': 2506589.64, 'Total Cost': 2506589.64, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 1341.613, 'Actual Total Time': 1341.624, 'Actual Rows': 3, 'Actual Loops': 8, 'Hash Buckets': 1024, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 264, 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2479359.1, 'Total Cost': 2506589.64, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 1337.388, 'Actual Total Time': 1341.607, 'Actual Rows': 3, 'Actual Loops': 8, 'Inner Unique': False, 'Hash Cond': '((pl.site_id = site.site_id) AND (pl.post_id_to = q.id))', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'post_link', 'Alias': 'pl', 'Startup Cost': 0.0, 'Total Cost': 21752.3, 'Plan Rows': 730430, 'Plan Width': 8, 'Actual Startup Time': 0.013, 'Actual Total Time': 11.354, 'Actual Rows': 283042, 'Actual Loops': 8, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': True, 'Async Capable': False, 'Startup Cost': 2479359.09, 'Total Cost': 2479359.09, 'Plan Rows': 1, 'Plan Width': 32, 'Actual Startup Time': 1319.184, 'Actual Total Time': 1319.194, 'Actual Rows': 35, 'Actual Loops': 8, 'Hash Buckets': 1024, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 264, 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2329781.09, 'Total Cost': 2479359.09, 'Plan Rows': 1, 'Plan Width': 32, 'Actual Startup Time': 1256.728, 'Actual Total Time': 1319.17, 'Actual Rows': 35, 'Actual Loops': 8, 'Inner Unique': False, 'Hash Cond': '(account.id = so_user.account_id)', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'account', 'Alias': 'account', 'Startup Cost': 0.0, 'Total Cost': 149034.54, 'Plan Rows': 144919, 'Plan Width': 4, 'Actual Startup Time': 0.022, 'Actual Total Time': 68.653, 'Actual Rows': 90584, 'Actual Loops': 8, 'Filter': "((website_url)::text <> ''::text)", 'Rows Removed by Filter': 1643435, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': True, 'Async Capable': False, 'Startup Cost': 2329781.08, 'Total Cost': 2329781.08, 'Plan Rows': 1, 'Plan Width': 32, 'Actual Startup Time': 1246.191, 'Actual Total Time': 1246.199, 'Actual Rows': 146, 'Actual Loops': 8, 'Hash Buckets': 1024, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 264, 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2077768.78, 'Total Cost': 2329781.08, 'Plan Rows': 1, 'Plan Width': 32, 'Actual Startup Time': 1147.67, 'Actual Total Time': 1246.143, 'Actual Rows': 146, 'Actual Loops': 8, 'Inner Unique': False, 'Hash Cond': '((so_user.site_id = site.site_id) AND (so_user.id = q.owner_user_id))', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'so_user', 'Alias': 'so_user', 'Startup Cost': 0.0, 'Total Cost': 249942.21, 'Plan Rows': 276010, 'Plan Width': 12, 'Actual Startup Time': 0.006, 'Actual Total Time': 88.681, 'Actual Rows': 170455, 'Actual Loops': 8, 'Filter': '(reputation > 118)', 'Rows Removed by Filter': 2466707, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': True, 'Async Capable': False, 'Startup Cost': 2077768.77, 'Total Cost': 2077768.77, 'Plan Rows': 1, 'Plan Width': 28, 'Actual Startup Time': 1146.655, 'Actual Total Time': 1146.662, 'Actual Rows': 323, 'Actual Loops': 8, 'Hash Buckets': 1024, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 264, 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 295801.63, 'Total Cost': 2077768.77, 'Plan Rows': 1, 'Plan Width': 28, 'Actual Startup Time': 1025.711, 'Actual Total Time': 1146.561, 'Actual Rows': 323, 'Actual Loops': 8, 'Inner Unique': False, 'Hash Cond': '((q.site_id = site.site_id) AND (q.id = tq.question_id))', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'question', 'Alias': 'q', 'Startup Cost': 0.0, 'Total Cost': 1779220.98, 'Plan Rows': 366153, 'Plan Width': 12, 'Actual Startup Time': 1.793, 'Actual Total Time': 380.667, 'Actual Rows': 327233, 'Actual Loops': 8, 'Filter': "(creation_date > '2018-01-01'::date)", 'Rows Removed by Filter': 1256072, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': True, 'Async Capable': False, 'Startup Cost': 295801.55, 'Total Cost': 295801.55, 'Plan Rows': 5, 'Plan Width': 16, 'Actual Startup Time': 749.263, 'Actual Total Time': 749.267, 'Actual Rows': 2529, 'Actual Loops': 8, 'Hash Buckets': 32768, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 1656, 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2576.51, 'Total Cost': 295801.55, 'Plan Rows': 5, 'Plan Width': 16, 'Actual Startup Time': 1.269, 'Actual Total Time': 547.818, 'Actual Rows': 2529, 'Actual Loops': 8, 'Inner Unique': True, 'Hash Cond': '((site.site_id = tag.site_id) AND (tq.tag_id = tag.id))', 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.18, 'Total Cost': 293004.34, 'Plan Rows': 42642, 'Plan Width': 16, 'Actual Startup Time': 0.047, 'Actual Total Time': 438.18, 'Actual Rows': 3477604, 'Actual Loops': 8, 'Inner Unique': True, 'Hash Cond': '(tq.site_id = site.site_id)', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag_question', 'Alias': 'tq', 'Startup Cost': 0.0, 'Total Cost': 273162.12, 'Plan Rows': 7377012, 'Plan Width': 12, 'Actual Startup Time': 0.024, 'Actual Total Time': 162.239, 'Actual Rows': 4610477, 'Actual Loops': 8, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3.16, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.014, 'Actual Total Time': 0.014, 'Actual Rows': 1, 'Actual Loops': 8, 'Hash Buckets': 1024, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 9, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Relation Name': 'site', 'Alias': 'site', 'Startup Cost': 0.0, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.012, 'Actual Total Time': 0.012, 'Actual Rows': 1, 'Actual Loops': 8, 'Filter': "((site_name)::text = 'stackoverflow'::text)", 'Rows Removed by Filter': 172, 'Workers': []}]}]}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': True, 'Async Capable': False, 'Startup Cost': 2573.31, 'Total Cost': 2573.31, 'Plan Rows': 2, 'Plan Width': 8, 'Actual Startup Time': 0.954, 'Actual Total Time': 0.955, 'Actual Rows': 4, 'Actual Loops': 8, 'Hash Buckets': 1024, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 136, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 'tag', 'Startup Cost': 0.0, 'Total Cost': 2573.31, 'Plan Rows': 2, 'Plan Width': 8, 'Actual Startup Time': 0.392, 'Actual Total Time': 0.932, 'Actual Rows': 4, 'Actual Loops': 8, 'Filter': "((name)::text = 'debugging'::text)", 'Rows Removed by Filter': 23342, 'Workers': []}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}


sql file: q6-004.sql

sql: select COUNT(distinct account.display_name)
from
tag t1, site s1, question q1, tag_question tq1, so_user u1, comment c1,
account
where
-- underappreciated (high votes, low views) questions with at least one comment
s1.site_name='dba' and
t1.name in ('empty-string', 'ssis-2008', 'candidate-key', 'insert', 'performance-tuning') and
t1.site_id = s1.site_id and
q1.site_id = s1.site_id and
tq1.site_id = s1.site_id and
tq1.question_id = q1.id and
tq1.tag_id = t1.id and
q1.owner_user_id = u1.id and
q1.site_id = u1.site_id and
c1.site_id = q1.site_id and
c1.post_id = q1.id and
c1.score > q1.score and

-- to get the display name
account.id = u1.account_id;

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 7020.25, 'Total Cost': 7020.26, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 7.601, 'Actual Total Time': 7.603, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 7020.24, 'Total Cost': 7020.25, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 7.589, 'Actual Total Time': 7.593, 'Actual Rows': 153, 'Actual Loops': 1, 'Sort Key': ['account.display_name'], 'Sort Method': 'quicksort', 'Sort Space Used': 28, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.0, 'Total Cost': 7020.23, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 0.13, 'Actual Total Time': 7.547, 'Actual Rows': 153, 'Actual Loops': 1, 'Inner Unique': True, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.57, 'Total Cost': 7012.6, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.123, 'Actual Total Time': 7.195, 'Actual Rows': 153, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '((c1.score > q1.score) AND (t1.site_id = c1.site_id))', 'Rows Removed by Join Filter': 1548, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.0, 'Total Cost': 7004.8, 'Plan Rows': 1, 'Plan Width': 36, 'Actual Startup Time': 0.077, 'Actual Total Time': 5.358, 'Actual Rows': 685, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(t1.site_id = u1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.56, 'Total Cost': 6997.15, 'Plan Rows': 1, 'Plan Width': 32, 'Actual Startup Time': 0.07, 'Actual Total Time': 3.657, 'Actual Rows': 685, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(t1.site_id = q1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.13, 'Total Cost': 6821.36, 'Plan Rows': 23, 'Plan Width': 16, 'Actual Startup Time': 0.062, 'Actual Total Time': 1.925, 'Actual Rows': 685, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.56, 'Total Cost': 6759.36, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.052, 'Actual Total Time': 1.496, 'Actual Rows': 5, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Index Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'site_pkey', 'Relation Name': 'site', 'Alias': 's1', 'Startup Cost': 0.14, 'Total Cost': 15.17, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.012, 'Actual Total Time': 0.018, 'Actual Rows': 1, 'Actual Loops': 1, 'Filter': "((site_name)::text = 'dba'::text)", 'Rows Removed by Filter': 172}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_pkey', 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.42, 'Total Cost': 6744.18, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.039, 'Actual Total Time': 1.476, 'Actual Rows': 5, 'Actual Loops': 1, 'Index Cond': '(site_id = s1.site_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((name)::text = ANY ('{empty-string,ssis-2008,candidate-key,insert,performance-tuning}'::text[]))", 'Rows Removed by Filter': 1114}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.69, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.005, 'Actual Total Time': 0.079, 'Actual Rows': 137, 'Actual Loops': 5, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 7.63, 'Plan Rows': 1, 'Plan Width': 16, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 685, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 7.64, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 685, 'Index Cond': '((id = q1.owner_user_id) AND (site_id = q1.site_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'comment_site_id_post_id_idx', 'Relation Name': 'comment', 'Alias': 'c1', 'Startup Cost': 0.57, 'Total Cost': 7.79, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 2, 'Actual Loops': 685, 'Index Cond': '((site_id = tq1.site_id) AND (post_id = tq1.question_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'account', 'Startup Cost': 0.43, 'Total Cost': 7.63, 'Plan Rows': 1, 'Plan Width': 15, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 153, 'Index Cond': '(id = u1.account_id)', 'Rows Removed by Index Recheck': 0}]}]}]}


sql file: q16-005.sql

sql: SELECT COUNT(*)
FROM
site as s,
so_user as u1,
tag as t1,
tag_question as tq1,
question as q1,
badge as b1,
account as acc
WHERE
s.site_id = u1.site_id
AND s.site_id = b1.site_id
AND s.site_id = t1.site_id
AND s.site_id = tq1.site_id
AND s.site_id = q1.site_id
AND t1.id = tq1.tag_id
AND q1.id = tq1.question_id
AND q1.owner_user_id = u1.id
AND acc.id = u1.account_id
AND b1.user_id = u1.id
AND (q1.favorite_count >= 0)
AND (q1.favorite_count <= 10000)
AND s.site_name = 'stackoverflow'
AND (t1.name in ('android-custom-view','export-to-excel','filenames'))
AND (acc.website_url ILIKE ('%'))

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3909.1, 'Total Cost': 3909.11, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 106.704, 'Actual Total Time': 106.736, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3716.31, 'Total Cost': 3909.09, 'Plan Rows': 1, 'Plan Width': 0, 'Actual Startup Time': 5.694, 'Actual Total Time': 105.54, 'Actual Rows': 53310, 'Actual Loops': 1, 'Inner Unique': True, 'Plans': [{'Node Type': 'Gather', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3715.87, 'Total Cost': 3902.2, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 5.685, 'Actual Total Time': 34.587, 'Actual Rows': 109477, 'Actual Loops': 1, 'Workers Planned': 1, 'Workers Launched': 1, 'Single Copy': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2715.87, 'Total Cost': 2902.1, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 4.566, 'Actual Total Time': 58.927, 'Actual Rows': 54738, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '((s.site_id = u1.site_id) AND (u1.id = q1.owner_user_id))', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2715.44, 'Total Cost': 2888.27, 'Plan Rows': 2, 'Plan Width': 28, 'Actual Startup Time': 4.557, 'Actual Total Time': 25.367, 'Actual Rows': 54738, 'Actual Loops': 2, 'Inner Unique': False, 'Join Filter': '(s.site_id = b1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2714.87, 'Total Cost': 2872.7, 'Plan Rows': 4, 'Plan Width': 20, 'Actual Startup Time': 4.541, 'Actual Total Time': 15.855, 'Actual Rows': 653, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(s.site_id = q1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2714.44, 'Total Cost': 2775.99, 'Plan Rows': 14, 'Plan Width': 16, 'Actual Startup Time': 4.53, 'Actual Total Time': 8.966, 'Actual Rows': 2484, 'Actual Loops': 2, 'Inner Unique': False, 'Join Filter': '(s.site_id = tq1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Merge Join', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2713.87, 'Total Cost': 2713.91, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 4.504, 'Actual Total Time': 4.506, 'Actual Rows': 2, 'Actual Loops': 2, 'Inner Unique': True, 'Merge Cond': '(t1.site_id = s.site_id)', 'Workers': [], 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 2710.7, 'Total Cost': 2710.71, 'Plan Rows': 5, 'Plan Width': 8, 'Actual Startup Time': 4.485, 'Actual Total Time': 4.486, 'Actual Rows': 4, 'Actual Loops': 2, 'Sort Key': ['t1.site_id'], 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory', 'Workers': [{'Worker Number': 0, 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory'}], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.0, 'Total Cost': 2710.64, 'Plan Rows': 5, 'Plan Width': 8, 'Actual Startup Time': 1.448, 'Actual Total Time': 4.476, 'Actual Rows': 5, 'Actual Loops': 2, 'Filter': "((name)::text = ANY ('{android-custom-view,export-to-excel,filenames}'::text[]))", 'Rows Removed by Filter': 93380, 'Workers': []}]}, {'Node Type': 'Sort', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3.17, 'Total Cost': 3.18, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.016, 'Actual Total Time': 0.017, 'Actual Rows': 1, 'Actual Loops': 2, 'Sort Key': ['s.site_id'], 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory', 'Workers': [{'Worker Number': 0, 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory'}], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Relation Name': 'site', 'Alias': 's', 'Startup Cost': 0.0, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.013, 'Actual Total Time': 0.013, 'Actual Rows': 1, 'Actual Loops': 2, 'Filter': "((site_name)::text = 'stackoverflow'::text)", 'Rows Removed by Filter': 172, 'Workers': []}]}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.69, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.019, 'Actual Total Time': 2.884, 'Actual Rows': 1656, 'Actual Loops': 3, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 4967, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 6.9, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.003, 'Actual Rows': 0, 'Actual Loops': 4967, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((favorite_count >= 0) AND (favorite_count <= 10000))', 'Rows Removed by Filter': 1, 'Workers': []}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'badge_pkey', 'Relation Name': 'badge', 'Alias': 'b1', 'Startup Cost': 0.56, 'Total Cost': 3.88, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.004, 'Actual Total Time': 0.01, 'Actual Rows': 84, 'Actual Loops': 1306, 'Index Cond': '((site_id = q1.site_id) AND (user_id = q1.owner_user_id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 6.9, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.0, 'Actual Total Time': 0.0, 'Actual Rows': 1, 'Actual Loops': 109477, 'Index Cond': '((id = b1.user_id) AND (site_id = b1.site_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'acc', 'Startup Cost': 0.43, 'Total Cost': 6.89, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 0, 'Actual Loops': 109477, 'Index Cond': '(id = u1.account_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((website_url)::text ~~* '%'::text)", 'Rows Removed by Filter': 1}]}]}


sql file: q1-003.sql

sql: select count(*) from tag, site, question, tag_question
where
site.site_name='diy' and
tag.name='rivets' and
tag.site_id = site.site_id and
question.site_id = site.site_id and
tag_question.site_id = site.site_id and
tag_question.question_id = question.id and
tag_question.tag_id = tag.id

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 6447.28, 'Total Cost': 6447.29, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 1.393, 'Actual Total Time': 1.393, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.56, 'Total Cost': 6447.28, 'Plan Rows': 1, 'Plan Width': 0, 'Actual Startup Time': 0.442, 'Actual Total Time': 1.391, 'Actual Rows': 1, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(tag.site_id = question.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.13, 'Total Cost': 6368.74, 'Plan Rows': 23, 'Plan Width': 16, 'Actual Startup Time': 0.436, 'Actual Total Time': 1.385, 'Actual Rows': 1, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.56, 'Total Cost': 6306.75, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.426, 'Actual Total Time': 1.373, 'Actual Rows': 1, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Index Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'site_pkey', 'Relation Name': 'site', 'Alias': 'site', 'Startup Cost': 0.14, 'Total Cost': 15.17, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.012, 'Actual Total Time': 0.016, 'Actual Rows': 1, 'Actual Loops': 1, 'Filter': "((site_name)::text = 'diy'::text)", 'Rows Removed by Filter': 172}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_pkey', 'Relation Name': 'tag', 'Alias': 'tag', 'Startup Cost': 0.42, 'Total Cost': 6291.56, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.413, 'Actual Total Time': 1.355, 'Actual Rows': 1, 'Actual Loops': 1, 'Index Cond': '(site_id = site.site_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((name)::text = 'rivets'::text)", 'Rows Removed by Filter': 802}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tag_question', 'Startup Cost': 0.56, 'Total Cost': 61.69, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.01, 'Actual Total Time': 0.011, 'Actual Rows': 1, 'Actual Loops': 1, 'Index Cond': '((site_id = tag.site_id) AND (tag_id = tag.id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 1}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'question', 'Startup Cost': 0.43, 'Total Cost': 3.4, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.005, 'Actual Total Time': 0.005, 'Actual Rows': 1, 'Actual Loops': 1, 'Index Cond': '((id = tag_question.question_id) AND (site_id = tag_question.site_id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 0}]}]}


sql file: q4-005.sql

sql: select COUNT(distinct account.display_name)
from
tag t1, site s1, question q1, answer a1, tag_question tq1, so_user u1,
account
where
-- answerers posted at least 1 yr after the question was asked
s1.site_name='math' and
t1.name = 'convergence' and
t1.site_id = s1.site_id and
q1.site_id = s1.site_id and
tq1.site_id = s1.site_id and
tq1.question_id = q1.id and
tq1.tag_id = t1.id and
a1.site_id = q1.site_id and
a1.question_id = q1.id and
a1.owner_user_id = u1.id and
a1.site_id = u1.site_id and
a1.creation_date >= q1.creation_date + '1 year'::interval and

-- to get the display name
account.id = u1.account_id;

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 6797.88, 'Total Cost': 6797.89, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 23.563, 'Actual Total Time': 23.565, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 6797.87, 'Total Cost': 6797.88, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 23.551, 'Actual Total Time': 23.555, 'Actual Rows': 90, 'Actual Loops': 1, 'Sort Key': ['account.display_name'], 'Sort Method': 'quicksort', 'Sort Space Used': 27, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.87, 'Total Cost': 6797.86, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 0.285, 'Actual Total Time': 23.521, 'Actual Rows': 90, 'Actual Loops': 1, 'Inner Unique': True, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.44, 'Total Cost': 6790.76, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.279, 'Actual Total Time': 23.216, 'Actual Rows': 90, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(t1.site_id = u1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.0, 'Total Cost': 6783.63, 'Plan Rows': 1, 'Plan Width': 24, 'Actual Startup Time': 0.271, 'Actual Total Time': 22.908, 'Actual Rows': 90, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': "((t1.site_id = q1.site_id) AND (a1.creation_date >= (q1.creation_date + '1 year'::interval)))", 'Rows Removed by Join Filter': 4307, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.56, 'Total Cost': 6776.51, 'Plan Rows': 1, 'Plan Width': 36, 'Actual Startup Time': 0.251, 'Actual Total Time': 15.528, 'Actual Rows': 4397, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(t1.site_id = a1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.13, 'Total Cost': 6613.11, 'Plan Rows': 23, 'Plan Width': 16, 'Actual Startup Time': 0.244, 'Actual Total Time': 5.712, 'Actual Rows': 8584, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.56, 'Total Cost': 6551.11, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.232, 'Actual Total Time': 1.32, 'Actual Rows': 1, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Index Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'site_pkey', 'Relation Name': 'site', 'Alias': 's1', 'Startup Cost': 0.14, 'Total Cost': 15.17, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.017, 'Actual Total Time': 0.021, 'Actual Rows': 1, 'Actual Loops': 1, 'Filter': "((site_name)::text = 'math'::text)", 'Rows Removed by Filter': 172}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_pkey', 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.42, 'Total Cost': 6535.93, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.214, 'Actual Total Time': 1.297, 'Actual Rows': 1, 'Actual Loops': 1, 'Index Cond': '(site_id = s1.site_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((name)::text = 'convergence'::text)", 'Rows Removed by Filter': 1801}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.69, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.011, 'Actual Total Time': 3.731, 'Actual Rows': 8584, 'Actual Loops': 1, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'answer_site_id_question_id_idx', 'Relation Name': 'answer', 'Alias': 'a1', 'Startup Cost': 0.43, 'Total Cost': 7.09, 'Plan Rows': 1, 'Plan Width': 20, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 8584, 'Index Cond': '((site_id = tq1.site_id) AND (question_id = tq1.question_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 7.1, 'Plan Rows': 1, 'Plan Width': 16, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 4397, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 7.12, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.003, 'Actual Rows': 1, 'Actual Loops': 90, 'Index Cond': '((id = a1.owner_user_id) AND (site_id = a1.site_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'account', 'Startup Cost': 0.43, 'Total Cost': 7.1, 'Plan Rows': 1, 'Plan Width': 15, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.003, 'Actual Rows': 1, 'Actual Loops': 90, 'Index Cond': '(id = u1.account_id)', 'Rows Removed by Index Recheck': 0}]}]}]}


sql file: q16-001.sql

sql: SELECT COUNT(*)
FROM
site as s,
so_user as u1,
tag as t1,
tag_question as tq1,
question as q1,
badge as b1,
account as acc
WHERE
s.site_id = u1.site_id
AND s.site_id = b1.site_id
AND s.site_id = t1.site_id
AND s.site_id = tq1.site_id
AND s.site_id = q1.site_id
AND t1.id = tq1.tag_id
AND q1.id = tq1.question_id
AND q1.owner_user_id = u1.id
AND acc.id = u1.account_id
AND b1.user_id = u1.id
AND (q1.score >= 10)
AND (q1.score <= 1000)
AND s.site_name = 'stackoverflow'
AND (t1.name in ('binary-tree','commit','google-cloud-platform','hudson','jetty'))
AND (acc.website_url ILIKE ('%com'))

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 4186.42, 'Total Cost': 4186.43, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 134.721, 'Actual Total Time': 134.763, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1002.59, 'Total Cost': 4186.41, 'Plan Rows': 1, 'Plan Width': 0, 'Actual Startup Time': 6.504, 'Actual Total Time': 133.997, 'Actual Rows': 35081, 'Actual Loops': 1, 'Inner Unique': True, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1002.16, 'Total Cost': 4179.52, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 4.669, 'Actual Total Time': 65.711, 'Actual Rows': 102776, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '((s.site_id = b1.site_id) AND (b1.user_id = q1.owner_user_id))', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1001.59, 'Total Cost': 4172.35, 'Plan Rows': 1, 'Plan Width': 32, 'Actual Startup Time': 4.663, 'Actual Total Time': 13.783, 'Actual Rows': 680, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(s.site_id = u1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Gather', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 1001.15, 'Total Cost': 4165.4, 'Plan Rows': 1, 'Plan Width': 20, 'Actual Startup Time': 4.658, 'Actual Total Time': 12.059, 'Actual Rows': 680, 'Actual Loops': 1, 'Workers Planned': 1, 'Workers Launched': 1, 'Single Copy': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.16, 'Total Cost': 3165.3, 'Plan Rows': 1, 'Plan Width': 20, 'Actual Startup Time': 3.567, 'Actual Total Time': 34.621, 'Actual Rows': 340, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(s.site_id = q1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.72, 'Total Cost': 3068.58, 'Plan Rows': 14, 'Plan Width': 16, 'Actual Startup Time': 3.541, 'Actual Total Time': 17.789, 'Actual Rows': 8108, 'Actual Loops': 2, 'Inner Unique': False, 'Join Filter': '(s.site_id = tq1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.15, 'Total Cost': 3006.51, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 3.525, 'Actual Total Time': 5.666, 'Actual Rows': 2, 'Actual Loops': 2, 'Inner Unique': True, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.0, 'Total Cost': 2985.3, 'Plan Rows': 8, 'Plan Width': 8, 'Actual Startup Time': 0.633, 'Actual Total Time': 5.637, 'Actual Rows': 14, 'Actual Loops': 2, 'Filter': "((name)::text = ANY ('{binary-tree,commit,google-cloud-platform,hudson,jetty}'::text[]))", 'Rows Removed by Filter': 93370, 'Workers': []}, {'Node Type': 'Memoize', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 0.15, 'Total Cost': 2.64, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 0, 'Actual Loops': 29, 'Cache Key': 't1.site_id', 'Cache Mode': 'logical', 'Cache Hits': 4, 'Cache Misses': 11, 'Cache Evictions': 0, 'Cache Overflows': 0, 'Peak Memory Usage': 1, 'Workers': [{'Worker Number': 0, 'Cache Hits': 7, 'Cache Misses': 7, 'Cache Evictions': 0, 'Cache Overflows': 0, 'Peak Memory Usage': 1}], 'Plans': [{'Node Type': 'Index Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'site_pkey', 'Relation Name': 'site', 'Alias': 's', 'Startup Cost': 0.14, 'Total Cost': 2.63, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 0, 'Actual Loops': 18, 'Index Cond': '(site_id = t1.site_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((site_name)::text = 'stackoverflow'::text)", 'Rows Removed by Filter': 1, 'Workers': []}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.69, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.011, 'Actual Total Time': 4.656, 'Actual Rows': 3243, 'Actual Loops': 5, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 6.9, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 0, 'Actual Loops': 16217, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((score >= 10) AND (score <= 1000))', 'Rows Removed by Filter': 1, 'Workers': []}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 6.94, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 680, 'Index Cond': '((id = q1.owner_user_id) AND (site_id = q1.site_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'badge_pkey', 'Relation Name': 'badge', 'Alias': 'b1', 'Startup Cost': 0.56, 'Total Cost': 7.16, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.004, 'Actual Total Time': 0.069, 'Actual Rows': 151, 'Actual Loops': 680, 'Index Cond': '((site_id = u1.site_id) AND (user_id = u1.id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'acc', 'Startup Cost': 0.43, 'Total Cost': 6.89, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 0, 'Actual Loops': 102776, 'Index Cond': '(id = u1.account_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((website_url)::text ~~* '%com'::text)", 'Rows Removed by Filter': 1}]}]}


sql file: q3-001.sql

sql: select COUNT(distinct account.display_name)
from
tag t1, site s1, question q1, answer a1, tag_question tq1, so_user u1,
tag t2, site s2, question q2, tag_question tq2, so_user u2,
account
where
-- answerers
s1.site_name='stackoverflow' and
t1.name  = 'authentication' and
t1.site_id = s1.site_id and
q1.site_id = s1.site_id and
tq1.site_id = s1.site_id and
tq1.question_id = q1.id and
tq1.tag_id = t1.id and
a1.site_id = q1.site_id and
a1.question_id = q1.id and
a1.owner_user_id = u1.id and
a1.site_id = u1.site_id and

-- askers
s2.site_name='physics' and
t2.name  = 'quantum-mechanics' and
t2.site_id = s2.site_id and
q2.site_id = s2.site_id and
tq2.site_id = s2.site_id and
tq2.question_id = q2.id and
tq2.tag_id = t2.id and
q2.owner_user_id = u2.id and
q2.site_id = u2.site_id and


-- intersect
u1.account_id = u2.account_id and
account.id = u1.account_id;

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 6522.37, 'Total Cost': 6522.38, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 100.876, 'Actual Total Time': 101.065, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 6522.37, 'Total Cost': 6522.37, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 100.87, 'Actual Total Time': 101.059, 'Actual Rows': 23, 'Actual Loops': 1, 'Sort Key': ['account.display_name'], 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3759.03, 'Total Cost': 6522.36, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 47.351, 'Actual Total Time': 101.045, 'Actual Rows': 23, 'Actual Loops': 1, 'Inner Unique': True, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3758.6, 'Total Cost': 6514.7, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 47.344, 'Actual Total Time': 100.985, 'Actual Rows': 23, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(t1.site_id = q1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Gather', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3758.16, 'Total Cost': 6507.03, 'Plan Rows': 1, 'Plan Width': 36, 'Actual Startup Time': 47.339, 'Actual Total Time': 100.922, 'Actual Rows': 23, 'Actual Loops': 1, 'Workers Planned': 1, 'Workers Launched': 1, 'Single Copy': False, 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2758.16, 'Total Cost': 5506.93, 'Plan Rows': 1, 'Plan Width': 36, 'Actual Startup Time': 45.458, 'Actual Total Time': 72.157, 'Actual Rows': 12, 'Actual Loops': 2, 'Inner Unique': False, 'Hash Cond': '(u1.account_id = u2.account_id)', 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.61, 'Total Cost': 2753.37, 'Plan Rows': 1, 'Plan Width': 32, 'Actual Startup Time': 3.08, 'Actual Total Time': 30.299, 'Actual Rows': 2908, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(t1.site_id = u1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.17, 'Total Cost': 2745.69, 'Plan Rows': 1, 'Plan Width': 28, 'Actual Startup Time': 3.078, 'Actual Total Time': 23.615, 'Actual Rows': 2908, 'Actual Loops': 2, 'Inner Unique': False, 'Join Filter': '(t1.site_id = a1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.74, 'Total Cost': 2638.39, 'Plan Rows': 14, 'Plan Width': 16, 'Actual Startup Time': 3.073, 'Actual Total Time': 8.972, 'Actual Rows': 8912, 'Actual Loops': 2, 'Inner Unique': False, 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.18, 'Total Cost': 2576.54, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 3.069, 'Actual Total Time': 3.072, 'Actual Rows': 0, 'Actual Loops': 2, 'Inner Unique': True, 'Hash Cond': '(t1.site_id = s1.site_id)', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.0, 'Total Cost': 2573.31, 'Plan Rows': 22, 'Plan Width': 8, 'Actual Startup Time': 0.245, 'Actual Total Time': 3.051, 'Actual Rows': 18, 'Actual Loops': 2, 'Filter': "((name)::text = 'authentication'::text)", 'Rows Removed by Filter': 93366, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3.16, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.012, 'Actual Total Time': 0.012, 'Actual Rows': 1, 'Actual Loops': 2, 'Hash Buckets': 1024, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 9, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Relation Name': 'site', 'Alias': 's1', 'Startup Cost': 0.0, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.008, 'Actual Total Time': 0.009, 'Actual Rows': 1, 'Actual Loops': 2, 'Filter': "((site_name)::text = 'stackoverflow'::text)", 'Rows Removed by Filter': 172, 'Workers': []}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.54, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.006, 'Actual Total Time': 10.91, 'Actual Rows': 17825, 'Actual Loops': 1, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'answer_site_id_question_id_idx', 'Relation Name': 'answer', 'Alias': 'a1', 'Startup Cost': 0.43, 'Total Cost': 7.65, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.002, 'Actual Rows': 0, 'Actual Loops': 17825, 'Index Cond': '((site_id = tq1.site_id) AND (question_id = tq1.question_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 7.66, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 5815, 'Index Cond': '((id = a1.owner_user_id) AND (site_id = a1.site_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': True, 'Async Capable': False, 'Startup Cost': 2753.54, 'Total Cost': 2753.54, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 41.539, 'Actual Total Time': 41.54, 'Actual Rows': 5862, 'Actual Loops': 2, 'Hash Buckets': 16384, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 728, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.61, 'Total Cost': 2753.54, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 3.18, 'Actual Total Time': 23.306, 'Actual Rows': 5862, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(t2.site_id = u2.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.17, 'Total Cost': 2745.86, 'Plan Rows': 1, 'Plan Width': 20, 'Actual Startup Time': 3.176, 'Actual Total Time': 15.105, 'Actual Rows': 5862, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(t2.site_id = q2.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.74, 'Total Cost': 2638.48, 'Plan Rows': 14, 'Plan Width': 16, 'Actual Startup Time': 3.173, 'Actual Total Time': 5.03, 'Actual Rows': 5862, 'Actual Loops': 2, 'Inner Unique': False, 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.18, 'Total Cost': 2576.49, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 3.166, 'Actual Total Time': 3.167, 'Actual Rows': 0, 'Actual Loops': 2, 'Inner Unique': True, 'Hash Cond': '(t2.site_id = s2.site_id)', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 't2', 'Startup Cost': 0.0, 'Total Cost': 2573.31, 'Plan Rows': 2, 'Plan Width': 8, 'Actual Startup Time': 0.455, 'Actual Total Time': 3.145, 'Actual Rows': 4, 'Actual Loops': 2, 'Filter': "((name)::text = 'quantum-mechanics'::text)", 'Rows Removed by Filter': 93382, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3.16, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.018, 'Actual Total Time': 0.018, 'Actual Rows': 1, 'Actual Loops': 2, 'Hash Buckets': 1024, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 9, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Relation Name': 'site', 'Alias': 's2', 'Startup Cost': 0.0, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.015, 'Actual Total Time': 0.016, 'Actual Rows': 1, 'Actual Loops': 2, 'Filter': "((site_name)::text = 'physics'::text)", 'Rows Removed by Filter': 172, 'Workers': []}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq2', 'Startup Cost': 0.56, 'Total Cost': 61.69, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.013, 'Actual Total Time': 3.164, 'Actual Rows': 11725, 'Actual Loops': 1, 'Index Cond': '((site_id = t2.site_id) AND (tag_id = t2.id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q2', 'Startup Cost': 0.43, 'Total Cost': 7.66, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 11725, 'Index Cond': '((id = tq2.question_id) AND (site_id = tq2.site_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u2', 'Startup Cost': 0.44, 'Total Cost': 7.66, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 11725, 'Index Cond': '((id = q2.owner_user_id) AND (site_id = q2.site_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}]}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 7.66, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 23, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'account', 'Startup Cost': 0.43, 'Total Cost': 7.65, 'Plan Rows': 1, 'Plan Width': 15, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 23, 'Index Cond': '(id = u1.account_id)', 'Rows Removed by Index Recheck': 0}]}]}]}


sql file: q8-003.sql

sql: select count(distinct q1.id) from
site, post_link pl, question q1, question q2, comment c1, comment c2,
tag, tag_question tq1, tag_question tq2
where
site.site_name = 'german' and
pl.site_id = site.site_id and

pl.site_id = q1.site_id and
pl.post_id_from = q1.id and
pl.site_id = q2.site_id and
pl.post_id_to = q2.id and

c1.site_id = q1.site_id and
c1.post_id = q1.id and

c2.site_id = q2.site_id and
c2.post_id = q2.id and

c1.date > c2.date and

tag.name in ('python-3.x', 'html') and
tag.id = tq1.tag_id and
tag.site_id = tq1.site_id and
tag.id = tq2.tag_id and
tag.site_id = tq1.site_id and

tag.site_id = pl.site_id and

tq1.site_id = q1.site_id and
tq1.question_id = q1.id and
tq2.site_id = q2.site_id and
tq2.question_id = q2.id;

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 7199.57, 'Total Cost': 7199.58, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 1.336, 'Actual Total Time': 1.337, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 7199.56, 'Total Cost': 7199.56, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 1.334, 'Actual Total Time': 1.335, 'Actual Rows': 0, 'Actual Loops': 1, 'Sort Key': ['q1.id'], 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.13, 'Total Cost': 7199.55, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 1.331, 'Actual Total Time': 1.331, 'Actual Rows': 0, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '((pl.post_id_to = q2.id) AND (q2.site_id = tag.site_id))', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.69, 'Total Cost': 7191.52, 'Plan Rows': 1, 'Plan Width': 48, 'Actual Startup Time': 1.331, 'Actual Total Time': 1.331, 'Actual Rows': 0, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '((c1.date > c2.date) AND (pl.post_id_to = c2.post_id) AND (c2.site_id = tag.site_id))', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.13, 'Total Cost': 7183.35, 'Plan Rows': 1, 'Plan Width': 48, 'Actual Startup Time': 1.33, 'Actual Total Time': 1.331, 'Actual Rows': 0, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '((tag.id = tq2.tag_id) AND (tag.site_id = tq2.site_id))', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.56, 'Total Cost': 7175.18, 'Plan Rows': 1, 'Plan Width': 48, 'Actual Startup Time': 1.33, 'Actual Total Time': 1.331, 'Actual Rows': 0, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '((pl.post_id_from = q1.id) AND (q1.site_id = tag.site_id))', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.13, 'Total Cost': 7167.15, 'Plan Rows': 1, 'Plan Width': 52, 'Actual Startup Time': 1.33, 'Actual Total Time': 1.331, 'Actual Rows': 0, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '((pl.post_id_from = c1.post_id) AND (c1.site_id = tag.site_id))', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.56, 'Total Cost': 7158.98, 'Plan Rows': 1, 'Plan Width': 36, 'Actual Startup Time': 1.33, 'Actual Total Time': 1.331, 'Actual Rows': 0, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(pl.site_id = tag.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.13, 'Total Cost': 6974.51, 'Plan Rows': 23, 'Plan Width': 24, 'Actual Startup Time': 1.33, 'Actual Total Time': 1.331, 'Actual Rows': 0, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.56, 'Total Cost': 6912.64, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 1.33, 'Actual Total Time': 1.33, 'Actual Rows': 0, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Index Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'site_pkey', 'Relation Name': 'site', 'Alias': 'site', 'Startup Cost': 0.14, 'Total Cost': 15.17, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.017, 'Actual Total Time': 0.021, 'Actual Rows': 1, 'Actual Loops': 1, 'Filter': "((site_name)::text = 'german'::text)", 'Rows Removed by Filter': 172}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_pkey', 'Relation Name': 'tag', 'Alias': 'tag', 'Startup Cost': 0.42, 'Total Cost': 6897.46, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 1.308, 'Actual Total Time': 1.308, 'Actual Rows': 0, 'Actual Loops': 1, 'Index Cond': '(site_id = site.site_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((name)::text = ANY ('{python-3.x,html}'::text[]))", 'Rows Removed by Filter': 258}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.55, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.0, 'Actual Total Time': 0.0, 'Actual Rows': 0, 'Actual Loops': 0, 'Index Cond': '((site_id = tag.site_id) AND (tag_id = tag.id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'post_link_pkey', 'Relation Name': 'post_link', 'Alias': 'pl', 'Startup Cost': 0.43, 'Total Cost': 8.01, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.0, 'Actual Total Time': 0.0, 'Actual Rows': 0, 'Actual Loops': 0, 'Index Cond': '((site_id = tq1.site_id) AND (post_id_from = tq1.question_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'comment_site_id_post_id_idx', 'Relation Name': 'comment', 'Alias': 'c1', 'Startup Cost': 0.57, 'Total Cost': 8.15, 'Plan Rows': 1, 'Plan Width': 16, 'Actual Startup Time': 0.0, 'Actual Total Time': 0.0, 'Actual Rows': 0, 'Actual Loops': 0, 'Index Cond': '((site_id = tq1.site_id) AND (post_id = tq1.question_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 8.01, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.0, 'Actual Total Time': 0.0, 'Actual Rows': 0, 'Actual Loops': 0, 'Index Cond': '((id = c1.post_id) AND (site_id = c1.site_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_pkey', 'Relation Name': 'tag_question', 'Alias': 'tq2', 'Startup Cost': 0.56, 'Total Cost': 8.15, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.0, 'Actual Total Time': 0.0, 'Actual Rows': 0, 'Actual Loops': 0, 'Index Cond': '((site_id = pl.site_id) AND (question_id = pl.post_id_to))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'comment_site_id_post_id_idx', 'Relation Name': 'comment', 'Alias': 'c2', 'Startup Cost': 0.57, 'Total Cost': 8.15, 'Plan Rows': 1, 'Plan Width': 16, 'Actual Startup Time': 0.0, 'Actual Total Time': 0.0, 'Actual Rows': 0, 'Actual Loops': 0, 'Index Cond': '((site_id = tq2.site_id) AND (post_id = tq2.question_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q2', 'Startup Cost': 0.43, 'Total Cost': 8.01, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.0, 'Actual Total Time': 0.0, 'Actual Rows': 0, 'Actual Loops': 0, 'Index Cond': '((id = c2.post_id) AND (site_id = c2.site_id))', 'Rows Removed by Index Recheck': 0}]}]}]}


sql file: q13-005.sql

sql: SELECT acc.location, count(*)
FROM
site as s,
so_user as u1,
question as q1,
answer as a1,
tag as t1,
tag_question as tq1,
badge as b,
account as acc
WHERE
s.site_id = q1.site_id
AND s.site_id = u1.site_id
AND s.site_id = a1.site_id
AND s.site_id = t1.site_id
AND s.site_id = tq1.site_id
AND s.site_id = b.site_id
AND q1.id = tq1.question_id
AND q1.id = a1.question_id
AND a1.owner_user_id = u1.id
AND t1.id = tq1.tag_id
AND b.user_id = u1.id
AND acc.id = u1.account_id
AND (s.site_name in ('stackoverflow','superuser'))
AND (t1.name in ('apache-poi','branch','csrf','focus','glassfish','grand-central-dispatch','interpolation','osgi','pyqt4','return-value','textarea','uilabel','window'))
AND (q1.favorite_count >= 0)
AND (q1.favorite_count <= 10000)
AND (u1.downvotes >= 0)
AND (u1.downvotes <= 10)
AND (b.name in ('Commentator','Curious','Good Question','Organizer','Revival','Scholar','Self-Learner','Student','Supporter','Tumbleweed'))
GROUP BY acc.location
ORDER BY COUNT(*)
DESC
LIMIT 100

detailed info: {'Node Type': 'Limit', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 5276.64, 'Total Cost': 5276.64, 'Plan Rows': 1, 'Plan Width': 26, 'Actual Startup Time': 143.135, 'Actual Total Time': 152.984, 'Actual Rows': 100, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 5276.64, 'Total Cost': 5276.64, 'Plan Rows': 1, 'Plan Width': 26, 'Actual Startup Time': 143.133, 'Actual Total Time': 152.978, 'Actual Rows': 100, 'Actual Loops': 1, 'Sort Key': ['(count(*)) DESC'], 'Sort Method': 'top-N heapsort', 'Sort Space Used': 35, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Aggregate', 'Strategy': 'Sorted', 'Partial Mode': 'Simple', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 5276.61, 'Total Cost': 5276.63, 'Plan Rows': 1, 'Plan Width': 26, 'Actual Startup Time': 141.991, 'Actual Total Time': 152.913, 'Actual Rows': 910, 'Actual Loops': 1, 'Group Key': ['acc.location'], 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 5276.61, 'Total Cost': 5276.61, 'Plan Rows': 1, 'Plan Width': 18, 'Actual Startup Time': 141.98, 'Actual Total Time': 152.255, 'Actual Rows': 20909, 'Actual Loops': 1, 'Sort Key': ['acc.location'], 'Sort Method': 'quicksort', 'Sort Space Used': 1137, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1006.06, 'Total Cost': 5276.6, 'Plan Rows': 1, 'Plan Width': 18, 'Actual Startup Time': 8.294, 'Actual Total Time': 148.761, 'Actual Rows': 20909, 'Actual Loops': 1, 'Inner Unique': True, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1005.62, 'Total Cost': 5269.35, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 8.291, 'Actual Total Time': 130.822, 'Actual Rows': 20909, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(s.site_id = b.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1005.06, 'Total Cost': 5265.3, 'Plan Rows': 1, 'Plan Width': 36, 'Actual Startup Time': 8.282, 'Actual Total Time': 94.373, 'Actual Rows': 4010, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(s.site_id = q1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1004.62, 'Total Cost': 5258.03, 'Plan Rows': 1, 'Plan Width': 40, 'Actual Startup Time': 8.275, 'Actual Total Time': 77.231, 'Actual Rows': 7623, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(s.site_id = u1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Gather', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 1004.18, 'Total Cost': 5250.76, 'Plan Rows': 1, 'Plan Width': 28, 'Actual Startup Time': 8.27, 'Actual Total Time': 40.845, 'Actual Rows': 17003, 'Actual Loops': 1, 'Workers Planned': 1, 'Workers Launched': 1, 'Single Copy': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.18, 'Total Cost': 4250.66, 'Plan Rows': 1, 'Plan Width': 28, 'Actual Startup Time': 7.112, 'Actual Total Time': 77.205, 'Actual Rows': 8502, 'Actual Loops': 2, 'Inner Unique': False, 'Join Filter': '(s.site_id = a1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.75, 'Total Cost': 4149.15, 'Plan Rows': 14, 'Plan Width': 16, 'Actual Startup Time': 7.099, 'Actual Total Time': 32.616, 'Actual Rows': 18470, 'Actual Loops': 2, 'Inner Unique': False, 'Join Filter': '(s.site_id = tq1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.19, 'Total Cost': 4087.19, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 7.073, 'Actual Total Time': 11.705, 'Actual Rows': 8, 'Actual Loops': 2, 'Inner Unique': True, 'Hash Cond': '(t1.site_id = s.site_id)', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.0, 'Total Cost': 4083.95, 'Plan Rows': 19, 'Plan Width': 8, 'Actual Startup Time': 0.112, 'Actual Total Time': 11.658, 'Actual Rows': 46, 'Actual Loops': 2, 'Filter': "((name)::text = ANY ('{apache-poi,branch,csrf,focus,glassfish,grand-central-dispatch,interpolation,osgi,pyqt4,return-value,textarea,uilabel,window}'::text[]))", 'Rows Removed by Filter': 93338, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3.16, 'Total Cost': 3.16, 'Plan Rows': 2, 'Plan Width': 4, 'Actual Startup Time': 0.012, 'Actual Total Time': 0.013, 'Actual Rows': 2, 'Actual Loops': 2, 'Hash Buckets': 1024, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 9, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Relation Name': 'site', 'Alias': 's', 'Startup Cost': 0.0, 'Total Cost': 3.16, 'Plan Rows': 2, 'Plan Width': 4, 'Actual Startup Time': 0.01, 'Actual Total Time': 0.011, 'Actual Rows': 2, 'Actual Loops': 2, 'Filter': "((site_name)::text = ANY ('{stackoverflow,superuser}'::text[]))", 'Rows Removed by Filter': 171, 'Workers': []}]}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.58, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.009, 'Actual Total Time': 2.352, 'Actual Rows': 2173, 'Actual Loops': 17, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 36941, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'answer_site_id_question_id_idx', 'Relation Name': 'answer', 'Alias': 'a1', 'Startup Cost': 0.43, 'Total Cost': 7.24, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 0, 'Actual Loops': 36941, 'Index Cond': '((site_id = tq1.site_id) AND (question_id = tq1.question_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 7.26, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 0, 'Actual Loops': 17003, 'Index Cond': '((id = a1.owner_user_id) AND (site_id = a1.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((downvotes >= 0) AND (downvotes <= 10))', 'Rows Removed by Filter': 1}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 7.25, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 7623, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((favorite_count >= 0) AND (favorite_count <= 10000))', 'Rows Removed by Filter': 0}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'badge_pkey', 'Relation Name': 'badge', 'Alias': 'b', 'Startup Cost': 0.56, 'Total Cost': 4.04, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.004, 'Actual Total Time': 0.009, 'Actual Rows': 5, 'Actual Loops': 4010, 'Index Cond': '((site_id = a1.site_id) AND (user_id = a1.owner_user_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((name)::text = ANY (\'{Commentator,Curious,"Good Question",Organizer,Revival,Scholar,Self-Learner,Student,Supporter,Tumbleweed}\'::text[]))', 'Rows Removed by Filter': 38, 'Heap Fetches': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'acc', 'Startup Cost': 0.43, 'Total Cost': 7.25, 'Plan Rows': 1, 'Plan Width': 22, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 20909, 'Index Cond': '(id = u1.account_id)', 'Rows Removed by Index Recheck': 0}]}]}]}]}]}


sql file: q13-001.sql

sql: SELECT acc.location, count(*)
FROM
site as s,
so_user as u1,
question as q1,
answer as a1,
tag as t1,
tag_question as tq1,
badge as b,
account as acc
WHERE
s.site_id = q1.site_id
AND s.site_id = u1.site_id
AND s.site_id = a1.site_id
AND s.site_id = t1.site_id
AND s.site_id = tq1.site_id
AND s.site_id = b.site_id
AND q1.id = tq1.question_id
AND q1.id = a1.question_id
AND a1.owner_user_id = u1.id
AND t1.id = tq1.tag_id
AND b.user_id = u1.id
AND acc.id = u1.account_id
AND (s.site_name in ('softwareengineering','webapps'))
AND (t1.name in ('architecture','design','design-patterns','gmail','google-sheets','java','object-oriented'))
AND (q1.score >= 1)
AND (q1.score <= 10)
AND (u1.upvotes >= 1)
AND (u1.upvotes <= 100)
AND (b.name in ('Autobiographer','Caucus','Citizen Patrol','Critic','Editor','Famous Question','Informed','Nice Answer','Notable Question','Popular Question','Scholar','Student','Supporter','Teacher'))
GROUP BY acc.location
ORDER BY COUNT(*)
DESC
LIMIT 100

detailed info: {'Node Type': 'Limit', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 12813.73, 'Total Cost': 12813.74, 'Plan Rows': 1, 'Plan Width': 26, 'Actual Startup Time': 61.954, 'Actual Total Time': 61.961, 'Actual Rows': 100, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 12813.73, 'Total Cost': 12813.74, 'Plan Rows': 1, 'Plan Width': 26, 'Actual Startup Time': 61.953, 'Actual Total Time': 61.957, 'Actual Rows': 100, 'Actual Loops': 1, 'Sort Key': ['(count(*)) DESC'], 'Sort Method': 'top-N heapsort', 'Sort Space Used': 36, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Aggregate', 'Strategy': 'Sorted', 'Partial Mode': 'Simple', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 12813.7, 'Total Cost': 12813.72, 'Plan Rows': 1, 'Plan Width': 26, 'Actual Startup Time': 61.125, 'Actual Total Time': 61.918, 'Actual Rows': 414, 'Actual Loops': 1, 'Group Key': ['acc.location'], 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 12813.7, 'Total Cost': 12813.71, 'Plan Rows': 1, 'Plan Width': 18, 'Actual Startup Time': 61.119, 'Actual Total Time': 61.446, 'Actual Rows': 15690, 'Actual Loops': 1, 'Sort Key': ['acc.location'], 'Sort Method': 'quicksort', 'Sort Space Used': 641, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.44, 'Total Cost': 12813.69, 'Plan Rows': 1, 'Plan Width': 18, 'Actual Startup Time': 0.17, 'Actual Total Time': 59.586, 'Actual Rows': 15690, 'Actual Loops': 1, 'Inner Unique': True, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.0, 'Total Cost': 12806.45, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.162, 'Actual Total Time': 48.648, 'Actual Rows': 15690, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(s.site_id = b.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.44, 'Total Cost': 12802.39, 'Plan Rows': 1, 'Plan Width': 36, 'Actual Startup Time': 0.153, 'Actual Total Time': 41.273, 'Actual Rows': 1678, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(s.site_id = q1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.0, 'Total Cost': 12795.12, 'Plan Rows': 1, 'Plan Width': 40, 'Actual Startup Time': 0.148, 'Actual Total Time': 35.672, 'Actual Rows': 3002, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(s.site_id = u1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.56, 'Total Cost': 12787.85, 'Plan Rows': 1, 'Plan Width': 28, 'Actual Startup Time': 0.11, 'Actual Total Time': 21.049, 'Actual Rows': 10668, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(s.site_id = a1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.13, 'Total Cost': 12621.09, 'Plan Rows': 23, 'Plan Width': 16, 'Actual Startup Time': 0.103, 'Actual Total Time': 6.548, 'Actual Rows': 15811, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(s.site_id = tq1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.56, 'Total Cost': 12559.34, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.089, 'Actual Total Time': 2.489, 'Actual Rows': 8, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Index Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'site_pkey', 'Relation Name': 'site', 'Alias': 's', 'Startup Cost': 0.14, 'Total Cost': 15.17, 'Plan Rows': 2, 'Plan Width': 4, 'Actual Startup Time': 0.02, 'Actual Total Time': 0.023, 'Actual Rows': 2, 'Actual Loops': 1, 'Filter': "((site_name)::text = ANY ('{softwareengineering,webapps}'::text[]))", 'Rows Removed by Filter': 171}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_pkey', 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.42, 'Total Cost': 6272.07, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.038, 'Actual Total Time': 1.231, 'Actual Rows': 4, 'Actual Loops': 2, 'Index Cond': '(site_id = s.site_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((name)::text = ANY ('{architecture,design,design-patterns,gmail,google-sheets,java,object-oriented}'::text[]))", 'Rows Removed by Filter': 1272}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.37, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.006, 'Actual Total Time': 0.405, 'Actual Rows': 1976, 'Actual Loops': 8, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 15811}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'answer_site_id_question_id_idx', 'Relation Name': 'answer', 'Alias': 'a1', 'Startup Cost': 0.43, 'Total Cost': 7.24, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 15811, 'Index Cond': '((site_id = tq1.site_id) AND (question_id = tq1.question_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 7.26, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 0, 'Actual Loops': 10668, 'Index Cond': '((id = a1.owner_user_id) AND (site_id = a1.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((upvotes >= 1) AND (upvotes <= 100))', 'Rows Removed by Filter': 1}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 7.25, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 3002, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((score >= 1) AND (score <= 10))', 'Rows Removed by Filter': 0}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'badge_pkey', 'Relation Name': 'badge', 'Alias': 'b', 'Startup Cost': 0.56, 'Total Cost': 4.04, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.004, 'Actual Rows': 9, 'Actual Loops': 1678, 'Index Cond': '((site_id = a1.site_id) AND (user_id = a1.owner_user_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((name)::text = ANY (\'{Autobiographer,Caucus,"Citizen Patrol",Critic,Editor,"Famous Question",Informed,"Nice Answer","Notable Question","Popular Question",Scholar,Student,Supporter,Teacher}\'::text[]))', 'Rows Removed by Filter': 8, 'Heap Fetches': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'acc', 'Startup Cost': 0.43, 'Total Cost': 7.25, 'Plan Rows': 1, 'Plan Width': 22, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 15690, 'Index Cond': '(id = u1.account_id)', 'Rows Removed by Index Recheck': 0}]}]}]}]}]}


sql file: q7-001.sql

sql: select count(distinct account.display_name) from account, so_user, badge b1, badge b2 where
account.website_url != '' and
account.id = so_user.account_id and

b1.site_id = so_user.site_id and
b1.user_id = so_user.id and
b1.name = 'Famous Question' and

b2.site_id = so_user.site_id and
b2.user_id = so_user.id and
b2.name = 'Constable' and
b2.date > b1.date + '7 months'::interval

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 485585.18, 'Total Cost': 485585.19, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 240.047, 'Actual Total Time': 242.075, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 485585.16, 'Total Cost': 485585.17, 'Plan Rows': 5, 'Plan Width': 11, 'Actual Startup Time': 240.038, 'Actual Total Time': 242.067, 'Actual Rows': 44, 'Actual Loops': 1, 'Sort Key': ['account.display_name'], 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Gather', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 1001.44, 'Total Cost': 485585.1, 'Plan Rows': 5, 'Plan Width': 11, 'Actual Startup Time': 50.541, 'Actual Total Time': 242.052, 'Actual Rows': 44, 'Actual Loops': 1, 'Workers Planned': 6, 'Workers Launched': 6, 'Single Copy': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.44, 'Total Cost': 484584.6, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 57.767, 'Actual Total Time': 238.455, 'Actual Rows': 6, 'Actual Loops': 7, 'Inner Unique': True, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.0, 'Total Cost': 484510.73, 'Plan Rows': 16, 'Plan Width': 4, 'Actual Startup Time': 19.057, 'Actual Total Time': 238.405, 'Actual Rows': 13, 'Actual Loops': 7, 'Inner Unique': True, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.56, 'Total Cost': 482651.38, 'Plan Rows': 384, 'Plan Width': 16, 'Actual Startup Time': 19.043, 'Actual Total Time': 238.355, 'Actual Rows': 13, 'Actual Loops': 7, 'Inner Unique': False, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'badge', 'Alias': 'b2', 'Startup Cost': 0.0, 'Total Cost': 477779.26, 'Plan Rows': 1068, 'Plan Width': 16, 'Actual Startup Time': 5.249, 'Actual Total Time': 237.721, 'Actual Rows': 101, 'Actual Loops': 7, 'Filter': "((name)::text = 'Constable'::text)", 'Rows Removed by Filter': 7319457, 'Workers': []}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'badge_pkey', 'Relation Name': 'badge', 'Alias': 'b1', 'Startup Cost': 0.56, 'Total Cost': 4.55, 'Plan Rows': 1, 'Plan Width': 16, 'Actual Startup Time': 0.006, 'Actual Total Time': 0.006, 'Actual Rows': 0, 'Actual Loops': 704, 'Index Cond': "((site_id = b2.site_id) AND (user_id = b2.user_id) AND (name = 'Famous Question'::text))", 'Rows Removed by Index Recheck': 0, 'Filter': "(b2.date > (date + '7 mons'::interval))", 'Rows Removed by Filter': 3, 'Heap Fetches': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'so_user', 'Startup Cost': 0.44, 'Total Cost': 4.84, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.004, 'Actual Total Time': 0.004, 'Actual Rows': 1, 'Actual Loops': 88, 'Index Cond': '((id = b1.user_id) AND (site_id = b1.site_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'account', 'Startup Cost': 0.43, 'Total Cost': 4.62, 'Plan Rows': 1, 'Plan Width': 15, 'Actual Startup Time': 0.004, 'Actual Total Time': 0.004, 'Actual Rows': 0, 'Actual Loops': 88, 'Index Cond': '(id = so_user.account_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((website_url)::text <> ''::text)", 'Rows Removed by Filter': 0, 'Workers': []}]}]}]}]}


sql file: q1-004.sql

sql: select count(*) from tag, site, question, tag_question
where
site.site_name='softwareengineering' and
tag.name='heatmap' and
tag.site_id = site.site_id and
question.site_id = site.site_id and
tag_question.site_id = site.site_id and
tag_question.question_id = question.id and
tag_question.tag_id = tag.id

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 6515.24, 'Total Cost': 6515.25, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 1.249, 'Actual Total Time': 1.25, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.56, 'Total Cost': 6515.24, 'Plan Rows': 1, 'Plan Width': 0, 'Actual Startup Time': 0.686, 'Actual Total Time': 1.248, 'Actual Rows': 1, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(tag.site_id = question.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.13, 'Total Cost': 6368.74, 'Plan Rows': 23, 'Plan Width': 16, 'Actual Startup Time': 0.678, 'Actual Total Time': 1.239, 'Actual Rows': 1, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.56, 'Total Cost': 6306.75, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.669, 'Actual Total Time': 1.23, 'Actual Rows': 1, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Index Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'site_pkey', 'Relation Name': 'site', 'Alias': 'site', 'Startup Cost': 0.14, 'Total Cost': 15.17, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.006, 'Actual Total Time': 0.008, 'Actual Rows': 1, 'Actual Loops': 1, 'Filter': "((site_name)::text = 'softwareengineering'::text)", 'Rows Removed by Filter': 172}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_pkey', 'Relation Name': 'tag', 'Alias': 'tag', 'Startup Cost': 0.42, 'Total Cost': 6291.56, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.662, 'Actual Total Time': 1.221, 'Actual Rows': 1, 'Actual Loops': 1, 'Index Cond': '(site_id = site.site_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((name)::text = 'heatmap'::text)", 'Rows Removed by Filter': 1646}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tag_question', 'Startup Cost': 0.56, 'Total Cost': 61.69, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.008, 'Actual Total Time': 0.009, 'Actual Rows': 1, 'Actual Loops': 1, 'Index Cond': '((site_id = tag.site_id) AND (tag_id = tag.id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'question', 'Startup Cost': 0.43, 'Total Cost': 6.36, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.008, 'Actual Total Time': 0.008, 'Actual Rows': 1, 'Actual Loops': 1, 'Index Cond': '((id = tag_question.question_id) AND (site_id = tag_question.site_id))', 'Rows Removed by Index Recheck': 0}]}]}


sql file: q12-003.sql

sql: SELECT t1.name, count(*)
FROM
site as s,
so_user as u1,
question as q1,
answer as a1,
tag as t1,
tag_question as tq1
WHERE
q1.owner_user_id = u1.id
AND a1.question_id = q1.id
AND a1.owner_user_id = u1.id
AND s.site_id = q1.site_id
AND s.site_id = a1.site_id
AND s.site_id = u1.site_id
AND s.site_id = tq1.site_id
AND s.site_id = t1.site_id
AND q1.id = tq1.question_id
AND t1.id = tq1.tag_id
AND (s.site_name in ('drupal','physics'))
AND (t1.name in ('forces','nodes','views'))
AND (q1.favorite_count >= 0)
AND (q1.favorite_count <= 10000)
AND (u1.upvotes >= 10)
AND (u1.upvotes <= 1000000)
GROUP BY t1.name

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Sorted', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3901.65, 'Total Cost': 3901.67, 'Plan Rows': 1, 'Plan Width': 19, 'Actual Startup Time': 28.216, 'Actual Total Time': 28.248, 'Actual Rows': 3, 'Actual Loops': 1, 'Group Key': ['t1.name'], 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3901.65, 'Total Cost': 3901.65, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 28.212, 'Actual Total Time': 28.242, 'Actual Rows': 91, 'Actual Loops': 1, 'Sort Key': ['t1.name'], 'Sort Method': 'quicksort', 'Sort Space Used': 26, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1001.87, 'Total Cost': 3901.64, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 1.529, 'Actual Total Time': 28.23, 'Actual Rows': 91, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '((u1.id = q1.owner_user_id) AND (q1.id = a1.question_id) AND (s.site_id = q1.site_id))', 'Rows Removed by Join Filter': 2237, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1001.43, 'Total Cost': 3894.56, 'Plan Rows': 1, 'Plan Width': 47, 'Actual Startup Time': 1.311, 'Actual Total Time': 19.412, 'Actual Rows': 5365, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(s.site_id = u1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Gather', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 1001.0, 'Total Cost': 3887.48, 'Plan Rows': 1, 'Plan Width': 39, 'Actual Startup Time': 1.302, 'Actual Total Time': 11.833, 'Actual Rows': 6713, 'Actual Loops': 1, 'Workers Planned': 1, 'Workers Launched': 1, 'Single Copy': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.0, 'Total Cost': 2887.38, 'Plan Rows': 1, 'Plan Width': 39, 'Actual Startup Time': 2.195, 'Actual Total Time': 14.039, 'Actual Rows': 3356, 'Actual Loops': 2, 'Inner Unique': False, 'Join Filter': '(s.site_id = a1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.56, 'Total Cost': 2788.65, 'Plan Rows': 14, 'Plan Width': 27, 'Actual Startup Time': 2.178, 'Actual Total Time': 7.405, 'Actual Rows': 7432, 'Actual Loops': 2, 'Inner Unique': False, 'Join Filter': '(s.site_id = tq1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.0, 'Total Cost': 2726.58, 'Plan Rows': 1, 'Plan Width': 23, 'Actual Startup Time': 2.152, 'Actual Total Time': 4.782, 'Actual Rows': 2, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(s.site_id = t1.site_id)', 'Rows Removed by Join Filter': 14, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.0, 'Total Cost': 2710.64, 'Plan Rows': 5, 'Plan Width': 19, 'Actual Startup Time': 0.488, 'Actual Total Time': 4.724, 'Actual Rows': 8, 'Actual Loops': 2, 'Filter': "((name)::text = ANY ('{forces,nodes,views}'::text[]))", 'Rows Removed by Filter': 93376, 'Workers': []}, {'Node Type': 'Seq Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Relation Name': 'site', 'Alias': 's', 'Startup Cost': 0.0, 'Total Cost': 3.16, 'Plan Rows': 2, 'Plan Width': 4, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.006, 'Actual Rows': 2, 'Actual Loops': 17, 'Filter': "((site_name)::text = ANY ('{drupal,physics}'::text[]))", 'Rows Removed by Filter': 153, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.69, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.018, 'Actual Total Time': 1.436, 'Actual Rows': 4955, 'Actual Loops': 3, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'answer_site_id_question_id_idx', 'Relation Name': 'answer', 'Alias': 'a1', 'Startup Cost': 0.43, 'Total Cost': 7.04, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 0, 'Actual Loops': 14864, 'Index Cond': '((site_id = tq1.site_id) AND (question_id = tq1.question_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 7.07, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 6713, 'Index Cond': '((id = a1.owner_user_id) AND (site_id = a1.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((upvotes >= 10) AND (upvotes <= 1000000))', 'Rows Removed by Filter': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 7.06, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 0, 'Actual Loops': 5365, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((favorite_count >= 0) AND (favorite_count <= 10000))', 'Rows Removed by Filter': 1}]}]}]}


sql file: q9-008.sql

sql: select count(distinct account.id) from
account, site, so_user, question q, post_link pl, tag, tag_question tq where
not exists (select * from answer a where a.site_id = q.site_id and a.question_id = q.id) and
site.site_name = 'stackoverflow' and
site.site_id = q.site_id and
pl.site_id = q.site_id and
pl.post_id_to = q.id and

tag.name = 'tensorflow' and
tag.site_id = q.site_id and

q.creation_date > '2018-01-01'::date and

tq.site_id = tag.site_id and
tq.tag_id = tag.id and
tq.question_id = q.id and

q.owner_user_id = so_user.id and
q.site_id = so_user.site_id and
so_user.reputation > 113 and

account.id = so_user.account_id and
account.website_url != '';

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 2621911.44, 'Total Cost': 2621911.45, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 1543.088, 'Actual Total Time': 1557.286, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Gather Merge', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 2621911.31, 'Total Cost': 2621911.44, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 1543.079, 'Actual Total Time': 1557.278, 'Actual Rows': 46, 'Actual Loops': 1, 'Workers Planned': 6, 'Workers Launched': 6, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 2620911.22, 'Total Cost': 2620911.22, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 1540.911, 'Actual Total Time': 1540.923, 'Actual Rows': 7, 'Actual Loops': 7, 'Sort Key': ['account.id'], 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory', 'Workers': [{'Worker Number': 0, 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory'}, {'Worker Number': 1, 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory'}, {'Worker Number': 2, 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory'}, {'Worker Number': 3, 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory'}, {'Worker Number': 4, 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory'}, {'Worker Number': 5, 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory'}], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Join Type': 'Right Anti', 'Startup Cost': 2506671.41, 'Total Cost': 2620911.21, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 1540.86, 'Actual Total Time': 1540.873, 'Actual Rows': 7, 'Actual Loops': 7, 'Inner Unique': False, 'Hash Cond': '((a.site_id = q.site_id) AND (a.question_id = q.id))', 'Workers': [], 'Plans': [{'Node Type': 'Index Only Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'answer_site_id_question_id_idx', 'Relation Name': 'answer', 'Alias': 'a', 'Startup Cost': 0.43, 'Total Cost': 106298.36, 'Plan Rows': 1058914, 'Plan Width': 8, 'Actual Startup Time': 0.043, 'Actual Total Time': 58.93, 'Actual Rows': 906793, 'Actual Loops': 7, 'Heap Fetches': 0, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': True, 'Async Capable': False, 'Startup Cost': 2506670.97, 'Total Cost': 2506670.97, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 1454.823, 'Actual Total Time': 1454.834, 'Actual Rows': 12, 'Actual Loops': 7, 'Hash Buckets': 1024, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 232, 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2479440.43, 'Total Cost': 2506670.97, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 1448.73, 'Actual Total Time': 1454.805, 'Actual Rows': 12, 'Actual Loops': 7, 'Inner Unique': False, 'Hash Cond': '((pl.site_id = site.site_id) AND (pl.post_id_to = q.id))', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'post_link', 'Alias': 'pl', 'Startup Cost': 0.0, 'Total Cost': 21752.3, 'Plan Rows': 730430, 'Plan Width': 8, 'Actual Startup Time': 0.007, 'Actual Total Time': 12.608, 'Actual Rows': 323476, 'Actual Loops': 7, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': True, 'Async Capable': False, 'Startup Cost': 2479440.42, 'Total Cost': 2479440.42, 'Plan Rows': 1, 'Plan Width': 32, 'Actual Startup Time': 1427.646, 'Actual Total Time': 1427.655, 'Actual Rows': 126, 'Actual Loops': 7, 'Hash Buckets': 1024, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 232, 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2228614.81, 'Total Cost': 2479440.42, 'Plan Rows': 1, 'Plan Width': 32, 'Actual Startup Time': 1298.975, 'Actual Total Time': 1427.53, 'Actual Rows': 126, 'Actual Loops': 7, 'Inner Unique': False, 'Hash Cond': '((so_user.site_id = site.site_id) AND (so_user.id = q.owner_user_id))', 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 150846.03, 'Total Cost': 401556.84, 'Plan Rows': 15304, 'Plan Width': 12, 'Actual Startup Time': 88.917, 'Actual Total Time': 214.695, 'Actual Rows': 65221, 'Actual Loops': 7, 'Inner Unique': True, 'Hash Cond': '(so_user.account_id = account.id)', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'so_user', 'Alias': 'so_user', 'Startup Cost': 0.0, 'Total Cost': 249942.21, 'Plan Rows': 292802, 'Plan Width': 12, 'Actual Startup Time': 0.017, 'Actual Total Time': 92.257, 'Actual Rows': 206212, 'Actual Loops': 7, 'Filter': '(reputation > 113)', 'Rows Removed by Filter': 2807689, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': True, 'Async Capable': False, 'Startup Cost': 149034.54, 'Total Cost': 149034.54, 'Plan Rows': 144919, 'Plan Width': 4, 'Actual Startup Time': 88.561, 'Actual Total Time': 88.562, 'Actual Rows': 103524, 'Actual Loops': 7, 'Hash Buckets': 1048576, 'Original Hash Buckets': 1048576, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 36672, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'account', 'Alias': 'account', 'Startup Cost': 0.0, 'Total Cost': 149034.54, 'Plan Rows': 144919, 'Plan Width': 4, 'Actual Startup Time': 0.018, 'Actual Total Time': 74.108, 'Actual Rows': 103524, 'Actual Loops': 7, 'Filter': "((website_url)::text <> ''::text)", 'Rows Removed by Filter': 1878212, 'Workers': []}]}]}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': True, 'Async Capable': False, 'Startup Cost': 2077768.77, 'Total Cost': 2077768.77, 'Plan Rows': 1, 'Plan Width': 28, 'Actual Startup Time': 1208.865, 'Actual Total Time': 1208.871, 'Actual Rows': 1884, 'Actual Loops': 7, 'Hash Buckets': 16384, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 1208, 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 295801.63, 'Total Cost': 2077768.77, 'Plan Rows': 1, 'Plan Width': 28, 'Actual Startup Time': 842.241, 'Actual Total Time': 1163.761, 'Actual Rows': 1884, 'Actual Loops': 7, 'Inner Unique': False, 'Hash Cond': '((q.site_id = site.site_id) AND (q.id = tq.question_id))', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'question', 'Alias': 'q', 'Startup Cost': 0.0, 'Total Cost': 1779220.98, 'Plan Rows': 366153, 'Plan Width': 12, 'Actual Startup Time': 101.655, 'Actual Total Time': 403.44, 'Actual Rows': 373981, 'Actual Loops': 7, 'Filter': "(creation_date > '2018-01-01'::date)", 'Rows Removed by Filter': 1435511, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': True, 'Async Capable': False, 'Startup Cost': 295801.55, 'Total Cost': 295801.55, 'Plan Rows': 5, 'Plan Width': 16, 'Actual Startup Time': 740.186, 'Actual Total Time': 740.19, 'Actual Rows': 3109, 'Actual Loops': 7, 'Hash Buckets': 32768, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 1720, 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2576.51, 'Total Cost': 295801.55, 'Plan Rows': 5, 'Plan Width': 16, 'Actual Startup Time': 260.142, 'Actual Total Time': 625.67, 'Actual Rows': 3109, 'Actual Loops': 7, 'Inner Unique': True, 'Hash Cond': '((site.site_id = tag.site_id) AND (tq.tag_id = tag.id))', 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.18, 'Total Cost': 293004.34, 'Plan Rows': 42642, 'Plan Width': 16, 'Actual Startup Time': 0.801, 'Actual Total Time': 505.478, 'Actual Rows': 3974404, 'Actual Loops': 7, 'Inner Unique': True, 'Hash Cond': '(tq.site_id = site.site_id)', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag_question', 'Alias': 'tq', 'Startup Cost': 0.0, 'Total Cost': 273162.12, 'Plan Rows': 7377012, 'Plan Width': 12, 'Actual Startup Time': 0.028, 'Actual Total Time': 196.892, 'Actual Rows': 5269117, 'Actual Loops': 7, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3.16, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.011, 'Actual Total Time': 0.012, 'Actual Rows': 1, 'Actual Loops': 7, 'Hash Buckets': 1024, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 9, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Relation Name': 'site', 'Alias': 'site', 'Startup Cost': 0.0, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.009, 'Actual Total Time': 0.009, 'Actual Rows': 1, 'Actual Loops': 7, 'Filter': "((site_name)::text = 'stackoverflow'::text)", 'Rows Removed by Filter': 172, 'Workers': []}]}]}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': True, 'Async Capable': False, 'Startup Cost': 2573.31, 'Total Cost': 2573.31, 'Plan Rows': 2, 'Plan Width': 8, 'Actual Startup Time': 1.028, 'Actual Total Time': 1.029, 'Actual Rows': 1, 'Actual Loops': 7, 'Hash Buckets': 1024, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 104, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 'tag', 'Startup Cost': 0.0, 'Total Cost': 2573.31, 'Plan Rows': 2, 'Plan Width': 8, 'Actual Startup Time': 0.554, 'Actual Total Time': 1.004, 'Actual Rows': 1, 'Actual Loops': 7, 'Filter': "((name)::text = 'tensorflow'::text)", 'Rows Removed by Filter': 26680, 'Workers': []}]}]}]}]}]}]}]}]}]}]}]}]}]}


sql file: q15-005.sql

sql: SELECT b1.name, count(*)
FROM
site as s,
so_user as u1,
tag as t1,
tag_question as tq1,
question as q1,
badge as b1,
account as acc
WHERE
s.site_id = u1.site_id
AND s.site_id = b1.site_id
AND s.site_id = t1.site_id
AND s.site_id = tq1.site_id
AND s.site_id = q1.site_id
AND t1.id = tq1.tag_id
AND q1.id = tq1.question_id
AND q1.owner_user_id = u1.id
AND acc.id = u1.account_id
AND b1.user_id = u1.id
AND (q1.view_count >= 100)
AND (q1.view_count <= 100000)
AND (s.site_name in ('stackoverflow','superuser'))
AND (t1.name in ('corpus','httplistener','modx-revolution'))
AND (acc.website_url ILIKE ('%'))
GROUP BY b1.name
ORDER BY COUNT(*)
DESC
LIMIT 100

detailed info: {'Node Type': 'Limit', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3958.54, 'Total Cost': 3958.55, 'Plan Rows': 1, 'Plan Width': 19, 'Actual Startup Time': 40.758, 'Actual Total Time': 40.788, 'Actual Rows': 80, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3958.54, 'Total Cost': 3958.55, 'Plan Rows': 1, 'Plan Width': 19, 'Actual Startup Time': 40.757, 'Actual Total Time': 40.785, 'Actual Rows': 80, 'Actual Loops': 1, 'Sort Key': ['(count(*)) DESC'], 'Sort Method': 'quicksort', 'Sort Space Used': 30, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Aggregate', 'Strategy': 'Sorted', 'Partial Mode': 'Simple', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3958.51, 'Total Cost': 3958.53, 'Plan Rows': 1, 'Plan Width': 19, 'Actual Startup Time': 39.868, 'Actual Total Time': 40.775, 'Actual Rows': 80, 'Actual Loops': 1, 'Group Key': ['b1.name'], 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3958.51, 'Total Cost': 3958.52, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 39.862, 'Actual Total Time': 40.248, 'Actual Rows': 17601, 'Actual Loops': 1, 'Sort Key': ['b1.name'], 'Sort Method': 'quicksort', 'Sort Space Used': 1224, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1002.44, 'Total Cost': 3958.5, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 4.093, 'Actual Total Time': 38.476, 'Actual Rows': 17601, 'Actual Loops': 1, 'Inner Unique': True, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1002.0, 'Total Cost': 3951.61, 'Plan Rows': 1, 'Plan Width': 15, 'Actual Startup Time': 3.971, 'Actual Total Time': 11.359, 'Actual Rows': 41200, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(s.site_id = b1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Gather', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 1001.44, 'Total Cost': 3947.72, 'Plan Rows': 1, 'Plan Width': 32, 'Actual Startup Time': 3.966, 'Actual Total Time': 5.104, 'Actual Rows': 598, 'Actual Loops': 1, 'Workers Planned': 1, 'Workers Launched': 1, 'Single Copy': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.44, 'Total Cost': 2947.62, 'Plan Rows': 1, 'Plan Width': 32, 'Actual Startup Time': 2.789, 'Actual Total Time': 7.38, 'Actual Rows': 299, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(s.site_id = u1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.0, 'Total Cost': 2885.37, 'Plan Rows': 9, 'Plan Width': 20, 'Actual Startup Time': 2.781, 'Actual Total Time': 6.547, 'Actual Rows': 299, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(s.site_id = q1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.56, 'Total Cost': 2788.65, 'Plan Rows': 14, 'Plan Width': 16, 'Actual Startup Time': 2.773, 'Actual Total Time': 5.337, 'Actual Rows': 367, 'Actual Loops': 2, 'Inner Unique': False, 'Join Filter': '(s.site_id = tq1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.0, 'Total Cost': 2726.58, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 2.758, 'Actual Total Time': 4.529, 'Actual Rows': 2, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(s.site_id = t1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.0, 'Total Cost': 2710.64, 'Plan Rows': 5, 'Plan Width': 8, 'Actual Startup Time': 2.748, 'Actual Total Time': 4.516, 'Actual Rows': 2, 'Actual Loops': 2, 'Filter': "((name)::text = ANY ('{corpus,httplistener,modx-revolution}'::text[]))", 'Rows Removed by Filter': 93384, 'Workers': []}, {'Node Type': 'Seq Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Relation Name': 'site', 'Alias': 's', 'Startup Cost': 0.0, 'Total Cost': 3.16, 'Plan Rows': 2, 'Plan Width': 4, 'Actual Startup Time': 0.008, 'Actual Total Time': 0.008, 'Actual Rows': 1, 'Actual Loops': 3, 'Filter': "((site_name)::text = ANY ('{stackoverflow,superuser}'::text[]))", 'Rows Removed by Filter': 150, 'Workers': []}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.69, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.012, 'Actual Total Time': 0.525, 'Actual Rows': 245, 'Actual Loops': 3, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 734, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 6.9, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.003, 'Actual Rows': 1, 'Actual Loops': 734, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((view_count >= 100) AND (view_count <= 100000))', 'Rows Removed by Filter': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 6.91, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.003, 'Actual Rows': 1, 'Actual Loops': 598, 'Index Cond': '((id = q1.owner_user_id) AND (site_id = q1.site_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'badge_pkey', 'Relation Name': 'badge', 'Alias': 'b1', 'Startup Cost': 0.56, 'Total Cost': 3.87, 'Plan Rows': 1, 'Plan Width': 19, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.007, 'Actual Rows': 69, 'Actual Loops': 598, 'Index Cond': '((site_id = q1.site_id) AND (user_id = q1.owner_user_id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'acc', 'Startup Cost': 0.43, 'Total Cost': 6.89, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 0, 'Actual Loops': 41200, 'Index Cond': '(id = u1.account_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((website_url)::text ~~* '%'::text)", 'Rows Removed by Filter': 1}]}]}]}]}]}


sql file: q13-002.sql

sql: SELECT acc.location, count(*)
FROM
site as s,
so_user as u1,
question as q1,
answer as a1,
tag as t1,
tag_question as tq1,
badge as b,
account as acc
WHERE
s.site_id = q1.site_id
AND s.site_id = u1.site_id
AND s.site_id = a1.site_id
AND s.site_id = t1.site_id
AND s.site_id = tq1.site_id
AND s.site_id = b.site_id
AND q1.id = tq1.question_id
AND q1.id = a1.question_id
AND a1.owner_user_id = u1.id
AND t1.id = tq1.tag_id
AND b.user_id = u1.id
AND acc.id = u1.account_id
AND (s.site_name in ('stats'))
AND (t1.name in ('model-selection','optimization','p-value','poisson-distribution'))
AND (q1.view_count >= 100)
AND (q1.view_count <= 100000)
AND (u1.downvotes >= 10)
AND (u1.downvotes <= 100000)
AND (b.name in ('Announcer','Custodian','Necromancer','Nice Question'))
GROUP BY acc.location
ORDER BY COUNT(*)
DESC
LIMIT 100

detailed info: {'Node Type': 'Limit', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 4106.61, 'Total Cost': 4106.62, 'Plan Rows': 1, 'Plan Width': 26, 'Actual Startup Time': 38.218, 'Actual Total Time': 38.253, 'Actual Rows': 100, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 4106.61, 'Total Cost': 4106.62, 'Plan Rows': 1, 'Plan Width': 26, 'Actual Startup Time': 38.217, 'Actual Total Time': 38.248, 'Actual Rows': 100, 'Actual Loops': 1, 'Sort Key': ['(count(*)) DESC'], 'Sort Method': 'quicksort', 'Sort Space Used': 32, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Aggregate', 'Strategy': 'Sorted', 'Partial Mode': 'Simple', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 4096.16, 'Total Cost': 4106.6, 'Plan Rows': 1, 'Plan Width': 26, 'Actual Startup Time': 12.937, 'Actual Total Time': 38.231, 'Actual Rows': 102, 'Actual Loops': 1, 'Group Key': ['acc.location'], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4096.16, 'Total Cost': 4106.59, 'Plan Rows': 1, 'Plan Width': 18, 'Actual Startup Time': 12.83, 'Actual Total Time': 36.908, 'Actual Rows': 45260, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(s.site_id = b.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4095.6, 'Total Cost': 4102.55, 'Plan Rows': 1, 'Plan Width': 50, 'Actual Startup Time': 12.822, 'Actual Total Time': 15.192, 'Actual Rows': 881, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(s.site_id = q1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Gather Merge', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 4095.16, 'Total Cost': 4095.28, 'Plan Rows': 1, 'Plan Width': 54, 'Actual Startup Time': 12.816, 'Actual Total Time': 12.952, 'Actual Rows': 1006, 'Actual Loops': 1, 'Workers Planned': 1, 'Workers Launched': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3095.15, 'Total Cost': 3095.16, 'Plan Rows': 1, 'Plan Width': 54, 'Actual Startup Time': 11.085, 'Actual Total Time': 11.101, 'Actual Rows': 503, 'Actual Loops': 2, 'Sort Key': ['acc.location'], 'Sort Method': 'quicksort', 'Sort Space Used': 71, 'Sort Space Type': 'Memory', 'Workers': [{'Worker Number': 0, 'Sort Method': 'quicksort', 'Sort Space Used': 57, 'Sort Space Type': 'Memory'}], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.02, 'Total Cost': 3095.14, 'Plan Rows': 1, 'Plan Width': 54, 'Actual Startup Time': 4.701, 'Actual Total Time': 10.958, 'Actual Rows': 503, 'Actual Loops': 2, 'Inner Unique': True, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.59, 'Total Cost': 3087.84, 'Plan Rows': 1, 'Plan Width': 40, 'Actual Startup Time': 4.691, 'Actual Total Time': 10.321, 'Actual Rows': 503, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(s.site_id = u1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.15, 'Total Cost': 3080.57, 'Plan Rows': 1, 'Plan Width': 28, 'Actual Startup Time': 4.639, 'Actual Total Time': 8.754, 'Actual Rows': 864, 'Actual Loops': 2, 'Inner Unique': False, 'Join Filter': '(s.site_id = a1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.72, 'Total Cost': 2979.06, 'Plan Rows': 14, 'Plan Width': 16, 'Actual Startup Time': 4.63, 'Actual Total Time': 6.494, 'Actual Rows': 1924, 'Actual Loops': 2, 'Inner Unique': False, 'Join Filter': '(s.site_id = tq1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.15, 'Total Cost': 2917.19, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 4.605, 'Actual Total Time': 5.129, 'Actual Rows': 2, 'Actual Loops': 2, 'Inner Unique': True, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.0, 'Total Cost': 2847.97, 'Plan Rows': 30, 'Plan Width': 8, 'Actual Startup Time': 0.079, 'Actual Total Time': 5.097, 'Actual Rows': 25, 'Actual Loops': 2, 'Filter': "((name)::text = ANY ('{model-selection,optimization,p-value,poisson-distribution}'::text[]))", 'Rows Removed by Filter': 93360, 'Workers': []}, {'Node Type': 'Memoize', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 0.15, 'Total Cost': 2.29, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 0, 'Actual Loops': 50, 'Cache Key': 't1.site_id', 'Cache Mode': 'logical', 'Cache Hits': 2, 'Cache Misses': 35, 'Cache Evictions': 0, 'Cache Overflows': 0, 'Peak Memory Usage': 3, 'Workers': [{'Worker Number': 0, 'Cache Hits': 3, 'Cache Misses': 10, 'Cache Evictions': 0, 'Cache Overflows': 0, 'Peak Memory Usage': 1}], 'Plans': [{'Node Type': 'Index Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'site_pkey', 'Relation Name': 'site', 'Alias': 's', 'Startup Cost': 0.14, 'Total Cost': 2.28, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 0, 'Actual Loops': 45, 'Index Cond': '(site_id = t1.site_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((site_name)::text = 'stats'::text)", 'Rows Removed by Filter': 1, 'Workers': []}]}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.48, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.015, 'Actual Total Time': 0.635, 'Actual Rows': 962, 'Actual Loops': 4, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 3847, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'answer_site_id_question_id_idx', 'Relation Name': 'answer', 'Alias': 'a1', 'Startup Cost': 0.43, 'Total Cost': 7.24, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 0, 'Actual Loops': 3847, 'Index Cond': '((site_id = tq1.site_id) AND (question_id = tq1.question_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 7.26, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 1727, 'Index Cond': '((id = a1.owner_user_id) AND (site_id = a1.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((downvotes >= 10) AND (downvotes <= 100000))', 'Rows Removed by Filter': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'acc', 'Startup Cost': 0.43, 'Total Cost': 7.3, 'Plan Rows': 1, 'Plan Width': 22, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 1006, 'Index Cond': '(id = u1.account_id)', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 7.25, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 1006, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((view_count >= 100) AND (view_count <= 100000))', 'Rows Removed by Filter': 0}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'badge_pkey', 'Relation Name': 'badge', 'Alias': 'b', 'Startup Cost': 0.56, 'Total Cost': 4.03, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.022, 'Actual Rows': 51, 'Actual Loops': 881, 'Index Cond': '((site_id = a1.site_id) AND (user_id = a1.owner_user_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((name)::text = ANY (\'{Announcer,Custodian,Necromancer,"Nice Question"}\'::text[]))', 'Rows Removed by Filter': 318, 'Heap Fetches': 0}]}]}]}]}


sql file: q5-003.sql

sql: select COUNT(distinct account.display_name)
from
tag t1, site s1, question q1, tag_question tq1, so_user u1, comment c1,
account
where
-- underappreciated (high votes, low views) questions with at least one comment
s1.site_name='ux' and
t1.name in ('security', 'hyperlinks') and
t1.site_id = s1.site_id and
q1.site_id = s1.site_id and
tq1.site_id = s1.site_id and
tq1.question_id = q1.id and
tq1.tag_id = t1.id and
q1.owner_user_id = u1.id and
q1.site_id = u1.site_id and
q1.score > 8 and
q1.view_count < 2534 and
c1.site_id = q1.site_id and
c1.post_id = q1.id and

-- to get the display name
account.id = u1.account_id;

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 7016.13, 'Total Cost': 7016.14, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 2.505, 'Actual Total Time': 2.506, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 7016.12, 'Total Cost': 7016.13, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 2.497, 'Actual Total Time': 2.499, 'Actual Rows': 78, 'Actual Loops': 1, 'Sort Key': ['account.display_name'], 'Sort Method': 'quicksort', 'Sort Space Used': 26, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.0, 'Total Cost': 7016.11, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 0.279, 'Actual Total Time': 2.481, 'Actual Rows': 78, 'Actual Loops': 1, 'Inner Unique': True, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.57, 'Total Cost': 7008.49, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.271, 'Actual Total Time': 2.381, 'Actual Rows': 78, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(t1.site_id = c1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.0, 'Total Cost': 7000.69, 'Plan Rows': 1, 'Plan Width': 32, 'Actual Startup Time': 0.235, 'Actual Total Time': 2.288, 'Actual Rows': 23, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(t1.site_id = u1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.56, 'Total Cost': 6993.03, 'Plan Rows': 1, 'Plan Width': 28, 'Actual Startup Time': 0.229, 'Actual Total Time': 2.21, 'Actual Rows': 23, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(t1.site_id = q1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.13, 'Total Cost': 6817.12, 'Plan Rows': 23, 'Plan Width': 16, 'Actual Startup Time': 0.222, 'Actual Total Time': 1.539, 'Actual Rows': 265, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.56, 'Total Cost': 6755.31, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.212, 'Actual Total Time': 1.376, 'Actual Rows': 2, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Index Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'site_pkey', 'Relation Name': 'site', 'Alias': 's1', 'Startup Cost': 0.14, 'Total Cost': 15.17, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.017, 'Actual Total Time': 0.018, 'Actual Rows': 1, 'Actual Loops': 1, 'Filter': "((site_name)::text = 'ux'::text)", 'Rows Removed by Filter': 172}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_pkey', 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.42, 'Total Cost': 6740.13, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.194, 'Actual Total Time': 1.356, 'Actual Rows': 2, 'Actual Loops': 1, 'Index Cond': '(site_id = s1.site_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((name)::text = ANY ('{security,hyperlinks}'::text[]))", 'Rows Removed by Filter': 1028}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.49, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.007, 'Actual Total Time': 0.074, 'Actual Rows': 132, 'Actual Loops': 2, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 7.64, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 0, 'Actual Loops': 265, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((score > 8) AND (view_count < 2534))', 'Rows Removed by Filter': 1}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 7.65, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.003, 'Actual Rows': 1, 'Actual Loops': 23, 'Index Cond': '((id = q1.owner_user_id) AND (site_id = q1.site_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'comment_site_id_post_id_idx', 'Relation Name': 'comment', 'Alias': 'c1', 'Startup Cost': 0.57, 'Total Cost': 7.79, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.004, 'Actual Rows': 3, 'Actual Loops': 23, 'Index Cond': '((site_id = tq1.site_id) AND (post_id = tq1.question_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'account', 'Startup Cost': 0.43, 'Total Cost': 7.63, 'Plan Rows': 1, 'Plan Width': 15, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 78, 'Index Cond': '(id = u1.account_id)', 'Rows Removed by Index Recheck': 0}]}]}]}


sql file: q8-002.sql

sql: select count(distinct q1.id) from
site, post_link pl, question q1, question q2, comment c1, comment c2,
tag, tag_question tq1, tag_question tq2
where
site.site_name = 'german' and
pl.site_id = site.site_id and

pl.site_id = q1.site_id and
pl.post_id_from = q1.id and
pl.site_id = q2.site_id and
pl.post_id_to = q2.id and

c1.site_id = q1.site_id and
c1.post_id = q1.id and

c2.site_id = q2.site_id and
c2.post_id = q2.id and

c1.date > c2.date and

tag.name in ('angularjs', 'excel') and
tag.id = tq1.tag_id and
tag.site_id = tq1.site_id and
tag.id = tq2.tag_id and
tag.site_id = tq1.site_id and

tag.site_id = pl.site_id and

tq1.site_id = q1.site_id and
tq1.question_id = q1.id and
tq2.site_id = q2.site_id and
tq2.question_id = q2.id;

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 7109.11, 'Total Cost': 7109.12, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 1.387, 'Actual Total Time': 1.388, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 7109.11, 'Total Cost': 7109.11, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 1.384, 'Actual Total Time': 1.385, 'Actual Rows': 0, 'Actual Loops': 1, 'Sort Key': ['q1.id'], 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.13, 'Total Cost': 7109.1, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 1.38, 'Actual Total Time': 1.381, 'Actual Rows': 0, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '((c1.date > c2.date) AND (pl.post_id_to = c2.post_id) AND (c2.site_id = tag.site_id))', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.56, 'Total Cost': 7100.92, 'Plan Rows': 1, 'Plan Width': 56, 'Actual Startup Time': 1.38, 'Actual Total Time': 1.381, 'Actual Rows': 0, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '((tag.id = tq2.tag_id) AND (tag.site_id = tq2.site_id))', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.0, 'Total Cost': 7092.76, 'Plan Rows': 1, 'Plan Width': 56, 'Actual Startup Time': 1.38, 'Actual Total Time': 1.381, 'Actual Rows': 0, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(q2.site_id = tag.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.56, 'Total Cost': 7088.51, 'Plan Rows': 1, 'Plan Width': 48, 'Actual Startup Time': 1.38, 'Actual Total Time': 1.381, 'Actual Rows': 0, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(pl.site_id = tag.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.13, 'Total Cost': 7080.49, 'Plan Rows': 1, 'Plan Width': 48, 'Actual Startup Time': 1.38, 'Actual Total Time': 1.381, 'Actual Rows': 0, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(c1.site_id = tag.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.56, 'Total Cost': 7072.32, 'Plan Rows': 1, 'Plan Width': 32, 'Actual Startup Time': 1.38, 'Actual Total Time': 1.381, 'Actual Rows': 0, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(q1.site_id = tag.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.13, 'Total Cost': 6974.64, 'Plan Rows': 23, 'Plan Width': 24, 'Actual Startup Time': 1.38, 'Actual Total Time': 1.38, 'Actual Rows': 0, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.56, 'Total Cost': 6912.64, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 1.38, 'Actual Total Time': 1.38, 'Actual Rows': 0, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Index Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'site_pkey', 'Relation Name': 'site', 'Alias': 'site', 'Startup Cost': 0.14, 'Total Cost': 15.17, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.017, 'Actual Total Time': 0.022, 'Actual Rows': 1, 'Actual Loops': 1, 'Filter': "((site_name)::text = 'german'::text)", 'Rows Removed by Filter': 172}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_pkey', 'Relation Name': 'tag', 'Alias': 'tag', 'Startup Cost': 0.42, 'Total Cost': 6897.46, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 1.357, 'Actual Total Time': 1.357, 'Actual Rows': 0, 'Actual Loops': 1, 'Index Cond': '(site_id = site.site_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((name)::text = ANY ('{angularjs,excel}'::text[]))", 'Rows Removed by Filter': 258}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.69, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.0, 'Actual Total Time': 0.0, 'Actual Rows': 0, 'Actual Loops': 0, 'Index Cond': '((site_id = tag.site_id) AND (tag_id = tag.id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 0}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 4.23, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.0, 'Actual Total Time': 0.0, 'Actual Rows': 0, 'Actual Loops': 0, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'comment_site_id_post_id_idx', 'Relation Name': 'comment', 'Alias': 'c1', 'Startup Cost': 0.57, 'Total Cost': 8.15, 'Plan Rows': 1, 'Plan Width': 16, 'Actual Startup Time': 0.0, 'Actual Total Time': 0.0, 'Actual Rows': 0, 'Actual Loops': 0, 'Index Cond': '((site_id = q1.site_id) AND (post_id = q1.id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'post_link_pkey', 'Relation Name': 'post_link', 'Alias': 'pl', 'Startup Cost': 0.43, 'Total Cost': 8.01, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.0, 'Actual Total Time': 0.0, 'Actual Rows': 0, 'Actual Loops': 0, 'Index Cond': '((site_id = q1.site_id) AND (post_id_from = q1.id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 0}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q2', 'Startup Cost': 0.43, 'Total Cost': 4.23, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.0, 'Actual Total Time': 0.0, 'Actual Rows': 0, 'Actual Loops': 0, 'Index Cond': '((id = pl.post_id_to) AND (site_id = pl.site_id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 0}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_pkey', 'Relation Name': 'tag_question', 'Alias': 'tq2', 'Startup Cost': 0.56, 'Total Cost': 8.15, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.0, 'Actual Total Time': 0.0, 'Actual Rows': 0, 'Actual Loops': 0, 'Index Cond': '((site_id = pl.site_id) AND (question_id = pl.post_id_to))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'comment_site_id_post_id_idx', 'Relation Name': 'comment', 'Alias': 'c2', 'Startup Cost': 0.57, 'Total Cost': 8.15, 'Plan Rows': 1, 'Plan Width': 16, 'Actual Startup Time': 0.0, 'Actual Total Time': 0.0, 'Actual Rows': 0, 'Actual Loops': 0, 'Index Cond': '((site_id = tq2.site_id) AND (post_id = tq2.question_id))', 'Rows Removed by Index Recheck': 0}]}]}]}


sql file: q15-004.sql

sql: SELECT b1.name, count(*)
FROM
site as s,
so_user as u1,
tag as t1,
tag_question as tq1,
question as q1,
badge as b1,
account as acc
WHERE
s.site_id = u1.site_id
AND s.site_id = b1.site_id
AND s.site_id = t1.site_id
AND s.site_id = tq1.site_id
AND s.site_id = q1.site_id
AND t1.id = tq1.tag_id
AND q1.id = tq1.question_id
AND q1.owner_user_id = u1.id
AND acc.id = u1.account_id
AND b1.user_id = u1.id
AND (q1.view_count >= 10)
AND (q1.view_count <= 1000)
AND (s.site_name in ('apple','ru','stats'))
AND (t1.name in ('1с','categorical-encoding','estimators','filter','ftp','iframe','kohana','kolmogorov-smirnov','marginal','path','websocket','криптография','шаблоны-проектирования'))
AND (acc.website_url ILIKE ('%'))
GROUP BY b1.name
ORDER BY COUNT(*)
DESC
LIMIT 100

detailed info: {'Node Type': 'Limit', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 5326.19, 'Total Cost': 5326.19, 'Plan Rows': 1, 'Plan Width': 19, 'Actual Startup Time': 42.796, 'Actual Total Time': 42.839, 'Actual Rows': 87, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 5326.19, 'Total Cost': 5326.19, 'Plan Rows': 1, 'Plan Width': 19, 'Actual Startup Time': 42.795, 'Actual Total Time': 42.835, 'Actual Rows': 87, 'Actual Loops': 1, 'Sort Key': ['(count(*)) DESC'], 'Sort Method': 'quicksort', 'Sort Space Used': 30, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Aggregate', 'Strategy': 'Sorted', 'Partial Mode': 'Simple', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 5326.16, 'Total Cost': 5326.18, 'Plan Rows': 1, 'Plan Width': 19, 'Actual Startup Time': 42.045, 'Actual Total Time': 42.823, 'Actual Rows': 87, 'Actual Loops': 1, 'Group Key': ['b1.name'], 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 5326.16, 'Total Cost': 5326.16, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 42.04, 'Actual Total Time': 42.382, 'Actual Rows': 14875, 'Actual Loops': 1, 'Sort Key': ['b1.name'], 'Sort Method': 'quicksort', 'Sort Space Used': 742, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1005.85, 'Total Cost': 5326.15, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 0.705, 'Actual Total Time': 40.574, 'Actual Rows': 14875, 'Actual Loops': 1, 'Inner Unique': True, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1005.42, 'Total Cost': 5319.26, 'Plan Rows': 1, 'Plan Width': 15, 'Actual Startup Time': 0.701, 'Actual Total Time': 13.937, 'Actual Rows': 38443, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(s.site_id = b1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Gather', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 1004.85, 'Total Cost': 5315.37, 'Plan Rows': 1, 'Plan Width': 32, 'Actual Startup Time': 0.695, 'Actual Total Time': 7.155, 'Actual Rows': 2016, 'Actual Loops': 1, 'Workers Planned': 1, 'Workers Launched': 1, 'Single Copy': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.85, 'Total Cost': 4315.27, 'Plan Rows': 1, 'Plan Width': 32, 'Actual Startup Time': 3.384, 'Actual Total Time': 18.912, 'Actual Rows': 1008, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(s.site_id = u1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.42, 'Total Cost': 4246.1, 'Plan Rows': 10, 'Plan Width': 20, 'Actual Startup Time': 3.374, 'Actual Total Time': 16.428, 'Actual Rows': 1008, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(s.site_id = q1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.98, 'Total Cost': 4149.38, 'Plan Rows': 14, 'Plan Width': 16, 'Actual Startup Time': 3.355, 'Actual Total Time': 13.021, 'Actual Rows': 1286, 'Actual Loops': 2, 'Inner Unique': False, 'Join Filter': '(s.site_id = tq1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.42, 'Total Cost': 4087.41, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 3.334, 'Actual Total Time': 11.931, 'Actual Rows': 8, 'Actual Loops': 2, 'Inner Unique': True, 'Hash Cond': '(t1.site_id = s.site_id)', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.0, 'Total Cost': 4083.95, 'Plan Rows': 19, 'Plan Width': 8, 'Actual Startup Time': 0.174, 'Actual Total Time': 11.885, 'Actual Rows': 56, 'Actual Loops': 2, 'Filter': "((name)::text = ANY ('{1с,categorical-encoding,estimators,filter,ftp,iframe,kohana,kolmogorov-smirnov,marginal,path,websocket,криптография,шаблоны-проектирования}'::text[]))", 'Rows Removed by Filter': 93329, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3.38, 'Total Cost': 3.38, 'Plan Rows': 3, 'Plan Width': 4, 'Actual Startup Time': 0.015, 'Actual Total Time': 0.015, 'Actual Rows': 3, 'Actual Loops': 2, 'Hash Buckets': 1024, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 9, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Relation Name': 'site', 'Alias': 's', 'Startup Cost': 0.0, 'Total Cost': 3.38, 'Plan Rows': 3, 'Plan Width': 4, 'Actual Startup Time': 0.006, 'Actual Total Time': 0.013, 'Actual Rows': 3, 'Actual Loops': 2, 'Filter': "((site_name)::text = ANY ('{apple,ru,stats}'::text[]))", 'Rows Removed by Filter': 170, 'Workers': []}]}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.58, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.008, 'Actual Total Time': 0.127, 'Actual Rows': 161, 'Actual Loops': 16, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 2571, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 6.9, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 2571, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((view_count >= 10) AND (view_count <= 1000))', 'Rows Removed by Filter': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 6.9, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 2016, 'Index Cond': '((id = q1.owner_user_id) AND (site_id = q1.site_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'badge_pkey', 'Relation Name': 'badge', 'Alias': 'b1', 'Startup Cost': 0.56, 'Total Cost': 3.87, 'Plan Rows': 1, 'Plan Width': 19, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 19, 'Actual Loops': 2016, 'Index Cond': '((site_id = q1.site_id) AND (user_id = q1.owner_user_id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'acc', 'Startup Cost': 0.43, 'Total Cost': 6.89, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 0, 'Actual Loops': 38443, 'Index Cond': '(id = u1.account_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((website_url)::text ~~* '%'::text)", 'Rows Removed by Filter': 1}]}]}]}]}]}


sql file: q6-003.sql

sql: select COUNT(distinct account.display_name)
from
tag t1, site s1, question q1, tag_question tq1, so_user u1, comment c1,
account
where
-- underappreciated (high votes, low views) questions with at least one comment
s1.site_name='dba' and
t1.name in ('alias', 'case', 'mongodb-3.0', 'downgrade', 'pg-stat-activity') and
t1.site_id = s1.site_id and
q1.site_id = s1.site_id and
tq1.site_id = s1.site_id and
tq1.question_id = q1.id and
tq1.tag_id = t1.id and
q1.owner_user_id = u1.id and
q1.site_id = u1.site_id and
c1.site_id = q1.site_id and
c1.post_id = q1.id and
c1.score > q1.score and

-- to get the display name
account.id = u1.account_id;

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 7020.25, 'Total Cost': 7020.26, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 3.376, 'Actual Total Time': 3.377, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 7020.24, 'Total Cost': 7020.25, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 3.369, 'Actual Total Time': 3.371, 'Actual Rows': 52, 'Actual Loops': 1, 'Sort Key': ['account.display_name'], 'Sort Method': 'quicksort', 'Sort Space Used': 26, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.0, 'Total Cost': 7020.23, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 0.483, 'Actual Total Time': 3.353, 'Actual Rows': 52, 'Actual Loops': 1, 'Inner Unique': True, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.57, 'Total Cost': 7012.6, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.477, 'Actual Total Time': 3.212, 'Actual Rows': 52, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '((c1.score > q1.score) AND (t1.site_id = c1.site_id))', 'Rows Removed by Join Filter': 327, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.0, 'Total Cost': 7004.8, 'Plan Rows': 1, 'Plan Width': 36, 'Actual Startup Time': 0.366, 'Actual Total Time': 2.673, 'Actual Rows': 192, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(t1.site_id = u1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.56, 'Total Cost': 6997.15, 'Plan Rows': 1, 'Plan Width': 32, 'Actual Startup Time': 0.359, 'Actual Total Time': 2.107, 'Actual Rows': 192, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(t1.site_id = q1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.13, 'Total Cost': 6821.36, 'Plan Rows': 23, 'Plan Width': 16, 'Actual Startup Time': 0.352, 'Actual Total Time': 1.571, 'Actual Rows': 192, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.56, 'Total Cost': 6759.36, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.342, 'Actual Total Time': 1.404, 'Actual Rows': 5, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Index Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'site_pkey', 'Relation Name': 'site', 'Alias': 's1', 'Startup Cost': 0.14, 'Total Cost': 15.17, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.013, 'Actual Total Time': 0.018, 'Actual Rows': 1, 'Actual Loops': 1, 'Filter': "((site_name)::text = 'dba'::text)", 'Rows Removed by Filter': 172}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_pkey', 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.42, 'Total Cost': 6744.18, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.328, 'Actual Total Time': 1.384, 'Actual Rows': 5, 'Actual Loops': 1, 'Index Cond': '(site_id = s1.site_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((name)::text = ANY ('{alias,case,mongodb-3.0,downgrade,pg-stat-activity}'::text[]))", 'Rows Removed by Filter': 1114}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.69, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.005, 'Actual Total Time': 0.031, 'Actual Rows': 38, 'Actual Loops': 5, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 7.63, 'Plan Rows': 1, 'Plan Width': 16, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.003, 'Actual Rows': 1, 'Actual Loops': 192, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 7.64, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.003, 'Actual Rows': 1, 'Actual Loops': 192, 'Index Cond': '((id = q1.owner_user_id) AND (site_id = q1.site_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'comment_site_id_post_id_idx', 'Relation Name': 'comment', 'Alias': 'c1', 'Startup Cost': 0.57, 'Total Cost': 7.79, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.003, 'Actual Rows': 2, 'Actual Loops': 192, 'Index Cond': '((site_id = tq1.site_id) AND (post_id = tq1.question_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'account', 'Startup Cost': 0.43, 'Total Cost': 7.63, 'Plan Rows': 1, 'Plan Width': 15, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.003, 'Actual Rows': 1, 'Actual Loops': 52, 'Index Cond': '(id = u1.account_id)', 'Rows Removed by Index Recheck': 0}]}]}]}


sql file: q7-002.sql

sql: select count(distinct account.display_name) from account, so_user, badge b1, badge b2 where
account.website_url != '' and
account.id = so_user.account_id and

b1.site_id = so_user.site_id and
b1.user_id = so_user.id and
b1.name = 'Illuminator' and

b2.site_id = so_user.site_id and
b2.user_id = so_user.id and
b2.name = 'Nice Question' and
b2.date > b1.date + '9 months'::interval

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 485684.85, 'Total Cost': 485684.86, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 244.387, 'Actual Total Time': 246.577, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 485684.83, 'Total Cost': 485684.84, 'Plan Rows': 5, 'Plan Width': 11, 'Actual Startup Time': 244.36, 'Actual Total Time': 246.559, 'Actual Rows': 334, 'Actual Loops': 1, 'Sort Key': ['account.display_name'], 'Sort Method': 'quicksort', 'Sort Space Used': 31, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Gather', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 1001.44, 'Total Cost': 485684.77, 'Plan Rows': 5, 'Plan Width': 11, 'Actual Startup Time': 112.118, 'Actual Total Time': 246.493, 'Actual Rows': 334, 'Actual Loops': 1, 'Workers Planned': 6, 'Workers Launched': 6, 'Single Copy': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.44, 'Total Cost': 484684.27, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 79.602, 'Actual Total Time': 242.418, 'Actual Rows': 48, 'Actual Loops': 7, 'Inner Unique': True, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.0, 'Total Cost': 484605.78, 'Plan Rows': 17, 'Plan Width': 4, 'Actual Startup Time': 57.313, 'Actual Total Time': 242.223, 'Actual Rows': 75, 'Actual Loops': 7, 'Inner Unique': True, 'Join Filter': '((so_user.site_id = b1.site_id) AND (so_user.id = b1.user_id))', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.57, 'Total Cost': 482651.38, 'Plan Rows': 403, 'Plan Width': 16, 'Actual Startup Time': 57.295, 'Actual Total Time': 242.067, 'Actual Rows': 75, 'Actual Loops': 7, 'Inner Unique': False, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'badge', 'Alias': 'b1', 'Startup Cost': 0.0, 'Total Cost': 477779.26, 'Plan Rows': 1068, 'Plan Width': 16, 'Actual Startup Time': 36.807, 'Actual Total Time': 241.768, 'Actual Rows': 26, 'Actual Loops': 7, 'Filter': "((name)::text = 'Illuminator'::text)", 'Rows Removed by Filter': 7319532, 'Workers': []}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'badge_pkey', 'Relation Name': 'badge', 'Alias': 'b2', 'Startup Cost': 0.57, 'Total Cost': 4.55, 'Plan Rows': 1, 'Plan Width': 16, 'Actual Startup Time': 0.011, 'Actual Total Time': 0.011, 'Actual Rows': 3, 'Actual Loops': 179, 'Index Cond': "((site_id = b1.site_id) AND (user_id = b1.user_id) AND (name = 'Nice Question'::text) AND (date > (b1.date + '9 mons'::interval)))", 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'so_user', 'Startup Cost': 0.44, 'Total Cost': 4.83, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 527, 'Index Cond': '((id = b2.user_id) AND (site_id = b2.site_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'account', 'Startup Cost': 0.43, 'Total Cost': 4.62, 'Plan Rows': 1, 'Plan Width': 15, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 527, 'Index Cond': '(id = so_user.account_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((website_url)::text <> ''::text)", 'Rows Removed by Filter': 0, 'Workers': []}]}]}]}]}


sql file: q14-005.sql

sql: SELECT COUNT(*)
FROM
site as s,
so_user as u1,
question as q1,
answer as a1,
tag as t1,
tag_question as tq1,
badge as b,
account as acc
WHERE
s.site_id = q1.site_id
AND s.site_id = u1.site_id
AND s.site_id = a1.site_id
AND s.site_id = t1.site_id
AND s.site_id = tq1.site_id
AND s.site_id = b.site_id
AND q1.id = tq1.question_id
AND q1.id = a1.question_id
AND a1.owner_user_id = u1.id
AND t1.id = tq1.tag_id
AND b.user_id = u1.id
AND acc.id = u1.account_id
AND (s.site_name in ('mathoverflow','ru'))
AND (t1.name in ('homotopy-theory','функции'))
AND (q1.view_count >= 10)
AND (q1.view_count <= 1000)
AND (u1.reputation >= 0)
AND (u1.reputation <= 100)
AND (b.name in ('Autobiographer','Scholar','Student'))

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 12800.5, 'Total Cost': 12800.51, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 8.148, 'Actual Total Time': 8.149, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.44, 'Total Cost': 12800.5, 'Plan Rows': 1, 'Plan Width': 0, 'Actual Startup Time': 2.08, 'Actual Total Time': 8.145, 'Actual Rows': 43, 'Actual Loops': 1, 'Inner Unique': True, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.0, 'Total Cost': 12793.25, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 2.074, 'Actual Total Time': 8.064, 'Actual Rows': 43, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(s.site_id = b.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.44, 'Total Cost': 12789.21, 'Plan Rows': 1, 'Plan Width': 36, 'Actual Startup Time': 1.172, 'Actual Total Time': 7.949, 'Actual Rows': 36, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(s.site_id = q1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.0, 'Total Cost': 12781.94, 'Plan Rows': 1, 'Plan Width': 40, 'Actual Startup Time': 0.162, 'Actual Total Time': 7.786, 'Actual Rows': 50, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(s.site_id = u1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.56, 'Total Cost': 12774.67, 'Plan Rows': 1, 'Plan Width': 28, 'Actual Startup Time': 0.13, 'Actual Total Time': 6.147, 'Actual Rows': 1026, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(s.site_id = a1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.13, 'Total Cost': 12607.91, 'Plan Rows': 23, 'Plan Width': 16, 'Actual Startup Time': 0.123, 'Actual Total Time': 3.897, 'Actual Rows': 1757, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(s.site_id = tq1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.56, 'Total Cost': 12545.84, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.111, 'Actual Total Time': 2.819, 'Actual Rows': 2, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Index Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'site_pkey', 'Relation Name': 'site', 'Alias': 's', 'Startup Cost': 0.14, 'Total Cost': 15.17, 'Plan Rows': 2, 'Plan Width': 4, 'Actual Startup Time': 0.016, 'Actual Total Time': 0.022, 'Actual Rows': 2, 'Actual Loops': 1, 'Filter': "((site_name)::text = ANY ('{mathoverflow,ru}'::text[]))", 'Rows Removed by Filter': 171}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_pkey', 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.42, 'Total Cost': 6265.32, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.243, 'Actual Total Time': 1.397, 'Actual Rows': 1, 'Actual Loops': 2, 'Index Cond': '(site_id = s.site_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((name)::text = ANY ('{homotopy-theory,функции}'::text[]))", 'Rows Removed by Filter': 3002}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.69, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.01, 'Actual Total Time': 0.496, 'Actual Rows': 878, 'Actual Loops': 2, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 1757}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'answer_site_id_question_id_idx', 'Relation Name': 'answer', 'Alias': 'a1', 'Startup Cost': 0.43, 'Total Cost': 7.24, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 1757, 'Index Cond': '((site_id = tq1.site_id) AND (question_id = tq1.question_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 7.26, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 0, 'Actual Loops': 1026, 'Index Cond': '((id = a1.owner_user_id) AND (site_id = a1.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((reputation >= 0) AND (reputation <= 100))', 'Rows Removed by Filter': 1}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 7.25, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.003, 'Actual Rows': 1, 'Actual Loops': 50, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((view_count >= 10) AND (view_count <= 1000))', 'Rows Removed by Filter': 0}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'badge_pkey', 'Relation Name': 'badge', 'Alias': 'b', 'Startup Cost': 0.56, 'Total Cost': 4.03, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.003, 'Actual Rows': 1, 'Actual Loops': 36, 'Index Cond': '((site_id = a1.site_id) AND (user_id = a1.owner_user_id))', 'Rows Removed by Index Recheck': 0, 'Filter': "((name)::text = ANY ('{Autobiographer,Scholar,Student}'::text[]))", 'Rows Removed by Filter': 6, 'Heap Fetches': 0}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'acc', 'Startup Cost': 0.43, 'Total Cost': 7.25, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 43, 'Index Cond': '(id = u1.account_id)', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 43}]}]}


sql file: q6-001.sql

sql: select COUNT(distinct account.display_name)
from
tag t1, site s1, question q1, tag_question tq1, so_user u1, comment c1,
account
where
-- underappreciated (high votes, low views) questions with at least one comment
s1.site_name='dba' and
t1.name in ('cloud', 'contained-database') and
t1.site_id = s1.site_id and
q1.site_id = s1.site_id and
tq1.site_id = s1.site_id and
tq1.question_id = q1.id and
tq1.tag_id = t1.id and
q1.owner_user_id = u1.id and
q1.site_id = u1.site_id and
c1.site_id = q1.site_id and
c1.post_id = q1.id and
c1.score > q1.score and

-- to get the display name
account.id = u1.account_id;

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 7016.2, 'Total Cost': 7016.21, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 1.73, 'Actual Total Time': 1.731, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 7016.19, 'Total Cost': 7016.2, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 1.726, 'Actual Total Time': 1.727, 'Actual Rows': 2, 'Actual Loops': 1, 'Sort Key': ['account.display_name'], 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.0, 'Total Cost': 7016.18, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 0.574, 'Actual Total Time': 1.721, 'Actual Rows': 2, 'Actual Loops': 1, 'Inner Unique': True, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.57, 'Total Cost': 7008.55, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.568, 'Actual Total Time': 1.711, 'Actual Rows': 2, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '((c1.score > q1.score) AND (t1.site_id = c1.site_id))', 'Rows Removed by Join Filter': 53, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.0, 'Total Cost': 7000.75, 'Plan Rows': 1, 'Plan Width': 36, 'Actual Startup Time': 0.423, 'Actual Total Time': 1.605, 'Actual Rows': 27, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(t1.site_id = u1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.56, 'Total Cost': 6993.1, 'Plan Rows': 1, 'Plan Width': 32, 'Actual Startup Time': 0.417, 'Actual Total Time': 1.501, 'Actual Rows': 27, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(t1.site_id = q1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.13, 'Total Cost': 6817.31, 'Plan Rows': 23, 'Plan Width': 16, 'Actual Startup Time': 0.41, 'Actual Total Time': 1.404, 'Actual Rows': 27, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.56, 'Total Cost': 6755.31, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.4, 'Actual Total Time': 1.37, 'Actual Rows': 2, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Index Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'site_pkey', 'Relation Name': 'site', 'Alias': 's1', 'Startup Cost': 0.14, 'Total Cost': 15.17, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.013, 'Actual Total Time': 0.018, 'Actual Rows': 1, 'Actual Loops': 1, 'Filter': "((site_name)::text = 'dba'::text)", 'Rows Removed by Filter': 172}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_pkey', 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.42, 'Total Cost': 6740.13, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.386, 'Actual Total Time': 1.351, 'Actual Rows': 2, 'Actual Loops': 1, 'Index Cond': '(site_id = s1.site_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((name)::text = ANY ('{cloud,contained-database}'::text[]))", 'Rows Removed by Filter': 1117}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.69, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.006, 'Actual Total Time': 0.015, 'Actual Rows': 14, 'Actual Loops': 2, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 7.63, 'Plan Rows': 1, 'Plan Width': 16, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.003, 'Actual Rows': 1, 'Actual Loops': 27, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 7.64, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.004, 'Actual Total Time': 0.004, 'Actual Rows': 1, 'Actual Loops': 27, 'Index Cond': '((id = q1.owner_user_id) AND (site_id = q1.site_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'comment_site_id_post_id_idx', 'Relation Name': 'comment', 'Alias': 'c1', 'Startup Cost': 0.57, 'Total Cost': 7.79, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.004, 'Actual Rows': 2, 'Actual Loops': 27, 'Index Cond': '((site_id = tq1.site_id) AND (post_id = tq1.question_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'account', 'Startup Cost': 0.43, 'Total Cost': 7.63, 'Plan Rows': 1, 'Plan Width': 15, 'Actual Startup Time': 0.005, 'Actual Total Time': 0.005, 'Actual Rows': 1, 'Actual Loops': 2, 'Index Cond': '(id = u1.account_id)', 'Rows Removed by Index Recheck': 0}]}]}]}


sql file: q6-005.sql

sql: select COUNT(distinct account.display_name)
from
tag t1, site s1, question q1, tag_question tq1, so_user u1, comment c1,
account
where
-- underappreciated (high votes, low views) questions with at least one comment
s1.site_name='avp' and
t1.name in ('editing', 'footage', 'nikon', 'cc-2017') and
t1.site_id = s1.site_id and
q1.site_id = s1.site_id and
tq1.site_id = s1.site_id and
tq1.question_id = q1.id and
tq1.tag_id = t1.id and
q1.owner_user_id = u1.id and
q1.site_id = u1.site_id and
c1.site_id = q1.site_id and
c1.post_id = q1.id and
c1.score > q1.score and

-- to get the display name
account.id = u1.account_id;

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 7018.9, 'Total Cost': 7018.91, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 2.597, 'Actual Total Time': 2.598, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 7018.89, 'Total Cost': 7018.9, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 2.591, 'Actual Total Time': 2.592, 'Actual Rows': 20, 'Actual Loops': 1, 'Sort Key': ['account.display_name'], 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.0, 'Total Cost': 7018.88, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 0.413, 'Actual Total Time': 2.582, 'Actual Rows': 20, 'Actual Loops': 1, 'Inner Unique': True, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.57, 'Total Cost': 7011.25, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.407, 'Actual Total Time': 2.525, 'Actual Rows': 20, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '((c1.score > q1.score) AND (t1.site_id = c1.site_id))', 'Rows Removed by Join Filter': 239, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.0, 'Total Cost': 7003.45, 'Plan Rows': 1, 'Plan Width': 36, 'Actual Startup Time': 0.117, 'Actual Total Time': 2.211, 'Actual Rows': 159, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(t1.site_id = u1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.56, 'Total Cost': 6995.8, 'Plan Rows': 1, 'Plan Width': 32, 'Actual Startup Time': 0.11, 'Actual Total Time': 1.792, 'Actual Rows': 159, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(t1.site_id = q1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.13, 'Total Cost': 6820.01, 'Plan Rows': 23, 'Plan Width': 16, 'Actual Startup Time': 0.102, 'Actual Total Time': 1.384, 'Actual Rows': 159, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.56, 'Total Cost': 6758.01, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.091, 'Actual Total Time': 1.308, 'Actual Rows': 4, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Index Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'site_pkey', 'Relation Name': 'site', 'Alias': 's1', 'Startup Cost': 0.14, 'Total Cost': 15.17, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.014, 'Actual Total Time': 0.02, 'Actual Rows': 1, 'Actual Loops': 1, 'Filter': "((site_name)::text = 'avp'::text)", 'Rows Removed by Filter': 172}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_pkey', 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.42, 'Total Cost': 6742.83, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.076, 'Actual Total Time': 1.286, 'Actual Rows': 4, 'Actual Loops': 1, 'Index Cond': '(site_id = s1.site_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((name)::text = ANY ('{editing,footage,nikon,cc-2017}'::text[]))", 'Rows Removed by Filter': 312}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.69, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.004, 'Actual Total Time': 0.017, 'Actual Rows': 40, 'Actual Loops': 4, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 7.63, 'Plan Rows': 1, 'Plan Width': 16, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 159, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 7.64, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 159, 'Index Cond': '((id = q1.owner_user_id) AND (site_id = q1.site_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'comment_site_id_post_id_idx', 'Relation Name': 'comment', 'Alias': 'c1', 'Startup Cost': 0.57, 'Total Cost': 7.79, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.002, 'Actual Rows': 2, 'Actual Loops': 159, 'Index Cond': '((site_id = tq1.site_id) AND (post_id = tq1.question_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'account', 'Startup Cost': 0.43, 'Total Cost': 7.63, 'Plan Rows': 1, 'Plan Width': 15, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.003, 'Actual Rows': 1, 'Actual Loops': 20, 'Index Cond': '(id = u1.account_id)', 'Rows Removed by Index Recheck': 0}]}]}]}


sql file: q14-002.sql

sql: SELECT COUNT(*)
FROM
site as s,
so_user as u1,
question as q1,
answer as a1,
tag as t1,
tag_question as tq1,
badge as b,
account as acc
WHERE
s.site_id = q1.site_id
AND s.site_id = u1.site_id
AND s.site_id = a1.site_id
AND s.site_id = t1.site_id
AND s.site_id = tq1.site_id
AND s.site_id = b.site_id
AND q1.id = tq1.question_id
AND q1.id = a1.question_id
AND a1.owner_user_id = u1.id
AND t1.id = tq1.tag_id
AND b.user_id = u1.id
AND acc.id = u1.account_id
AND (s.site_name in ('superuser'))
AND (t1.name in ('bash','boot','command-line','google-chrome','laptop','microsoft-excel-2010','microsoft-word','partitioning','router','windows-8'))
AND (q1.view_count >= 0)
AND (q1.view_count <= 100)
AND (u1.downvotes >= 0)
AND (u1.downvotes <= 1)
AND (b.name ILIKE '%su%')

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 4044.09, 'Total Cost': 4044.1, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 59.844, 'Actual Total Time': 62.606, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1006.07, 'Total Cost': 4044.09, 'Plan Rows': 1, 'Plan Width': 0, 'Actual Startup Time': 10.942, 'Actual Total Time': 62.594, 'Actual Rows': 258, 'Actual Loops': 1, 'Inner Unique': True, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1005.63, 'Total Cost': 4036.84, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 10.939, 'Actual Total Time': 61.966, 'Actual Rows': 258, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '((s.site_id = b.site_id) AND (b.user_id = a1.owner_user_id))', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1005.07, 'Total Cost': 4029.36, 'Plan Rows': 1, 'Plan Width': 36, 'Actual Startup Time': 9.569, 'Actual Total Time': 58.868, 'Actual Rows': 386, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(s.site_id = q1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1004.63, 'Total Cost': 4022.09, 'Plan Rows': 1, 'Plan Width': 40, 'Actual Startup Time': 5.557, 'Actual Total Time': 44.903, 'Actual Rows': 8613, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(s.site_id = u1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Gather', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 1004.2, 'Total Cost': 4014.82, 'Plan Rows': 1, 'Plan Width': 28, 'Actual Startup Time': 5.542, 'Actual Total Time': 17.411, 'Actual Rows': 18987, 'Actual Loops': 1, 'Workers Planned': 1, 'Workers Launched': 1, 'Single Copy': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.2, 'Total Cost': 3014.72, 'Plan Rows': 1, 'Plan Width': 28, 'Actual Startup Time': 4.347, 'Actual Total Time': 32.798, 'Actual Rows': 9494, 'Actual Loops': 2, 'Inner Unique': False, 'Join Filter': '(s.site_id = a1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.77, 'Total Cost': 2913.21, 'Plan Rows': 14, 'Plan Width': 16, 'Actual Startup Time': 4.338, 'Actual Total Time': 12.462, 'Actual Rows': 20196, 'Actual Loops': 2, 'Inner Unique': False, 'Join Filter': '(s.site_id = tq1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.2, 'Total Cost': 2851.21, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 4.323, 'Actual Total Time': 4.812, 'Actual Rows': 5, 'Actual Loops': 2, 'Inner Unique': True, 'Hash Cond': '(t1.site_id = s.site_id)', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.03, 'Total Cost': 2848.0, 'Plan Rows': 15, 'Plan Width': 8, 'Actual Startup Time': 0.055, 'Actual Total Time': 4.763, 'Actual Rows': 76, 'Actual Loops': 2, 'Filter': "((name)::text = ANY ('{bash,boot,command-line,google-chrome,laptop,microsoft-excel-2010,microsoft-word,partitioning,router,windows-8}'::text[]))", 'Rows Removed by Filter': 93309, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3.16, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.013, 'Actual Total Time': 0.013, 'Actual Rows': 1, 'Actual Loops': 2, 'Hash Buckets': 1024, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 9, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Relation Name': 'site', 'Alias': 's', 'Startup Cost': 0.0, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.01, 'Actual Total Time': 0.011, 'Actual Rows': 1, 'Actual Loops': 2, 'Filter': "((site_name)::text = 'superuser'::text)", 'Rows Removed by Filter': 172, 'Workers': []}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.62, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.008, 'Actual Total Time': 1.299, 'Actual Rows': 4039, 'Actual Loops': 10, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'answer_site_id_question_id_idx', 'Relation Name': 'answer', 'Alias': 'a1', 'Startup Cost': 0.43, 'Total Cost': 7.24, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 0, 'Actual Loops': 40391, 'Index Cond': '((site_id = tq1.site_id) AND (question_id = tq1.question_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 7.26, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 0, 'Actual Loops': 18987, 'Index Cond': '((id = a1.owner_user_id) AND (site_id = a1.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((downvotes >= 0) AND (downvotes <= 1))', 'Rows Removed by Filter': 1}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 7.25, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 0, 'Actual Loops': 8613, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((view_count >= 0) AND (view_count <= 100))', 'Rows Removed by Filter': 1}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'badge_pkey', 'Relation Name': 'badge', 'Alias': 'b', 'Startup Cost': 0.56, 'Total Cost': 7.47, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.007, 'Actual Total Time': 0.008, 'Actual Rows': 1, 'Actual Loops': 386, 'Index Cond': '((site_id = u1.site_id) AND (user_id = u1.id))', 'Rows Removed by Index Recheck': 0, 'Filter': "((name)::text ~~* '%su%'::text)", 'Rows Removed by Filter': 7}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'acc', 'Startup Cost': 0.43, 'Total Cost': 7.25, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 258, 'Index Cond': '(id = u1.account_id)', 'Rows Removed by Index Recheck': 0}]}]}


sql file: q5-004.sql

sql: select COUNT(distinct account.display_name)
from
tag t1, site s1, question q1, tag_question tq1, so_user u1, comment c1,
account
where
-- underappreciated (high votes, low views) questions with at least one comment
s1.site_name='ux' and
t1.name in ('design-patterns', 'user-centered-design') and
t1.site_id = s1.site_id and
q1.site_id = s1.site_id and
tq1.site_id = s1.site_id and
tq1.question_id = q1.id and
tq1.tag_id = t1.id and
q1.owner_user_id = u1.id and
q1.site_id = u1.site_id and
q1.score > 15 and
q1.view_count < 2936 and
c1.site_id = q1.site_id and
c1.post_id = q1.id and

-- to get the display name
account.id = u1.account_id;

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 7016.33, 'Total Cost': 7016.34, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 3.231, 'Actual Total Time': 3.232, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 7016.32, 'Total Cost': 7016.33, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 3.225, 'Actual Total Time': 3.226, 'Actual Rows': 20, 'Actual Loops': 1, 'Sort Key': ['account.display_name'], 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.0, 'Total Cost': 7016.31, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 0.217, 'Actual Total Time': 3.218, 'Actual Rows': 20, 'Actual Loops': 1, 'Inner Unique': True, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.57, 'Total Cost': 7008.69, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.21, 'Actual Total Time': 3.193, 'Actual Rows': 20, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(t1.site_id = c1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.0, 'Total Cost': 7000.89, 'Plan Rows': 1, 'Plan Width': 32, 'Actual Startup Time': 0.202, 'Actual Total Time': 3.165, 'Actual Rows': 4, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(t1.site_id = u1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.56, 'Total Cost': 6993.22, 'Plan Rows': 1, 'Plan Width': 28, 'Actual Startup Time': 0.196, 'Actual Total Time': 3.146, 'Actual Rows': 4, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(t1.site_id = q1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.13, 'Total Cost': 6817.31, 'Plan Rows': 23, 'Plan Width': 16, 'Actual Startup Time': 0.093, 'Actual Total Time': 1.623, 'Actual Rows': 565, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.56, 'Total Cost': 6755.31, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.082, 'Actual Total Time': 1.358, 'Actual Rows': 2, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Index Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'site_pkey', 'Relation Name': 'site', 'Alias': 's1', 'Startup Cost': 0.14, 'Total Cost': 15.17, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.018, 'Actual Total Time': 0.019, 'Actual Rows': 1, 'Actual Loops': 1, 'Filter': "((site_name)::text = 'ux'::text)", 'Rows Removed by Filter': 172}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_pkey', 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.42, 'Total Cost': 6740.13, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.063, 'Actual Total Time': 1.337, 'Actual Rows': 2, 'Actual Loops': 1, 'Index Cond': '(site_id = s1.site_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((name)::text = ANY ('{design-patterns,user-centered-design}'::text[]))", 'Rows Removed by Filter': 1028}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.69, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.008, 'Actual Total Time': 0.119, 'Actual Rows': 282, 'Actual Loops': 2, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 7.64, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.003, 'Actual Rows': 0, 'Actual Loops': 565, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((score > 15) AND (view_count < 2936))', 'Rows Removed by Filter': 1}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 7.65, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.004, 'Actual Total Time': 0.004, 'Actual Rows': 1, 'Actual Loops': 4, 'Index Cond': '((id = q1.owner_user_id) AND (site_id = q1.site_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'comment_site_id_post_id_idx', 'Relation Name': 'comment', 'Alias': 'c1', 'Startup Cost': 0.57, 'Total Cost': 7.79, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.004, 'Actual Total Time': 0.007, 'Actual Rows': 5, 'Actual Loops': 4, 'Index Cond': '((site_id = tq1.site_id) AND (post_id = tq1.question_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'account', 'Startup Cost': 0.43, 'Total Cost': 7.63, 'Plan Rows': 1, 'Plan Width': 15, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 20, 'Index Cond': '(id = u1.account_id)', 'Rows Removed by Index Recheck': 0}]}]}]}


sql file: q16-003.sql

sql: SELECT COUNT(*)
FROM
site as s,
so_user as u1,
tag as t1,
tag_question as tq1,
question as q1,
badge as b1,
account as acc
WHERE
s.site_id = u1.site_id
AND s.site_id = b1.site_id
AND s.site_id = t1.site_id
AND s.site_id = tq1.site_id
AND s.site_id = q1.site_id
AND t1.id = tq1.tag_id
AND q1.id = tq1.question_id
AND q1.owner_user_id = u1.id
AND acc.id = u1.account_id
AND b1.user_id = u1.id
AND (q1.favorite_count >= 0)
AND (q1.favorite_count <= 1)
AND s.site_name = 'stackoverflow'
AND (t1.name in ('avaudiosession','bayesian','eclipse-cdt','es6-modules','functor','guzzle','has-and-belongs-to-many','keychain','nib','nsurlrequest','qa','simple-form'))
AND (acc.website_url ILIKE ('%de'))

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 4034.63, 'Total Cost': 4034.64, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 111.789, 'Actual Total Time': 111.826, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1005.64, 'Total Cost': 4034.62, 'Plan Rows': 1, 'Plan Width': 0, 'Actual Startup Time': 37.521, 'Actual Total Time': 111.813, 'Actual Rows': 400, 'Actual Loops': 1, 'Inner Unique': True, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1005.21, 'Total Cost': 4027.73, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 4.114, 'Actual Total Time': 25.716, 'Actual Rows': 128126, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '((s.site_id = b1.site_id) AND (b1.user_id = q1.owner_user_id))', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Gather', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 1004.64, 'Total Cost': 4023.85, 'Plan Rows': 1, 'Plan Width': 32, 'Actual Startup Time': 4.107, 'Actual Total Time': 5.903, 'Actual Rows': 1625, 'Actual Loops': 1, 'Workers Planned': 1, 'Workers Launched': 1, 'Single Copy': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.64, 'Total Cost': 3023.75, 'Plan Rows': 1, 'Plan Width': 32, 'Actual Startup Time': 3.051, 'Actual Total Time': 23.478, 'Actual Rows': 812, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(s.site_id = u1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.21, 'Total Cost': 3009.9, 'Plan Rows': 2, 'Plan Width': 20, 'Actual Startup Time': 3.042, 'Actual Total Time': 21.039, 'Actual Rows': 812, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(s.site_id = q1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.77, 'Total Cost': 2913.18, 'Plan Rows': 14, 'Plan Width': 16, 'Actual Startup Time': 3.025, 'Actual Total Time': 9.253, 'Actual Rows': 4230, 'Actual Loops': 2, 'Inner Unique': False, 'Join Filter': '(s.site_id = tq1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.21, 'Total Cost': 2851.22, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 3.007, 'Actual Total Time': 4.98, 'Actual Rows': 6, 'Actual Loops': 2, 'Inner Unique': True, 'Hash Cond': '(t1.site_id = s.site_id)', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.03, 'Total Cost': 2848.0, 'Plan Rows': 18, 'Plan Width': 8, 'Actual Startup Time': 0.415, 'Actual Total Time': 4.944, 'Actual Rows': 16, 'Actual Loops': 2, 'Filter': "((name)::text = ANY ('{avaudiosession,bayesian,eclipse-cdt,es6-modules,functor,guzzle,has-and-belongs-to-many,keychain,nib,nsurlrequest,qa,simple-form}'::text[]))", 'Rows Removed by Filter': 93370, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3.16, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.01, 'Actual Total Time': 0.011, 'Actual Rows': 1, 'Actual Loops': 2, 'Hash Buckets': 1024, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 9, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Relation Name': 'site', 'Alias': 's', 'Startup Cost': 0.0, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.008, 'Actual Total Time': 0.009, 'Actual Rows': 1, 'Actual Loops': 2, 'Filter': "((site_name)::text = 'stackoverflow'::text)", 'Rows Removed by Filter': 172, 'Workers': []}]}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.57, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.008, 'Actual Total Time': 0.675, 'Actual Rows': 705, 'Actual Loops': 12, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 8461, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 6.9, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.003, 'Actual Rows': 0, 'Actual Loops': 8461, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((favorite_count >= 0) AND (favorite_count <= 1))', 'Rows Removed by Filter': 1, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 6.91, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.003, 'Actual Rows': 1, 'Actual Loops': 1625, 'Index Cond': '((id = q1.owner_user_id) AND (site_id = q1.site_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'badge_pkey', 'Relation Name': 'badge', 'Alias': 'b1', 'Startup Cost': 0.56, 'Total Cost': 3.87, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.008, 'Actual Rows': 79, 'Actual Loops': 1625, 'Index Cond': '((site_id = u1.site_id) AND (user_id = u1.id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'acc', 'Startup Cost': 0.43, 'Total Cost': 6.89, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 0, 'Actual Loops': 128126, 'Index Cond': '(id = u1.account_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((website_url)::text ~~* '%de'::text)", 'Rows Removed by Filter': 1}]}]}


sql file: q9-005.sql

sql: select count(distinct account.id) from
account, site, so_user, question q, post_link pl, tag, tag_question tq where
not exists (select * from answer a where a.site_id = q.site_id and a.question_id = q.id) and
site.site_name = 'stackoverflow' and
site.site_id = q.site_id and
pl.site_id = q.site_id and
pl.post_id_to = q.id and

tag.name = 'opencv' and
tag.site_id = q.site_id and

q.creation_date > '2016-01-01'::date and

tq.site_id = tag.site_id and
tq.tag_id = tag.id and
tq.question_id = q.id and

q.owner_user_id = so_user.id and
q.site_id = so_user.site_id and
so_user.reputation > 124 and

account.id = so_user.account_id and
account.website_url != '';

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3321796.34, 'Total Cost': 3321796.35, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 1716.291, 'Actual Total Time': 1730.834, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3321796.33, 'Total Cost': 3321796.34, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 1716.282, 'Actual Total Time': 1730.825, 'Actual Rows': 39, 'Actual Loops': 1, 'Sort Key': ['account.id'], 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Gather', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 2510872.51, 'Total Cost': 3321796.32, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 1716.08, 'Actual Total Time': 1730.815, 'Actual Rows': 39, 'Actual Loops': 1, 'Workers Planned': 7, 'Workers Launched': 7, 'Single Copy': False, 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Join Type': 'Right Anti', 'Startup Cost': 2509872.51, 'Total Cost': 3320796.22, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 1713.821, 'Actual Total Time': 1713.834, 'Actual Rows': 5, 'Actual Loops': 8, 'Inner Unique': False, 'Hash Cond': '((a.site_id = q.site_id) AND (a.question_id = q.id))', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'answer', 'Alias': 'a', 'Startup Cost': 0.0, 'Total Cost': 804116.4, 'Plan Rows': 907640, 'Plan Width': 8, 'Actual Startup Time': 0.02, 'Actual Total Time': 154.852, 'Actual Rows': 793444, 'Actual Loops': 8, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': True, 'Async Capable': False, 'Startup Cost': 2509872.49, 'Total Cost': 2509872.49, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 1510.127, 'Actual Total Time': 1510.138, 'Actual Rows': 16, 'Actual Loops': 8, 'Hash Buckets': 1024, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 264, 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2482641.96, 'Total Cost': 2509872.49, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 1500.512, 'Actual Total Time': 1510.11, 'Actual Rows': 16, 'Actual Loops': 8, 'Inner Unique': False, 'Hash Cond': '((pl.site_id = site.site_id) AND (pl.post_id_to = q.id))', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'post_link', 'Alias': 'pl', 'Startup Cost': 0.0, 'Total Cost': 21752.3, 'Plan Rows': 730430, 'Plan Width': 8, 'Actual Startup Time': 0.005, 'Actual Total Time': 11.99, 'Actual Rows': 283042, 'Actual Loops': 8, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': True, 'Async Capable': False, 'Startup Cost': 2482641.94, 'Total Cost': 2482641.94, 'Plan Rows': 1, 'Plan Width': 32, 'Actual Startup Time': 1485.236, 'Actual Total Time': 1485.246, 'Actual Rows': 100, 'Actual Loops': 8, 'Hash Buckets': 1024, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 264, 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2333063.95, 'Total Cost': 2482641.94, 'Plan Rows': 1, 'Plan Width': 32, 'Actual Startup Time': 1421.1, 'Actual Total Time': 1485.217, 'Actual Rows': 100, 'Actual Loops': 8, 'Inner Unique': False, 'Hash Cond': '(account.id = so_user.account_id)', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'account', 'Alias': 'account', 'Startup Cost': 0.0, 'Total Cost': 149034.54, 'Plan Rows': 144919, 'Plan Width': 4, 'Actual Startup Time': 0.019, 'Actual Total Time': 68.345, 'Actual Rows': 90584, 'Actual Loops': 8, 'Filter': "((website_url)::text <> ''::text)", 'Rows Removed by Filter': 1643435, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': True, 'Async Capable': False, 'Startup Cost': 2333063.93, 'Total Cost': 2333063.93, 'Plan Rows': 1, 'Plan Width': 32, 'Actual Startup Time': 1412.37, 'Actual Total Time': 1412.378, 'Actual Rows': 509, 'Actual Loops': 8, 'Hash Buckets': 4096, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 472, 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2081174.74, 'Total Cost': 2333063.93, 'Plan Rows': 1, 'Plan Width': 32, 'Actual Startup Time': 1319.251, 'Actual Total Time': 1411.874, 'Actual Rows': 509, 'Actual Loops': 8, 'Inner Unique': False, 'Hash Cond': '((so_user.site_id = site.site_id) AND (so_user.id = q.owner_user_id))', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'so_user', 'Alias': 'so_user', 'Startup Cost': 0.0, 'Total Cost': 249942.21, 'Plan Rows': 259596, 'Plan Width': 12, 'Actual Startup Time': 0.022, 'Actual Total Time': 83.577, 'Actual Rows': 158484, 'Actual Loops': 8, 'Filter': '(reputation > 124)', 'Rows Removed by Filter': 2478679, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': True, 'Async Capable': False, 'Startup Cost': 2081174.73, 'Total Cost': 2081174.73, 'Plan Rows': 1, 'Plan Width': 28, 'Actual Startup Time': 1318.853, 'Actual Total Time': 1318.859, 'Actual Rows': 1650, 'Actual Loops': 8, 'Hash Buckets': 16384, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 1272, 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 295801.63, 'Total Cost': 2081174.73, 'Plan Rows': 1, 'Plan Width': 28, 'Actual Startup Time': 988.702, 'Actual Total Time': 1223.898, 'Actual Rows': 1650, 'Actual Loops': 8, 'Inner Unique': False, 'Hash Cond': '((q.site_id = site.site_id) AND (q.id = tq.question_id))', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'question', 'Alias': 'q', 'Startup Cost': 0.0, 'Total Cost': 1779220.98, 'Plan Rows': 820281, 'Plan Width': 12, 'Actual Startup Time': 1.01, 'Actual Total Time': 352.942, 'Actual Rows': 726054, 'Actual Loops': 8, 'Filter': "(creation_date > '2016-01-01'::date)", 'Rows Removed by Filter': 857251, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': True, 'Async Capable': False, 'Startup Cost': 295801.55, 'Total Cost': 295801.55, 'Plan Rows': 5, 'Plan Width': 16, 'Actual Startup Time': 831.221, 'Actual Total Time': 831.226, 'Actual Rows': 3234, 'Actual Loops': 8, 'Hash Buckets': 32768, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 1784, 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2576.51, 'Total Cost': 295801.55, 'Plan Rows': 5, 'Plan Width': 16, 'Actual Startup Time': 1.132, 'Actual Total Time': 561.932, 'Actual Rows': 3234, 'Actual Loops': 8, 'Inner Unique': True, 'Hash Cond': '((site.site_id = tag.site_id) AND (tq.tag_id = tag.id))', 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.18, 'Total Cost': 293004.34, 'Plan Rows': 42642, 'Plan Width': 16, 'Actual Startup Time': 0.05, 'Actual Total Time': 450.224, 'Actual Rows': 3477604, 'Actual Loops': 8, 'Inner Unique': True, 'Hash Cond': '(tq.site_id = site.site_id)', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag_question', 'Alias': 'tq', 'Startup Cost': 0.0, 'Total Cost': 273162.12, 'Plan Rows': 7377012, 'Plan Width': 12, 'Actual Startup Time': 0.027, 'Actual Total Time': 171.326, 'Actual Rows': 4610477, 'Actual Loops': 8, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3.16, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.014, 'Actual Total Time': 0.015, 'Actual Rows': 1, 'Actual Loops': 8, 'Hash Buckets': 1024, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 9, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Relation Name': 'site', 'Alias': 'site', 'Startup Cost': 0.0, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.012, 'Actual Total Time': 0.013, 'Actual Rows': 1, 'Actual Loops': 8, 'Filter': "((site_name)::text = 'stackoverflow'::text)", 'Rows Removed by Filter': 172, 'Workers': []}]}]}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': True, 'Async Capable': False, 'Startup Cost': 2573.31, 'Total Cost': 2573.31, 'Plan Rows': 2, 'Plan Width': 8, 'Actual Startup Time': 0.968, 'Actual Total Time': 0.968, 'Actual Rows': 2, 'Actual Loops': 8, 'Hash Buckets': 1024, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 168, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 'tag', 'Startup Cost': 0.0, 'Total Cost': 2573.31, 'Plan Rows': 2, 'Plan Width': 8, 'Actual Startup Time': 0.385, 'Actual Total Time': 0.946, 'Actual Rows': 2, 'Actual Loops': 8, 'Filter': "((name)::text = 'opencv'::text)", 'Rows Removed by Filter': 23344, 'Workers': []}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}


sql file: q3-004.sql

sql: select COUNT(distinct account.display_name)
from
tag t1, site s1, question q1, answer a1, tag_question tq1, so_user u1,
tag t2, site s2, question q2, tag_question tq2, so_user u2,
account
where
-- answerers
s1.site_name='stackoverflow' and
t1.name  = 'audio' and
t1.site_id = s1.site_id and
q1.site_id = s1.site_id and
tq1.site_id = s1.site_id and
tq1.question_id = q1.id and
tq1.tag_id = t1.id and
a1.site_id = q1.site_id and
a1.question_id = q1.id and
a1.owner_user_id = u1.id and
a1.site_id = u1.site_id and

-- askers
s2.site_name='superuser' and
t2.name  = 'networking' and
t2.site_id = s2.site_id and
q2.site_id = s2.site_id and
tq2.site_id = s2.site_id and
tq2.question_id = q2.id and
tq2.tag_id = t2.id and
q2.owner_user_id = u2.id and
q2.site_id = u2.site_id and


-- intersect
u1.account_id = u2.account_id and
account.id = u1.account_id;

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 6522.33, 'Total Cost': 6522.34, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 121.706, 'Actual Total Time': 137.82, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 6522.32, 'Total Cost': 6522.32, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 121.69, 'Actual Total Time': 137.808, 'Actual Rows': 185, 'Actual Loops': 1, 'Sort Key': ['account.display_name'], 'Sort Method': 'quicksort', 'Sort Space Used': 28, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3758.89, 'Total Cost': 6522.31, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 120.745, 'Actual Total Time': 137.757, 'Actual Rows': 185, 'Actual Loops': 1, 'Inner Unique': True, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3758.46, 'Total Cost': 6514.65, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 120.736, 'Actual Total Time': 137.387, 'Actual Rows': 185, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(t1.site_id = q1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Gather', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3758.02, 'Total Cost': 6506.98, 'Plan Rows': 1, 'Plan Width': 36, 'Actual Startup Time': 120.723, 'Actual Total Time': 136.845, 'Actual Rows': 185, 'Actual Loops': 1, 'Workers Planned': 1, 'Workers Launched': 1, 'Single Copy': False, 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2758.02, 'Total Cost': 5506.88, 'Plan Rows': 1, 'Plan Width': 36, 'Actual Startup Time': 53.678, 'Actual Total Time': 86.465, 'Actual Rows': 92, 'Actual Loops': 2, 'Inner Unique': False, 'Hash Cond': '(u1.account_id = u2.account_id)', 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.61, 'Total Cost': 2753.46, 'Plan Rows': 1, 'Plan Width': 32, 'Actual Startup Time': 3.434, 'Actual Total Time': 36.223, 'Actual Rows': 2283, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(t1.site_id = u1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.17, 'Total Cost': 2745.78, 'Plan Rows': 1, 'Plan Width': 28, 'Actual Startup Time': 3.346, 'Actual Total Time': 28.321, 'Actual Rows': 2283, 'Actual Loops': 2, 'Inner Unique': False, 'Join Filter': '(t1.site_id = a1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.74, 'Total Cost': 2638.48, 'Plan Rows': 14, 'Plan Width': 16, 'Actual Startup Time': 3.279, 'Actual Total Time': 11.84, 'Actual Rows': 6776, 'Actual Loops': 2, 'Inner Unique': False, 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.18, 'Total Cost': 2576.49, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 3.147, 'Actual Total Time': 3.15, 'Actual Rows': 0, 'Actual Loops': 2, 'Inner Unique': True, 'Hash Cond': '(t1.site_id = s1.site_id)', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.0, 'Total Cost': 2573.31, 'Plan Rows': 2, 'Plan Width': 8, 'Actual Startup Time': 0.074, 'Actual Total Time': 3.113, 'Actual Rows': 20, 'Actual Loops': 2, 'Filter': "((name)::text = 'audio'::text)", 'Rows Removed by Filter': 93364, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3.16, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.011, 'Actual Total Time': 0.012, 'Actual Rows': 1, 'Actual Loops': 2, 'Hash Buckets': 1024, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 9, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Relation Name': 'site', 'Alias': 's1', 'Startup Cost': 0.0, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.008, 'Actual Total Time': 0.009, 'Actual Rows': 1, 'Actual Loops': 2, 'Filter': "((site_name)::text = 'stackoverflow'::text)", 'Rows Removed by Filter': 172, 'Workers': []}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.69, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.26, 'Actual Total Time': 16.628, 'Actual Rows': 13552, 'Actual Loops': 1, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'answer_site_id_question_id_idx', 'Relation Name': 'answer', 'Alias': 'a1', 'Startup Cost': 0.43, 'Total Cost': 7.65, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 0, 'Actual Loops': 13552, 'Index Cond': '((site_id = tq1.site_id) AND (question_id = tq1.question_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 7.66, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.003, 'Actual Rows': 1, 'Actual Loops': 4566, 'Index Cond': '((id = a1.owner_user_id) AND (site_id = a1.site_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': True, 'Async Capable': False, 'Startup Cost': 2753.4, 'Total Cost': 2753.4, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 49.926, 'Actual Total Time': 49.928, 'Actual Rows': 6140, 'Actual Loops': 2, 'Hash Buckets': 16384, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 760, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.61, 'Total Cost': 2753.4, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 3.091, 'Actual Total Time': 26.252, 'Actual Rows': 6140, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(t2.site_id = u2.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.17, 'Total Cost': 2745.73, 'Plan Rows': 1, 'Plan Width': 20, 'Actual Startup Time': 3.087, 'Actual Total Time': 15.186, 'Actual Rows': 6140, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(t2.site_id = q2.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.74, 'Total Cost': 2638.35, 'Plan Rows': 14, 'Plan Width': 16, 'Actual Startup Time': 3.084, 'Actual Total Time': 5.351, 'Actual Rows': 6140, 'Actual Loops': 2, 'Inner Unique': False, 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.18, 'Total Cost': 2576.57, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 3.077, 'Actual Total Time': 3.08, 'Actual Rows': 0, 'Actual Loops': 2, 'Inner Unique': True, 'Hash Cond': '(t2.site_id = s2.site_id)', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 't2', 'Startup Cost': 0.0, 'Total Cost': 2573.31, 'Plan Rows': 33, 'Plan Width': 8, 'Actual Startup Time': 0.684, 'Actual Total Time': 3.061, 'Actual Rows': 17, 'Actual Loops': 2, 'Filter': "((name)::text = 'networking'::text)", 'Rows Removed by Filter': 93368, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3.16, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.013, 'Actual Total Time': 0.013, 'Actual Rows': 1, 'Actual Loops': 2, 'Hash Buckets': 1024, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 9, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Relation Name': 'site', 'Alias': 's2', 'Startup Cost': 0.0, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.01, 'Actual Total Time': 0.011, 'Actual Rows': 1, 'Actual Loops': 2, 'Filter': "((site_name)::text = 'superuser'::text)", 'Rows Removed by Filter': 172, 'Workers': []}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq2', 'Startup Cost': 0.56, 'Total Cost': 61.47, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.011, 'Actual Total Time': 3.959, 'Actual Rows': 12281, 'Actual Loops': 1, 'Index Cond': '((site_id = t2.site_id) AND (tag_id = t2.id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q2', 'Startup Cost': 0.43, 'Total Cost': 7.66, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 12281, 'Index Cond': '((id = tq2.question_id) AND (site_id = tq2.site_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u2', 'Startup Cost': 0.44, 'Total Cost': 7.66, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 12281, 'Index Cond': '((id = q2.owner_user_id) AND (site_id = q2.site_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}]}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 7.66, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.003, 'Actual Rows': 1, 'Actual Loops': 185, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'account', 'Startup Cost': 0.43, 'Total Cost': 7.65, 'Plan Rows': 1, 'Plan Width': 15, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 185, 'Index Cond': '(id = u1.account_id)', 'Rows Removed by Index Recheck': 0}]}]}]}


sql file: q11-004.sql

sql: SELECT COUNT(*)
FROM
tag as t,
site as s,
question as q,
tag_question as tq
WHERE
t.site_id = s.site_id
AND q.site_id = s.site_id
AND tq.site_id = s.site_id
AND tq.question_id = q.id
AND tq.tag_id = t.id
AND (s.site_name in ('stackoverflow'))
AND (t.name in ('browser','data-binding','json','unix'))
AND (q.favorite_count >= 1)
AND (q.favorite_count <= 10)

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 4077.13, 'Total Cost': 4077.14, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 425.42, 'Actual Total Time': 425.483, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Gather', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 1001.15, 'Total Cost': 4077.13, 'Plan Rows': 1, 'Plan Width': 0, 'Actual Startup Time': 4.162, 'Actual Total Time': 424.652, 'Actual Rows': 33909, 'Actual Loops': 1, 'Workers Planned': 1, 'Workers Launched': 1, 'Single Copy': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.16, 'Total Cost': 3077.03, 'Plan Rows': 1, 'Plan Width': 0, 'Actual Startup Time': 3.152, 'Actual Total Time': 316.617, 'Actual Rows': 16954, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(t.site_id = q.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.72, 'Total Cost': 2987.78, 'Plan Rows': 14, 'Plan Width': 16, 'Actual Startup Time': 3.121, 'Actual Total Time': 91.231, 'Actual Rows': 95728, 'Actual Loops': 2, 'Inner Unique': False, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.15, 'Total Cost': 2926.0, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 3.097, 'Actual Total Time': 5.28, 'Actual Rows': 2, 'Actual Loops': 2, 'Inner Unique': True, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 't', 'Startup Cost': 0.0, 'Total Cost': 2847.97, 'Plan Rows': 34, 'Plan Width': 8, 'Actual Startup Time': 0.053, 'Actual Total Time': 5.235, 'Actual Rows': 41, 'Actual Loops': 2, 'Filter': "((name)::text = ANY ('{browser,data-binding,json,unix}'::text[]))", 'Rows Removed by Filter': 93344, 'Workers': []}, {'Node Type': 'Memoize', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 0.15, 'Total Cost': 2.28, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 0, 'Actual Loops': 82, 'Cache Key': 't.site_id', 'Cache Mode': 'logical', 'Cache Hits': 14, 'Cache Misses': 33, 'Cache Evictions': 0, 'Cache Overflows': 0, 'Peak Memory Usage': 3, 'Workers': [{'Worker Number': 0, 'Cache Hits': 11, 'Cache Misses': 24, 'Cache Evictions': 0, 'Cache Overflows': 0, 'Peak Memory Usage': 2}], 'Plans': [{'Node Type': 'Index Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'site_pkey', 'Relation Name': 'site', 'Alias': 's', 'Startup Cost': 0.14, 'Total Cost': 2.27, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 0, 'Actual Loops': 57, 'Index Cond': '(site_id = t.site_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((site_name)::text = 'stackoverflow'::text)", 'Rows Removed by Filter': 1, 'Workers': []}]}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq', 'Startup Cost': 0.56, 'Total Cost': 61.47, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.015, 'Actual Total Time': 40.981, 'Actual Rows': 47864, 'Actual Loops': 4, 'Index Cond': '((site_id = t.site_id) AND (tag_id = t.id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 191457, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q', 'Startup Cost': 0.43, 'Total Cost': 6.36, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 0, 'Actual Loops': 191457, 'Index Cond': '((id = tq.question_id) AND (site_id = tq.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((favorite_count >= 1) AND (favorite_count <= 10))', 'Rows Removed by Filter': 1, 'Workers': []}]}]}]}


sql file: q7-005.sql

sql: select count(distinct account.display_name) from account, so_user, badge b1, badge b2 where
account.website_url != '' and
account.id = so_user.account_id and

b1.site_id = so_user.site_id and
b1.user_id = so_user.id and
b1.name = 'Constable' and

b2.site_id = so_user.site_id and
b2.user_id = so_user.id and
b2.name = 'API Evangelist' and
b2.date > b1.date + '10 months'::interval

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 487915.99, 'Total Cost': 487916.0, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 228.808, 'Actual Total Time': 230.747, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 487915.98, 'Total Cost': 487915.99, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 228.804, 'Actual Total Time': 230.743, 'Actual Rows': 0, 'Actual Loops': 1, 'Sort Key': ['account.display_name'], 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1001.44, 'Total Cost': 487915.97, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 228.799, 'Actual Total Time': 230.738, 'Actual Rows': 0, 'Actual Loops': 1, 'Inner Unique': True, 'Plans': [{'Node Type': 'Gather', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 1001.0, 'Total Cost': 487911.36, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 228.799, 'Actual Total Time': 230.737, 'Actual Rows': 0, 'Actual Loops': 1, 'Workers Planned': 6, 'Workers Launched': 6, 'Single Copy': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.0, 'Total Cost': 486911.26, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 226.992, 'Actual Total Time': 226.994, 'Actual Rows': 0, 'Actual Loops': 7, 'Inner Unique': True, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.57, 'Total Cost': 486886.7, 'Plan Rows': 3, 'Plan Width': 16, 'Actual Startup Time': 226.992, 'Actual Total Time': 226.993, 'Actual Rows': 0, 'Actual Loops': 7, 'Inner Unique': False, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'badge', 'Alias': 'b1', 'Startup Cost': 0.0, 'Total Cost': 477779.26, 'Plan Rows': 1068, 'Plan Width': 16, 'Actual Startup Time': 11.654, 'Actual Total Time': 226.469, 'Actual Rows': 101, 'Actual Loops': 7, 'Filter': "((name)::text = 'Constable'::text)", 'Rows Removed by Filter': 7319457, 'Workers': []}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'badge_pkey', 'Relation Name': 'badge', 'Alias': 'b2', 'Startup Cost': 0.57, 'Total Cost': 8.52, 'Plan Rows': 1, 'Plan Width': 16, 'Actual Startup Time': 0.005, 'Actual Total Time': 0.005, 'Actual Rows': 0, 'Actual Loops': 704, 'Index Cond': "((site_id = b1.site_id) AND (user_id = b1.user_id) AND ((name)::text = 'API Evangelist'::text) AND (date > (b1.date + '10 mons'::interval)))", 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'so_user', 'Startup Cost': 0.44, 'Total Cost': 8.18, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.0, 'Actual Total Time': 0.0, 'Actual Rows': 0, 'Actual Loops': 0, 'Index Cond': '((id = b1.user_id) AND (site_id = b1.site_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'account', 'Startup Cost': 0.43, 'Total Cost': 4.62, 'Plan Rows': 1, 'Plan Width': 15, 'Actual Startup Time': 0.0, 'Actual Total Time': 0.0, 'Actual Rows': 0, 'Actual Loops': 0, 'Index Cond': '(id = so_user.account_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((website_url)::text <> ''::text)", 'Rows Removed by Filter': 0}]}]}]}


sql file: q2-002.sql

sql: select distinct account.display_name
from
tag t1, site s1, question q1, tag_question tq1, so_user u1,
tag t2, site s2, question q2, tag_question tq2, so_user u2,
account
where
-- group theory askers
s1.site_name='stackoverflow' and
t1.name  = 'web-scraping' and
t1.site_id = s1.site_id and
q1.site_id = s1.site_id and
tq1.site_id = s1.site_id and
tq1.question_id = q1.id and
tq1.tag_id = t1.id and
q1.owner_user_id = u1.id and
q1.site_id = u1.site_id and

-- D&D askers
s2.site_name='superuser' and
t2.name  = 'microsoft-excel' and
t2.site_id = s2.site_id and
q2.site_id = s2.site_id and
tq2.site_id = s2.site_id and
tq2.question_id = q2.id and
tq2.tag_id = t2.id and
q2.owner_user_id = u2.id and
q2.site_id = u2.site_id and

-- intersect
u1.account_id = u2.account_id and
account.id = u1.account_id;

detailed info: {'Node Type': 'Unique', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 6510.47, 'Total Cost': 6510.48, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 111.014, 'Actual Total Time': 111.14, 'Actual Rows': 80, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 6510.47, 'Total Cost': 6510.48, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 111.013, 'Actual Total Time': 111.129, 'Actual Rows': 169, 'Actual Loops': 1, 'Sort Key': ['account.display_name'], 'Sort Method': 'quicksort', 'Sort Space Used': 28, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3756.47, 'Total Cost': 6510.46, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 47.442, 'Actual Total Time': 111.08, 'Actual Rows': 169, 'Actual Loops': 1, 'Inner Unique': True, 'Plans': [{'Node Type': 'Gather', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3756.04, 'Total Cost': 6502.95, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 47.435, 'Actual Total Time': 110.752, 'Actual Rows': 169, 'Actual Loops': 1, 'Workers Planned': 1, 'Workers Launched': 1, 'Single Copy': False, 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2756.04, 'Total Cost': 5502.85, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 47.053, 'Actual Total Time': 78.655, 'Actual Rows': 84, 'Actual Loops': 2, 'Inner Unique': False, 'Hash Cond': '(u1.account_id = u2.account_id)', 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.61, 'Total Cost': 2751.41, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 3.072, 'Actual Total Time': 34.268, 'Actual Rows': 6591, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(t1.site_id = u1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.17, 'Total Cost': 2743.88, 'Plan Rows': 1, 'Plan Width': 20, 'Actual Startup Time': 3.07, 'Actual Total Time': 21.236, 'Actual Rows': 6591, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(t1.site_id = q1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.74, 'Total Cost': 2638.48, 'Plan Rows': 14, 'Plan Width': 16, 'Actual Startup Time': 3.067, 'Actual Total Time': 7.307, 'Actual Rows': 6591, 'Actual Loops': 2, 'Inner Unique': False, 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.18, 'Total Cost': 2576.49, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 3.062, 'Actual Total Time': 3.063, 'Actual Rows': 0, 'Actual Loops': 2, 'Inner Unique': True, 'Hash Cond': '(t1.site_id = s1.site_id)', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.0, 'Total Cost': 2573.31, 'Plan Rows': 2, 'Plan Width': 8, 'Actual Startup Time': 0.708, 'Actual Total Time': 3.044, 'Actual Rows': 3, 'Actual Loops': 2, 'Filter': "((name)::text = 'web-scraping'::text)", 'Rows Removed by Filter': 93382, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3.16, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.011, 'Actual Total Time': 0.011, 'Actual Rows': 1, 'Actual Loops': 2, 'Hash Buckets': 1024, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 9, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Relation Name': 'site', 'Alias': 's1', 'Startup Cost': 0.0, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.008, 'Actual Total Time': 0.009, 'Actual Rows': 1, 'Actual Loops': 2, 'Filter': "((site_name)::text = 'stackoverflow'::text)", 'Rows Removed by Filter': 172, 'Workers': []}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.69, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.008, 'Actual Total Time': 7.855, 'Actual Rows': 13182, 'Actual Loops': 1, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 7.52, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 13182, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 7.52, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 13182, 'Index Cond': '((id = q1.owner_user_id) AND (site_id = q1.site_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': True, 'Async Capable': False, 'Startup Cost': 2751.41, 'Total Cost': 2751.41, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 43.836, 'Actual Total Time': 43.838, 'Actual Rows': 5499, 'Actual Loops': 2, 'Hash Buckets': 16384, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 696, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.61, 'Total Cost': 2751.41, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 3.269, 'Actual Total Time': 23.284, 'Actual Rows': 5499, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(t2.site_id = u2.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.17, 'Total Cost': 2743.88, 'Plan Rows': 1, 'Plan Width': 20, 'Actual Startup Time': 3.266, 'Actual Total Time': 13.866, 'Actual Rows': 5499, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(t2.site_id = q2.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.74, 'Total Cost': 2638.48, 'Plan Rows': 14, 'Plan Width': 16, 'Actual Startup Time': 3.263, 'Actual Total Time': 5.284, 'Actual Rows': 5499, 'Actual Loops': 2, 'Inner Unique': False, 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.18, 'Total Cost': 2576.49, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 3.257, 'Actual Total Time': 3.259, 'Actual Rows': 0, 'Actual Loops': 2, 'Inner Unique': True, 'Hash Cond': '(t2.site_id = s2.site_id)', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 't2', 'Startup Cost': 0.0, 'Total Cost': 2573.31, 'Plan Rows': 2, 'Plan Width': 8, 'Actual Startup Time': 0.982, 'Actual Total Time': 3.241, 'Actual Rows': 2, 'Actual Loops': 2, 'Filter': "((name)::text = 'microsoft-excel'::text)", 'Rows Removed by Filter': 93382, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3.16, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.013, 'Actual Total Time': 0.013, 'Actual Rows': 1, 'Actual Loops': 2, 'Hash Buckets': 1024, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 9, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Relation Name': 'site', 'Alias': 's2', 'Startup Cost': 0.0, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.01, 'Actual Total Time': 0.011, 'Actual Rows': 1, 'Actual Loops': 2, 'Filter': "((site_name)::text = 'superuser'::text)", 'Rows Removed by Filter': 172, 'Workers': []}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq2', 'Startup Cost': 0.56, 'Total Cost': 61.69, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.01, 'Actual Total Time': 3.515, 'Actual Rows': 10998, 'Actual Loops': 1, 'Index Cond': '((site_id = t2.site_id) AND (tag_id = t2.id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q2', 'Startup Cost': 0.43, 'Total Cost': 7.52, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 10998, 'Index Cond': '((id = tq2.question_id) AND (site_id = tq2.site_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u2', 'Startup Cost': 0.44, 'Total Cost': 7.52, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 10998, 'Index Cond': '((id = q2.owner_user_id) AND (site_id = q2.site_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}]}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'account', 'Startup Cost': 0.43, 'Total Cost': 7.51, 'Plan Rows': 1, 'Plan Width': 15, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 169, 'Index Cond': '(id = u1.account_id)', 'Rows Removed by Index Recheck': 0}]}]}]}


sql file: q14-001.sql

sql: SELECT COUNT(*)
FROM
site as s,
so_user as u1,
question as q1,
answer as a1,
tag as t1,
tag_question as tq1,
badge as b,
account as acc
WHERE
s.site_id = q1.site_id
AND s.site_id = u1.site_id
AND s.site_id = a1.site_id
AND s.site_id = t1.site_id
AND s.site_id = tq1.site_id
AND s.site_id = b.site_id
AND q1.id = tq1.question_id
AND q1.id = a1.question_id
AND a1.owner_user_id = u1.id
AND t1.id = tq1.tag_id
AND b.user_id = u1.id
AND acc.id = u1.account_id
AND (s.site_name in ('stackoverflow','superuser'))
AND (t1.name in ('android-asynctask','asp.net-mvc-4','css3','entity-framework-4','inner-join','jquery','sublimetext3'))
AND (q1.view_count >= 10)
AND (q1.view_count <= 1000)
AND (u1.downvotes >= 0)
AND (u1.downvotes <= 10)
AND (b.name in ('Analytical','Beta','Deputy','Fanatic','Great Question','Not a Robot','Unsung Hero'))

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 4452.69, 'Total Cost': 4452.7, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 1725.032, 'Actual Total Time': 1725.089, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1006.06, 'Total Cost': 4452.69, 'Plan Rows': 1, 'Plan Width': 0, 'Actual Startup Time': 7.004, 'Actual Total Time': 1724.285, 'Actual Rows': 26253, 'Actual Loops': 1, 'Inner Unique': True, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1005.62, 'Total Cost': 4445.45, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 6.998, 'Actual Total Time': 1672.133, 'Actual Rows': 26253, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(s.site_id = b.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1005.06, 'Total Cost': 4441.4, 'Plan Rows': 1, 'Plan Width': 36, 'Actual Startup Time': 6.635, 'Actual Total Time': 1155.343, 'Actual Rows': 69445, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(s.site_id = q1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1004.62, 'Total Cost': 4434.13, 'Plan Rows': 1, 'Plan Width': 40, 'Actual Startup Time': 6.263, 'Actual Total Time': 832.77, 'Actual Rows': 121496, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(s.site_id = u1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Gather', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 1004.18, 'Total Cost': 4426.86, 'Plan Rows': 1, 'Plan Width': 28, 'Actual Startup Time': 6.243, 'Actual Total Time': 184.595, 'Actual Rows': 317462, 'Actual Loops': 1, 'Workers Planned': 1, 'Workers Launched': 1, 'Single Copy': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.18, 'Total Cost': 3426.76, 'Plan Rows': 1, 'Plan Width': 28, 'Actual Startup Time': 4.89, 'Actual Total Time': 767.28, 'Actual Rows': 158731, 'Actual Loops': 2, 'Inner Unique': False, 'Join Filter': '(s.site_id = a1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.75, 'Total Cost': 3325.25, 'Plan Rows': 14, 'Plan Width': 16, 'Actual Startup Time': 4.873, 'Actual Total Time': 242.762, 'Actual Rows': 292933, 'Actual Loops': 2, 'Inner Unique': False, 'Join Filter': '(s.site_id = tq1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.19, 'Total Cost': 3263.18, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 4.843, 'Actual Total Time': 7.73, 'Actual Rows': 4, 'Actual Loops': 2, 'Inner Unique': True, 'Hash Cond': '(t1.site_id = s.site_id)', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.0, 'Total Cost': 3259.96, 'Plan Rows': 11, 'Plan Width': 8, 'Actual Startup Time': 0.741, 'Actual Total Time': 7.667, 'Actual Rows': 26, 'Actual Loops': 2, 'Filter': "((name)::text = ANY ('{android-asynctask,asp.net-mvc-4,css3,entity-framework-4,inner-join,jquery,sublimetext3}'::text[]))", 'Rows Removed by Filter': 93360, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3.16, 'Total Cost': 3.16, 'Plan Rows': 2, 'Plan Width': 4, 'Actual Startup Time': 0.014, 'Actual Total Time': 0.015, 'Actual Rows': 2, 'Actual Loops': 2, 'Hash Buckets': 1024, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 9, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Relation Name': 'site', 'Alias': 's', 'Startup Cost': 0.0, 'Total Cost': 3.16, 'Plan Rows': 2, 'Plan Width': 4, 'Actual Startup Time': 0.011, 'Actual Total Time': 0.012, 'Actual Rows': 2, 'Actual Loops': 2, 'Filter': "((site_name)::text = ANY ('{stackoverflow,superuser}'::text[]))", 'Rows Removed by Filter': 171, 'Workers': []}]}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.69, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.017, 'Actual Total Time': 54.936, 'Actual Rows': 73233, 'Actual Loops': 8, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 585866, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'answer_site_id_question_id_idx', 'Relation Name': 'answer', 'Alias': 'a1', 'Startup Cost': 0.43, 'Total Cost': 7.24, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 585866, 'Index Cond': '((site_id = tq1.site_id) AND (question_id = tq1.question_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 7.26, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 0, 'Actual Loops': 317462, 'Index Cond': '((id = a1.owner_user_id) AND (site_id = a1.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((downvotes >= 0) AND (downvotes <= 10))', 'Rows Removed by Filter': 1}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 7.25, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.003, 'Actual Rows': 1, 'Actual Loops': 121496, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((view_count >= 10) AND (view_count <= 1000))', 'Rows Removed by Filter': 0}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'badge_pkey', 'Relation Name': 'badge', 'Alias': 'b', 'Startup Cost': 0.56, 'Total Cost': 4.03, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.006, 'Actual Total Time': 0.007, 'Actual Rows': 0, 'Actual Loops': 69445, 'Index Cond': '((site_id = a1.site_id) AND (user_id = a1.owner_user_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((name)::text = ANY (\'{Analytical,Beta,Deputy,Fanatic,"Great Question","Not a Robot","Unsung Hero"}\'::text[]))', 'Rows Removed by Filter': 40, 'Heap Fetches': 0}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'acc', 'Startup Cost': 0.43, 'Total Cost': 7.25, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 26253, 'Index Cond': '(id = u1.account_id)', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 26253}]}]}


sql file: q11-005.sql

sql: SELECT COUNT(*)
FROM
tag as t,
site as s,
question as q,
tag_question as tq
WHERE
t.site_id = s.site_id
AND q.site_id = s.site_id
AND tq.site_id = s.site_id
AND tq.question_id = q.id
AND tq.tag_id = t.id
AND (s.site_name in ('cs'))
AND (t.name in ('algorithm-analysis','complexity-theory','computability','data-structures','formal-languages','graphs'))
AND (q.view_count >= 100)
AND (q.view_count <= 100000)

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 4277.17, 'Total Cost': 4277.18, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 12.562, 'Actual Total Time': 13.456, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Gather', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 1004.17, 'Total Cost': 4277.17, 'Plan Rows': 1, 'Plan Width': 0, 'Actual Startup Time': 1.594, 'Actual Total Time': 13.327, 'Actual Rows': 5722, 'Actual Loops': 1, 'Workers Planned': 1, 'Workers Launched': 1, 'Single Copy': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.17, 'Total Cost': 3277.07, 'Plan Rows': 1, 'Plan Width': 0, 'Actual Startup Time': 6.143, 'Actual Total Time': 11.435, 'Actual Rows': 2861, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(t.site_id = q.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.74, 'Total Cost': 3187.83, 'Plan Rows': 14, 'Plan Width': 16, 'Actual Startup Time': 6.141, 'Actual Total Time': 7.336, 'Actual Rows': 4082, 'Actual Loops': 2, 'Inner Unique': False, 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.18, 'Total Cost': 3125.83, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 6.138, 'Actual Total Time': 6.619, 'Actual Rows': 3, 'Actual Loops': 2, 'Inner Unique': True, 'Hash Cond': '(t.site_id = s.site_id)', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 't', 'Startup Cost': 0.0, 'Total Cost': 3122.63, 'Plan Rows': 9, 'Plan Width': 8, 'Actual Startup Time': 0.078, 'Actual Total Time': 6.579, 'Actual Rows': 18, 'Actual Loops': 2, 'Filter': "((name)::text = ANY ('{algorithm-analysis,complexity-theory,computability,data-structures,formal-languages,graphs}'::text[]))", 'Rows Removed by Filter': 93368, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3.16, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.011, 'Actual Total Time': 0.011, 'Actual Rows': 1, 'Actual Loops': 2, 'Hash Buckets': 1024, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 9, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Relation Name': 'site', 'Alias': 's', 'Startup Cost': 0.0, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.006, 'Actual Total Time': 0.009, 'Actual Rows': 1, 'Actual Loops': 2, 'Filter': "((site_name)::text = 'cs'::text)", 'Rows Removed by Filter': 172, 'Workers': []}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq', 'Startup Cost': 0.56, 'Total Cost': 61.69, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.171, 'Actual Rows': 1361, 'Actual Loops': 6, 'Index Cond': '((site_id = t.site_id) AND (tag_id = t.id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q', 'Startup Cost': 0.43, 'Total Cost': 6.36, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 8165, 'Index Cond': '((id = tq.question_id) AND (site_id = tq.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((view_count >= 100) AND (view_count <= 100000))', 'Rows Removed by Filter': 0, 'Workers': []}]}]}]}


sql file: q2-001.sql

sql: select distinct account.display_name
from
tag t1, site s1, question q1, tag_question tq1, so_user u1,
tag t2, site s2, question q2, tag_question tq2, so_user u2,
account
where
-- group theory askers
s1.site_name='math' and
t1.name  = 'vector-spaces' and
t1.site_id = s1.site_id and
q1.site_id = s1.site_id and
tq1.site_id = s1.site_id and
tq1.question_id = q1.id and
tq1.tag_id = t1.id and
q1.owner_user_id = u1.id and
q1.site_id = u1.site_id and

-- D&D askers
s2.site_name='stackoverflow' and
t2.name  = 'jsf' and
t2.site_id = s2.site_id and
q2.site_id = s2.site_id and
tq2.site_id = s2.site_id and
tq2.question_id = q2.id and
tq2.tag_id = t2.id and
q2.owner_user_id = u2.id and
q2.site_id = u2.site_id and

-- intersect
u1.account_id = u2.account_id and
account.id = u1.account_id;

detailed info: {'Node Type': 'Unique', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 6510.47, 'Total Cost': 6510.48, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 122.546, 'Actual Total Time': 122.744, 'Actual Rows': 8, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 6510.47, 'Total Cost': 6510.48, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 122.544, 'Actual Total Time': 122.74, 'Actual Rows': 50, 'Actual Loops': 1, 'Sort Key': ['account.display_name'], 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3756.47, 'Total Cost': 6510.46, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 95.486, 'Actual Total Time': 122.724, 'Actual Rows': 50, 'Actual Loops': 1, 'Inner Unique': True, 'Plans': [{'Node Type': 'Gather', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3756.04, 'Total Cost': 6502.95, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 95.479, 'Actual Total Time': 122.664, 'Actual Rows': 50, 'Actual Loops': 1, 'Workers Planned': 1, 'Workers Launched': 1, 'Single Copy': False, 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2756.04, 'Total Cost': 5502.85, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 95.491, 'Actual Total Time': 108.987, 'Actual Rows': 25, 'Actual Loops': 2, 'Inner Unique': False, 'Hash Cond': '(u1.account_id = u2.account_id)', 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.61, 'Total Cost': 2751.41, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 2.92, 'Actual Total Time': 16.836, 'Actual Rows': 3350, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(t1.site_id = u1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.17, 'Total Cost': 2743.88, 'Plan Rows': 1, 'Plan Width': 20, 'Actual Startup Time': 2.918, 'Actual Total Time': 11.026, 'Actual Rows': 3350, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(t1.site_id = q1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.74, 'Total Cost': 2638.48, 'Plan Rows': 14, 'Plan Width': 16, 'Actual Startup Time': 2.915, 'Actual Total Time': 4.691, 'Actual Rows': 3350, 'Actual Loops': 2, 'Inner Unique': False, 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.18, 'Total Cost': 2576.49, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 2.91, 'Actual Total Time': 2.912, 'Actual Rows': 0, 'Actual Loops': 2, 'Inner Unique': True, 'Hash Cond': '(t1.site_id = s1.site_id)', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.0, 'Total Cost': 2573.31, 'Plan Rows': 2, 'Plan Width': 8, 'Actual Startup Time': 1.084, 'Actual Total Time': 2.894, 'Actual Rows': 1, 'Actual Loops': 2, 'Filter': "((name)::text = 'vector-spaces'::text)", 'Rows Removed by Filter': 93384, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3.16, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.012, 'Actual Total Time': 0.012, 'Actual Rows': 1, 'Actual Loops': 2, 'Hash Buckets': 1024, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 9, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Relation Name': 'site', 'Alias': 's1', 'Startup Cost': 0.0, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.007, 'Actual Total Time': 0.009, 'Actual Rows': 1, 'Actual Loops': 2, 'Filter': "((site_name)::text = 'math'::text)", 'Rows Removed by Filter': 172, 'Workers': []}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.69, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.008, 'Actual Total Time': 3.237, 'Actual Rows': 6700, 'Actual Loops': 1, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 7.52, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 6700, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 7.52, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 6700, 'Index Cond': '((id = q1.owner_user_id) AND (site_id = q1.site_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': True, 'Async Capable': False, 'Startup Cost': 2751.41, 'Total Cost': 2751.41, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 91.782, 'Actual Total Time': 91.784, 'Actual Rows': 10766, 'Actual Loops': 2, 'Hash Buckets': 32768, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 1368, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.61, 'Total Cost': 2751.41, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 3.116, 'Actual Total Time': 47.142, 'Actual Rows': 10766, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(t2.site_id = u2.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.17, 'Total Cost': 2743.88, 'Plan Rows': 1, 'Plan Width': 20, 'Actual Startup Time': 3.113, 'Actual Total Time': 30.531, 'Actual Rows': 10766, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(t2.site_id = q2.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.74, 'Total Cost': 2638.48, 'Plan Rows': 14, 'Plan Width': 16, 'Actual Startup Time': 3.109, 'Actual Total Time': 9.599, 'Actual Rows': 10766, 'Actual Loops': 2, 'Inner Unique': False, 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.18, 'Total Cost': 2576.49, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 3.104, 'Actual Total Time': 3.106, 'Actual Rows': 0, 'Actual Loops': 2, 'Inner Unique': True, 'Hash Cond': '(t2.site_id = s2.site_id)', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 't2', 'Startup Cost': 0.0, 'Total Cost': 2573.31, 'Plan Rows': 2, 'Plan Width': 8, 'Actual Startup Time': 1.993, 'Actual Total Time': 3.098, 'Actual Rows': 4, 'Actual Loops': 2, 'Filter': "((name)::text = 'jsf'::text)", 'Rows Removed by Filter': 93382, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3.16, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.011, 'Actual Total Time': 0.011, 'Actual Rows': 1, 'Actual Loops': 1, 'Hash Buckets': 1024, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 9, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Relation Name': 'site', 'Alias': 's2', 'Startup Cost': 0.0, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.008, 'Actual Total Time': 0.008, 'Actual Rows': 1, 'Actual Loops': 1, 'Filter': "((site_name)::text = 'stackoverflow'::text)", 'Rows Removed by Filter': 172, 'Workers': []}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq2', 'Startup Cost': 0.56, 'Total Cost': 61.69, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.009, 'Actual Total Time': 11.934, 'Actual Rows': 21532, 'Actual Loops': 1, 'Index Cond': '((site_id = t2.site_id) AND (tag_id = t2.id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q2', 'Startup Cost': 0.43, 'Total Cost': 7.52, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 21532, 'Index Cond': '((id = tq2.question_id) AND (site_id = tq2.site_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u2', 'Startup Cost': 0.44, 'Total Cost': 7.52, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 21532, 'Index Cond': '((id = q2.owner_user_id) AND (site_id = q2.site_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}]}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'account', 'Startup Cost': 0.43, 'Total Cost': 7.51, 'Plan Rows': 1, 'Plan Width': 15, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 50, 'Index Cond': '(id = u1.account_id)', 'Rows Removed by Index Recheck': 0}]}]}]}


sql file: q12-002.sql

sql: SELECT t1.name, count(*)
FROM
site as s,
so_user as u1,
question as q1,
answer as a1,
tag as t1,
tag_question as tq1
WHERE
q1.owner_user_id = u1.id
AND a1.question_id = q1.id
AND a1.owner_user_id = u1.id
AND s.site_id = q1.site_id
AND s.site_id = a1.site_id
AND s.site_id = u1.site_id
AND s.site_id = tq1.site_id
AND s.site_id = t1.site_id
AND q1.id = tq1.question_id
AND t1.id = tq1.tag_id
AND (s.site_name in ('english'))
AND (t1.name in ('meaning'))
AND (q1.view_count >= 0)
AND (q1.view_count <= 100)
AND (u1.reputation >= 10)
AND (u1.reputation <= 100000)
GROUP BY t1.name

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Sorted', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 1.87, 'Total Cost': 3776.26, 'Plan Rows': 1, 'Plan Width': 19, 'Actual Startup Time': 28.751, 'Actual Total Time': 28.751, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.87, 'Total Cost': 3776.25, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 18.255, 'Actual Total Time': 28.75, 'Actual Rows': 2, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '((u1.id = q1.owner_user_id) AND (q1.id = a1.question_id) AND (s.site_id = q1.site_id))', 'Rows Removed by Join Filter': 260, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.44, 'Total Cost': 3769.18, 'Plan Rows': 1, 'Plan Width': 47, 'Actual Startup Time': 0.946, 'Actual Total Time': 21.607, 'Actual Rows': 5288, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(s.site_id = u1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.0, 'Total Cost': 3762.09, 'Plan Rows': 1, 'Plan Width': 39, 'Actual Startup Time': 0.943, 'Actual Total Time': 15.034, 'Actual Rows': 6014, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(s.site_id = a1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.56, 'Total Cost': 3599.9, 'Plan Rows': 23, 'Plan Width': 27, 'Actual Startup Time': 0.939, 'Actual Total Time': 7.518, 'Actual Rows': 8245, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(s.site_id = tq1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.0, 'Total Cost': 3537.82, 'Plan Rows': 1, 'Plan Width': 23, 'Actual Startup Time': 0.929, 'Actual Total Time': 5.553, 'Actual Rows': 1, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(s.site_id = t1.site_id)', 'Rows Removed by Join Filter': 16, 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Relation Name': 'site', 'Alias': 's', 'Startup Cost': 0.0, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.006, 'Actual Total Time': 0.008, 'Actual Rows': 1, 'Actual Loops': 1, 'Filter': "((site_name)::text = 'english'::text)", 'Rows Removed by Filter': 172}, {'Node Type': 'Seq Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.0, 'Total Cost': 3534.62, 'Plan Rows': 3, 'Plan Width': 19, 'Actual Startup Time': 0.473, 'Actual Total Time': 5.543, 'Actual Rows': 17, 'Actual Loops': 1, 'Filter': "((name)::text = 'meaning'::text)", 'Rows Removed by Filter': 186753}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.69, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.009, 'Actual Total Time': 1.481, 'Actual Rows': 8245, 'Actual Loops': 1, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'answer_site_id_question_id_idx', 'Relation Name': 'answer', 'Alias': 'a1', 'Startup Cost': 0.43, 'Total Cost': 7.04, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 8245, 'Index Cond': '((site_id = tq1.site_id) AND (question_id = tq1.question_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 7.07, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 6014, 'Index Cond': '((id = a1.owner_user_id) AND (site_id = a1.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((reputation >= 10) AND (reputation <= 100000))', 'Rows Removed by Filter': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 7.06, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 0, 'Actual Loops': 5288, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((view_count >= 0) AND (view_count <= 100))', 'Rows Removed by Filter': 1}]}]}


sql file: q15-001.sql

sql: SELECT b1.name, count(*)
FROM
site as s,
so_user as u1,
tag as t1,
tag_question as tq1,
question as q1,
badge as b1,
account as acc
WHERE
s.site_id = u1.site_id
AND s.site_id = b1.site_id
AND s.site_id = t1.site_id
AND s.site_id = tq1.site_id
AND s.site_id = q1.site_id
AND t1.id = tq1.tag_id
AND q1.id = tq1.question_id
AND q1.owner_user_id = u1.id
AND acc.id = u1.account_id
AND b1.user_id = u1.id
AND (q1.favorite_count >= 1)
AND (q1.favorite_count <= 10)
AND (s.site_name in ('askubuntu'))
AND (t1.name in ('14.04','drivers','python','virtualization'))
AND (acc.website_url ILIKE ('%io'))
GROUP BY b1.name
ORDER BY COUNT(*)
DESC
LIMIT 100

detailed info: {'Node Type': 'Limit', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 4041.41, 'Total Cost': 4041.41, 'Plan Rows': 1, 'Plan Width': 19, 'Actual Startup Time': 116.736, 'Actual Total Time': 116.78, 'Actual Rows': 72, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 4041.41, 'Total Cost': 4041.41, 'Plan Rows': 1, 'Plan Width': 19, 'Actual Startup Time': 116.735, 'Actual Total Time': 116.776, 'Actual Rows': 72, 'Actual Loops': 1, 'Sort Key': ['(count(*)) DESC'], 'Sort Method': 'quicksort', 'Sort Space Used': 29, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Aggregate', 'Strategy': 'Sorted', 'Partial Mode': 'Simple', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 4041.38, 'Total Cost': 4041.4, 'Plan Rows': 1, 'Plan Width': 19, 'Actual Startup Time': 116.668, 'Actual Total Time': 116.766, 'Actual Rows': 72, 'Actual Loops': 1, 'Group Key': ['b1.name'], 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 4041.38, 'Total Cost': 4041.38, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 116.662, 'Actual Total Time': 116.724, 'Actual Rows': 1029, 'Actual Loops': 1, 'Sort Key': ['b1.name'], 'Sort Method': 'quicksort', 'Sort Space Used': 73, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1005.61, 'Total Cost': 4041.37, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 6.318, 'Actual Total Time': 116.575, 'Actual Rows': 1029, 'Actual Loops': 1, 'Inner Unique': True, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1005.18, 'Total Cost': 4034.48, 'Plan Rows': 1, 'Plan Width': 15, 'Actual Startup Time': 0.494, 'Actual Total Time': 27.927, 'Actual Rows': 118032, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '((s.site_id = b1.site_id) AND (b1.user_id = q1.owner_user_id))', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Gather', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 1004.61, 'Total Cost': 4030.59, 'Plan Rows': 1, 'Plan Width': 32, 'Actual Startup Time': 0.489, 'Actual Total Time': 7.075, 'Actual Rows': 5022, 'Actual Loops': 1, 'Workers Planned': 1, 'Workers Launched': 1, 'Single Copy': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.61, 'Total Cost': 3030.49, 'Plan Rows': 1, 'Plan Width': 32, 'Actual Startup Time': 0.252, 'Actual Total Time': 35.594, 'Actual Rows': 2511, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(s.site_id = u1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.17, 'Total Cost': 3009.72, 'Plan Rows': 3, 'Plan Width': 20, 'Actual Startup Time': 0.24, 'Actual Total Time': 28.856, 'Actual Rows': 2511, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(s.site_id = q1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.74, 'Total Cost': 2913.0, 'Plan Rows': 14, 'Plan Width': 16, 'Actual Startup Time': 0.22, 'Actual Total Time': 9.594, 'Actual Rows': 10056, 'Actual Loops': 2, 'Inner Unique': False, 'Join Filter': '(s.site_id = tq1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.18, 'Total Cost': 2851.27, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.194, 'Actual Total Time': 5.154, 'Actual Rows': 2, 'Actual Loops': 2, 'Inner Unique': True, 'Hash Cond': '(t1.site_id = s.site_id)', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.0, 'Total Cost': 2847.97, 'Plan Rows': 48, 'Plan Width': 8, 'Actual Startup Time': 0.017, 'Actual Total Time': 5.114, 'Actual Rows': 43, 'Actual Loops': 2, 'Filter': "((name)::text = ANY ('{14.04,drivers,python,virtualization}'::text[]))", 'Rows Removed by Filter': 93342, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3.16, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.011, 'Actual Total Time': 0.012, 'Actual Rows': 1, 'Actual Loops': 2, 'Hash Buckets': 1024, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 9, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Relation Name': 'site', 'Alias': 's', 'Startup Cost': 0.0, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.006, 'Actual Total Time': 0.01, 'Actual Rows': 1, 'Actual Loops': 2, 'Filter': "((site_name)::text = 'askubuntu'::text)", 'Rows Removed by Filter': 172, 'Workers': []}]}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.34, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.017, 'Actual Total Time': 1.953, 'Actual Rows': 5028, 'Actual Loops': 4, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 20112, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 6.9, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 0, 'Actual Loops': 20112, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((favorite_count >= 1) AND (favorite_count <= 10))', 'Rows Removed by Filter': 1, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 6.91, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.003, 'Actual Rows': 1, 'Actual Loops': 5022, 'Index Cond': '((id = q1.owner_user_id) AND (site_id = q1.site_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'badge_pkey', 'Relation Name': 'badge', 'Alias': 'b1', 'Startup Cost': 0.56, 'Total Cost': 3.87, 'Plan Rows': 1, 'Plan Width': 19, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.003, 'Actual Rows': 24, 'Actual Loops': 5022, 'Index Cond': '((site_id = u1.site_id) AND (user_id = u1.id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'acc', 'Startup Cost': 0.43, 'Total Cost': 6.89, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 0, 'Actual Loops': 118032, 'Index Cond': '(id = u1.account_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((website_url)::text ~~* '%io'::text)", 'Rows Removed by Filter': 1}]}]}]}]}]}


sql file: q1-005.sql

sql: select count(*) from tag, site, question, tag_question
where
site.site_name='sharepoint' and
tag.name='olap' and
tag.site_id = site.site_id and
question.site_id = site.site_id and
tag_question.site_id = site.site_id and
tag_question.question_id = question.id and
tag_question.tag_id = tag.id

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 6447.28, 'Total Cost': 6447.29, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 1.288, 'Actual Total Time': 1.289, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.56, 'Total Cost': 6447.28, 'Plan Rows': 1, 'Plan Width': 0, 'Actual Startup Time': 0.446, 'Actual Total Time': 1.288, 'Actual Rows': 1, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(tag.site_id = question.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.13, 'Total Cost': 6368.74, 'Plan Rows': 23, 'Plan Width': 16, 'Actual Startup Time': 0.442, 'Actual Total Time': 1.284, 'Actual Rows': 1, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.56, 'Total Cost': 6306.75, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.436, 'Actual Total Time': 1.277, 'Actual Rows': 1, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Index Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'site_pkey', 'Relation Name': 'site', 'Alias': 'site', 'Startup Cost': 0.14, 'Total Cost': 15.17, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.007, 'Actual Total Time': 0.009, 'Actual Rows': 1, 'Actual Loops': 1, 'Filter': "((site_name)::text = 'sharepoint'::text)", 'Rows Removed by Filter': 172}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_pkey', 'Relation Name': 'tag', 'Alias': 'tag', 'Startup Cost': 0.42, 'Total Cost': 6291.56, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.427, 'Actual Total Time': 1.266, 'Actual Rows': 1, 'Actual Loops': 1, 'Index Cond': '(site_id = site.site_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((name)::text = 'olap'::text)", 'Rows Removed by Filter': 1667}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tag_question', 'Startup Cost': 0.56, 'Total Cost': 61.69, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.006, 'Actual Total Time': 0.006, 'Actual Rows': 1, 'Actual Loops': 1, 'Index Cond': '((site_id = tag.site_id) AND (tag_id = tag.id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 1}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'question', 'Startup Cost': 0.43, 'Total Cost': 3.4, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.003, 'Actual Rows': 1, 'Actual Loops': 1, 'Index Cond': '((id = tag_question.question_id) AND (site_id = tag_question.site_id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 0}]}]}


sql file: q4-003.sql

sql: select COUNT(distinct account.display_name)
from
tag t1, site s1, question q1, answer a1, tag_question tq1, so_user u1,
account
where
-- answerers posted at least 1 yr after the question was asked
s1.site_name='superuser' and
t1.name = 'command-line' and
t1.site_id = s1.site_id and
q1.site_id = s1.site_id and
tq1.site_id = s1.site_id and
tq1.question_id = q1.id and
tq1.tag_id = t1.id and
a1.site_id = q1.site_id and
a1.question_id = q1.id and
a1.owner_user_id = u1.id and
a1.site_id = u1.site_id and
a1.creation_date >= q1.creation_date + '1 year'::interval and

-- to get the display name
account.id = u1.account_id;

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 6797.88, 'Total Cost': 6797.89, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 20.93, 'Actual Total Time': 20.932, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 6797.87, 'Total Cost': 6797.88, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 20.887, 'Actual Total Time': 20.903, 'Actual Rows': 706, 'Actual Loops': 1, 'Sort Key': ['account.display_name'], 'Sort Method': 'quicksort', 'Sort Space Used': 39, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.87, 'Total Cost': 6797.86, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 0.779, 'Actual Total Time': 20.623, 'Actual Rows': 706, 'Actual Loops': 1, 'Inner Unique': True, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.44, 'Total Cost': 6790.76, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.773, 'Actual Total Time': 18.471, 'Actual Rows': 706, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(t1.site_id = u1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.0, 'Total Cost': 6783.63, 'Plan Rows': 1, 'Plan Width': 24, 'Actual Startup Time': 0.765, 'Actual Total Time': 16.483, 'Actual Rows': 706, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': "((t1.site_id = q1.site_id) AND (a1.creation_date >= (q1.creation_date + '1 year'::interval)))", 'Rows Removed by Join Filter': 2772, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.56, 'Total Cost': 6776.51, 'Plan Rows': 1, 'Plan Width': 36, 'Actual Startup Time': 0.741, 'Actual Total Time': 10.528, 'Actual Rows': 3478, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(t1.site_id = a1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.13, 'Total Cost': 6613.11, 'Plan Rows': 23, 'Plan Width': 16, 'Actual Startup Time': 0.73, 'Actual Total Time': 4.222, 'Actual Rows': 5250, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.56, 'Total Cost': 6551.11, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.717, 'Actual Total Time': 1.609, 'Actual Rows': 1, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Index Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'site_pkey', 'Relation Name': 'site', 'Alias': 's1', 'Startup Cost': 0.14, 'Total Cost': 15.17, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.017, 'Actual Total Time': 0.019, 'Actual Rows': 1, 'Actual Loops': 1, 'Filter': "((site_name)::text = 'superuser'::text)", 'Rows Removed by Filter': 172}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_pkey', 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.42, 'Total Cost': 6535.93, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.699, 'Actual Total Time': 1.588, 'Actual Rows': 1, 'Actual Loops': 1, 'Index Cond': '(site_id = s1.site_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((name)::text = 'command-line'::text)", 'Rows Removed by Filter': 5384}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.69, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.012, 'Actual Total Time': 2.4, 'Actual Rows': 5250, 'Actual Loops': 1, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 5250}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'answer_site_id_question_id_idx', 'Relation Name': 'answer', 'Alias': 'a1', 'Startup Cost': 0.43, 'Total Cost': 7.09, 'Plan Rows': 1, 'Plan Width': 20, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 5250, 'Index Cond': '((site_id = tq1.site_id) AND (question_id = tq1.question_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 7.1, 'Plan Rows': 1, 'Plan Width': 16, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 3478, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 7.12, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.003, 'Actual Rows': 1, 'Actual Loops': 706, 'Index Cond': '((id = a1.owner_user_id) AND (site_id = a1.site_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'account', 'Startup Cost': 0.43, 'Total Cost': 7.1, 'Plan Rows': 1, 'Plan Width': 15, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.003, 'Actual Rows': 1, 'Actual Loops': 706, 'Index Cond': '(id = u1.account_id)', 'Rows Removed by Index Recheck': 0}]}]}]}


sql file: q11-002.sql

sql: SELECT COUNT(*)
FROM
tag as t,
site as s,
question as q,
tag_question as tq
WHERE
t.site_id = s.site_id
AND q.site_id = s.site_id
AND tq.site_id = s.site_id
AND tq.question_id = q.id
AND tq.tag_id = t.id
AND (s.site_name in ('softwareengineering'))
AND (t.name in ('architecture','design','design-patterns'))
AND (q.score >= 0)
AND (q.score <= 5)

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 6516.71, 'Total Cost': 6516.72, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 11.434, 'Actual Total Time': 11.435, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.56, 'Total Cost': 6516.71, 'Plan Rows': 1, 'Plan Width': 0, 'Actual Startup Time': 0.316, 'Actual Total Time': 11.35, 'Actual Rows': 3772, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(t.site_id = q.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.13, 'Total Cost': 6370.09, 'Plan Rows': 23, 'Plan Width': 16, 'Actual Startup Time': 0.29, 'Actual Total Time': 2.915, 'Actual Rows': 5281, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.56, 'Total Cost': 6308.1, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.278, 'Actual Total Time': 1.406, 'Actual Rows': 3, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Index Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'site_pkey', 'Relation Name': 'site', 'Alias': 's', 'Startup Cost': 0.14, 'Total Cost': 15.17, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.016, 'Actual Total Time': 0.018, 'Actual Rows': 1, 'Actual Loops': 1, 'Filter': "((site_name)::text = 'softwareengineering'::text)", 'Rows Removed by Filter': 172}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_pkey', 'Relation Name': 'tag', 'Alias': 't', 'Startup Cost': 0.42, 'Total Cost': 6292.91, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.261, 'Actual Total Time': 1.386, 'Actual Rows': 3, 'Actual Loops': 1, 'Index Cond': '(site_id = s.site_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((name)::text = ANY ('{architecture,design,design-patterns}'::text[]))", 'Rows Removed by Filter': 1644}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq', 'Startup Cost': 0.56, 'Total Cost': 61.69, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.007, 'Actual Total Time': 0.431, 'Actual Rows': 1760, 'Actual Loops': 3, 'Index Cond': '((site_id = t.site_id) AND (tag_id = t.id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 5281}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q', 'Startup Cost': 0.43, 'Total Cost': 6.36, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 5281, 'Index Cond': '((id = tq.question_id) AND (site_id = tq.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((score >= 0) AND (score <= 5))', 'Rows Removed by Filter': 0}]}]}


sql file: q12-001.sql

sql: SELECT t1.name, count(*)
FROM
site as s,
so_user as u1,
question as q1,
answer as a1,
tag as t1,
tag_question as tq1
WHERE
q1.owner_user_id = u1.id
AND a1.question_id = q1.id
AND a1.owner_user_id = u1.id
AND s.site_id = q1.site_id
AND s.site_id = a1.site_id
AND s.site_id = u1.site_id
AND s.site_id = tq1.site_id
AND s.site_id = t1.site_id
AND q1.id = tq1.question_id
AND t1.id = tq1.tag_id
AND (s.site_name in ('android','gamedev','judaism','sharepoint'))
AND (t1.name in ('java','opengl','powershell','sharepoint-enterprise','sharepoint-foundation','sharepoint-online','sources-mekorot','web-part','xna'))
AND (q1.view_count >= 10)
AND (q1.view_count <= 1000)
AND (u1.reputation >= 10)
AND (u1.reputation <= 100000)
GROUP BY t1.name

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Sorted', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 4910.6, 'Total Cost': 4910.62, 'Plan Rows': 1, 'Plan Width': 19, 'Actual Startup Time': 27.386, 'Actual Total Time': 29.56, 'Actual Rows': 9, 'Actual Loops': 1, 'Group Key': ['t1.name'], 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 4910.6, 'Total Cost': 4910.6, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 27.382, 'Actual Total Time': 29.547, 'Actual Rows': 300, 'Actual Loops': 1, 'Sort Key': ['t1.name'], 'Sort Method': 'quicksort', 'Sort Space Used': 32, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1002.01, 'Total Cost': 4910.59, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 3.384, 'Actual Total Time': 29.516, 'Actual Rows': 300, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(s.site_id = u1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1001.58, 'Total Cost': 4903.51, 'Plan Rows': 1, 'Plan Width': 39, 'Actual Startup Time': 3.382, 'Actual Total Time': 28.843, 'Actual Rows': 325, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '((a1.owner_user_id = q1.owner_user_id) AND (q1.id = a1.question_id) AND (s.site_id = q1.site_id))', 'Rows Removed by Join Filter': 3740, 'Plans': [{'Node Type': 'Gather', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 1001.14, 'Total Cost': 4896.43, 'Plan Rows': 1, 'Plan Width': 39, 'Actual Startup Time': 0.262, 'Actual Total Time': 17.867, 'Actual Rows': 7446, 'Actual Loops': 1, 'Workers Planned': 1, 'Workers Launched': 1, 'Single Copy': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.14, 'Total Cost': 3896.33, 'Plan Rows': 1, 'Plan Width': 39, 'Actual Startup Time': 1.461, 'Actual Total Time': 20.175, 'Actual Rows': 3723, 'Actual Loops': 2, 'Inner Unique': False, 'Join Filter': '(s.site_id = a1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.71, 'Total Cost': 3705.93, 'Plan Rows': 27, 'Plan Width': 27, 'Actual Startup Time': 1.451, 'Actual Total Time': 11.799, 'Actual Rows': 11090, 'Actual Loops': 2, 'Inner Unique': False, 'Join Filter': '(s.site_id = tq1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.14, 'Total Cost': 3644.2, 'Plan Rows': 1, 'Plan Width': 23, 'Actual Startup Time': 1.432, 'Actual Total Time': 8.724, 'Actual Rows': 6, 'Actual Loops': 2, 'Inner Unique': True, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.0, 'Total Cost': 3534.62, 'Plan Rows': 48, 'Plan Width': 19, 'Actual Startup Time': 0.099, 'Actual Total Time': 8.67, 'Actual Rows': 53, 'Actual Loops': 2, 'Filter': "((name)::text = ANY ('{java,opengl,powershell,sharepoint-enterprise,sharepoint-foundation,sharepoint-online,sources-mekorot,web-part,xna}'::text[]))", 'Rows Removed by Filter': 93332, 'Workers': []}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'site_pkey', 'Relation Name': 'site', 'Alias': 's', 'Startup Cost': 0.14, 'Total Cost': 2.27, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 0, 'Actual Loops': 106, 'Index Cond': '(site_id = t1.site_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((site_name)::text = ANY ('{android,gamedev,judaism,sharepoint}'::text[]))", 'Rows Removed by Filter': 1, 'Workers': []}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.34, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.007, 'Actual Total Time': 0.463, 'Actual Rows': 2016, 'Actual Loops': 11, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 22179, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'answer_site_id_question_id_idx', 'Relation Name': 'answer', 'Alias': 'a1', 'Startup Cost': 0.43, 'Total Cost': 7.04, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 0, 'Actual Loops': 22179, 'Index Cond': '((site_id = tq1.site_id) AND (question_id = tq1.question_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 7.06, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 7446, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((view_count >= 10) AND (view_count <= 1000))', 'Rows Removed by Filter': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 7.07, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 325, 'Index Cond': '((id = q1.owner_user_id) AND (site_id = q1.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((reputation >= 10) AND (reputation <= 100000))', 'Rows Removed by Filter': 0}]}]}]}


sql file: q3-002.sql

sql: select COUNT(distinct account.display_name)
from
tag t1, site s1, question q1, answer a1, tag_question tq1, so_user u1,
tag t2, site s2, question q2, tag_question tq2, so_user u2,
account
where
-- answerers
s1.site_name='stackoverflow' and
t1.name  = 'split' and
t1.site_id = s1.site_id and
q1.site_id = s1.site_id and
tq1.site_id = s1.site_id and
tq1.question_id = q1.id and
tq1.tag_id = t1.id and
a1.site_id = q1.site_id and
a1.question_id = q1.id and
a1.owner_user_id = u1.id and
a1.site_id = u1.site_id and

-- askers
s2.site_name='math' and
t2.name  = 'geometry' and
t2.site_id = s2.site_id and
q2.site_id = s2.site_id and
tq2.site_id = s2.site_id and
tq2.question_id = q2.id and
tq2.tag_id = t2.id and
q2.owner_user_id = u2.id and
q2.site_id = u2.site_id and


-- intersect
u1.account_id = u2.account_id and
account.id = u1.account_id;

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 6522.46, 'Total Cost': 6522.47, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 125.18, 'Actual Total Time': 125.355, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 6522.46, 'Total Cost': 6522.46, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 125.164, 'Actual Total Time': 125.343, 'Actual Rows': 170, 'Actual Loops': 1, 'Sort Key': ['account.display_name'], 'Sort Method': 'quicksort', 'Sort Space Used': 28, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3759.03, 'Total Cost': 6522.45, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 76.017, 'Actual Total Time': 125.296, 'Actual Rows': 170, 'Actual Loops': 1, 'Inner Unique': True, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3758.6, 'Total Cost': 6514.79, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 76.011, 'Actual Total Time': 124.955, 'Actual Rows': 170, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(t1.site_id = q1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Gather', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3758.16, 'Total Cost': 6507.12, 'Plan Rows': 1, 'Plan Width': 36, 'Actual Startup Time': 76.006, 'Actual Total Time': 124.567, 'Actual Rows': 170, 'Actual Loops': 1, 'Workers Planned': 1, 'Workers Launched': 1, 'Single Copy': False, 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2758.16, 'Total Cost': 5507.02, 'Plan Rows': 1, 'Plan Width': 36, 'Actual Startup Time': 75.71, 'Actual Total Time': 99.902, 'Actual Rows': 85, 'Actual Loops': 2, 'Inner Unique': False, 'Hash Cond': '(u1.account_id = u2.account_id)', 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.61, 'Total Cost': 2753.46, 'Plan Rows': 1, 'Plan Width': 32, 'Actual Startup Time': 3.032, 'Actual Total Time': 27.013, 'Actual Rows': 4619, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(t1.site_id = u1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.17, 'Total Cost': 2745.78, 'Plan Rows': 1, 'Plan Width': 28, 'Actual Startup Time': 3.029, 'Actual Total Time': 17.826, 'Actual Rows': 4619, 'Actual Loops': 2, 'Inner Unique': False, 'Join Filter': '(t1.site_id = a1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.74, 'Total Cost': 2638.48, 'Plan Rows': 14, 'Plan Width': 16, 'Actual Startup Time': 3.025, 'Actual Total Time': 6.42, 'Actual Rows': 5146, 'Actual Loops': 2, 'Inner Unique': False, 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.18, 'Total Cost': 2576.49, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 3.021, 'Actual Total Time': 3.022, 'Actual Rows': 0, 'Actual Loops': 2, 'Inner Unique': True, 'Hash Cond': '(t1.site_id = s1.site_id)', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.0, 'Total Cost': 2573.31, 'Plan Rows': 2, 'Plan Width': 8, 'Actual Startup Time': 0.397, 'Actual Total Time': 2.999, 'Actual Rows': 8, 'Actual Loops': 2, 'Filter': "((name)::text = 'split'::text)", 'Rows Removed by Filter': 93376, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3.16, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.013, 'Actual Total Time': 0.013, 'Actual Rows': 1, 'Actual Loops': 2, 'Hash Buckets': 1024, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 9, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Relation Name': 'site', 'Alias': 's1', 'Startup Cost': 0.0, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.009, 'Actual Total Time': 0.01, 'Actual Rows': 1, 'Actual Loops': 2, 'Filter': "((site_name)::text = 'stackoverflow'::text)", 'Rows Removed by Filter': 172, 'Workers': []}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.69, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.008, 'Actual Total Time': 6.298, 'Actual Rows': 10291, 'Actual Loops': 1, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'answer_site_id_question_id_idx', 'Relation Name': 'answer', 'Alias': 'a1', 'Startup Cost': 0.43, 'Total Cost': 7.65, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 10291, 'Index Cond': '((site_id = tq1.site_id) AND (question_id = tq1.question_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 7.66, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 9238, 'Index Cond': '((id = a1.owner_user_id) AND (site_id = a1.site_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': True, 'Async Capable': False, 'Startup Cost': 2753.54, 'Total Cost': 2753.54, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 72.47, 'Actual Total Time': 72.472, 'Actual Rows': 9616, 'Actual Loops': 2, 'Hash Buckets': 32768, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 1272, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.61, 'Total Cost': 2753.54, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 3.284, 'Actual Total Time': 38.175, 'Actual Rows': 9616, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(t2.site_id = u2.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.17, 'Total Cost': 2745.86, 'Plan Rows': 1, 'Plan Width': 20, 'Actual Startup Time': 3.28, 'Actual Total Time': 23.244, 'Actual Rows': 9616, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(t2.site_id = q2.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.74, 'Total Cost': 2638.48, 'Plan Rows': 14, 'Plan Width': 16, 'Actual Startup Time': 3.277, 'Actual Total Time': 7.371, 'Actual Rows': 9616, 'Actual Loops': 2, 'Inner Unique': False, 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.18, 'Total Cost': 2576.49, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 3.271, 'Actual Total Time': 3.272, 'Actual Rows': 0, 'Actual Loops': 2, 'Inner Unique': True, 'Hash Cond': '(t2.site_id = s2.site_id)', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 't2', 'Startup Cost': 0.0, 'Total Cost': 2573.31, 'Plan Rows': 2, 'Plan Width': 8, 'Actual Startup Time': 0.228, 'Actual Total Time': 3.254, 'Actual Rows': 12, 'Actual Loops': 2, 'Filter': "((name)::text = 'geometry'::text)", 'Rows Removed by Filter': 93372, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3.16, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.013, 'Actual Total Time': 0.014, 'Actual Rows': 1, 'Actual Loops': 2, 'Hash Buckets': 1024, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 9, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Relation Name': 'site', 'Alias': 's2', 'Startup Cost': 0.0, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.01, 'Actual Total Time': 0.011, 'Actual Rows': 1, 'Actual Loops': 2, 'Filter': "((site_name)::text = 'math'::text)", 'Rows Removed by Filter': 172, 'Workers': []}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq2', 'Startup Cost': 0.56, 'Total Cost': 61.69, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.011, 'Actual Total Time': 7.281, 'Actual Rows': 19231, 'Actual Loops': 1, 'Index Cond': '((site_id = t2.site_id) AND (tag_id = t2.id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q2', 'Startup Cost': 0.43, 'Total Cost': 7.66, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 19231, 'Index Cond': '((id = tq2.question_id) AND (site_id = tq2.site_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u2', 'Startup Cost': 0.44, 'Total Cost': 7.66, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 19231, 'Index Cond': '((id = q2.owner_user_id) AND (site_id = q2.site_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}]}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 7.66, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 170, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'account', 'Startup Cost': 0.43, 'Total Cost': 7.65, 'Plan Rows': 1, 'Plan Width': 15, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 170, 'Index Cond': '(id = u1.account_id)', 'Rows Removed by Index Recheck': 0}]}]}]}


sql file: q5-001.sql

sql: select COUNT(distinct account.display_name)
from
tag t1, site s1, question q1, tag_question tq1, so_user u1, comment c1,
account
where
-- underappreciated (high votes, low views) questions with at least one comment
s1.site_name='ux' and
t1.name in ('readability', 'desktop-application', 'touch-screen') and
t1.site_id = s1.site_id and
q1.site_id = s1.site_id and
tq1.site_id = s1.site_id and
tq1.question_id = q1.id and
tq1.tag_id = t1.id and
q1.owner_user_id = u1.id and
q1.site_id = u1.site_id and
q1.score > 8 and
q1.view_count < 1785 and
c1.site_id = q1.site_id and
c1.post_id = q1.id and

-- to get the display name
account.id = u1.account_id;

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 7017.67, 'Total Cost': 7017.68, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 2.943, 'Actual Total Time': 2.944, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 7017.66, 'Total Cost': 7017.67, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 2.936, 'Actual Total Time': 2.938, 'Actual Rows': 65, 'Actual Loops': 1, 'Sort Key': ['account.display_name'], 'Sort Method': 'quicksort', 'Sort Space Used': 26, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.0, 'Total Cost': 7017.65, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 0.176, 'Actual Total Time': 2.92, 'Actual Rows': 65, 'Actual Loops': 1, 'Inner Unique': True, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.57, 'Total Cost': 7010.03, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.17, 'Actual Total Time': 2.816, 'Actual Rows': 65, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(t1.site_id = c1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.0, 'Total Cost': 7002.23, 'Plan Rows': 1, 'Plan Width': 32, 'Actual Startup Time': 0.162, 'Actual Total Time': 2.715, 'Actual Rows': 27, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(t1.site_id = u1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.56, 'Total Cost': 6994.57, 'Plan Rows': 1, 'Plan Width': 28, 'Actual Startup Time': 0.156, 'Actual Total Time': 2.624, 'Actual Rows': 27, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(t1.site_id = q1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.13, 'Total Cost': 6818.66, 'Plan Rows': 23, 'Plan Width': 16, 'Actual Startup Time': 0.1, 'Actual Total Time': 1.608, 'Actual Rows': 423, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.56, 'Total Cost': 6756.66, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.09, 'Actual Total Time': 1.375, 'Actual Rows': 3, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Index Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'site_pkey', 'Relation Name': 'site', 'Alias': 's1', 'Startup Cost': 0.14, 'Total Cost': 15.17, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.017, 'Actual Total Time': 0.018, 'Actual Rows': 1, 'Actual Loops': 1, 'Filter': "((site_name)::text = 'ux'::text)", 'Rows Removed by Filter': 172}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_pkey', 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.42, 'Total Cost': 6741.48, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.072, 'Actual Total Time': 1.355, 'Actual Rows': 3, 'Actual Loops': 1, 'Index Cond': '(site_id = s1.site_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((name)::text = ANY ('{readability,desktop-application,touch-screen}'::text[]))", 'Rows Removed by Filter': 1027}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.69, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.006, 'Actual Total Time': 0.071, 'Actual Rows': 141, 'Actual Loops': 3, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 7.64, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 0, 'Actual Loops': 423, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((score > 8) AND (view_count < 1785))', 'Rows Removed by Filter': 1}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 7.65, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.003, 'Actual Rows': 1, 'Actual Loops': 27, 'Index Cond': '((id = q1.owner_user_id) AND (site_id = q1.site_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'comment_site_id_post_id_idx', 'Relation Name': 'comment', 'Alias': 'c1', 'Startup Cost': 0.57, 'Total Cost': 7.79, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.004, 'Actual Rows': 2, 'Actual Loops': 27, 'Index Cond': '((site_id = tq1.site_id) AND (post_id = tq1.question_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'account', 'Startup Cost': 0.43, 'Total Cost': 7.63, 'Plan Rows': 1, 'Plan Width': 15, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 65, 'Index Cond': '(id = u1.account_id)', 'Rows Removed by Index Recheck': 0}]}]}]}


sql file: q14-003.sql

sql: SELECT COUNT(*)
FROM
site as s,
so_user as u1,
question as q1,
answer as a1,
tag as t1,
tag_question as tq1,
badge as b,
account as acc
WHERE
s.site_id = q1.site_id
AND s.site_id = u1.site_id
AND s.site_id = a1.site_id
AND s.site_id = t1.site_id
AND s.site_id = tq1.site_id
AND s.site_id = b.site_id
AND q1.id = tq1.question_id
AND q1.id = a1.question_id
AND a1.owner_user_id = u1.id
AND t1.id = tq1.tag_id
AND b.user_id = u1.id
AND acc.id = u1.account_id
AND (s.site_name in ('stackoverflow','superuser'))
AND (t1.name in ('aes','bios','build','decorator','foreach','html-table','prototype','tags','ubuntu-16.04'))
AND (q1.view_count >= 100)
AND (q1.view_count <= 100000)
AND (u1.downvotes >= 0)
AND (u1.downvotes <= 10)
AND (b.name in ('Cleanup','Fanatic','Inquisitive','Mortarboard','Tag Editor','Talkative'))

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 4727.29, 'Total Cost': 4727.3, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 170.417, 'Actual Total Time': 171.888, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1006.06, 'Total Cost': 4727.28, 'Plan Rows': 1, 'Plan Width': 0, 'Actual Startup Time': 6.963, 'Actual Total Time': 171.794, 'Actual Rows': 3290, 'Actual Loops': 1, 'Inner Unique': True, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1005.62, 'Total Cost': 4720.04, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 6.959, 'Actual Total Time': 166.228, 'Actual Rows': 3290, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(s.site_id = b.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1005.06, 'Total Cost': 4715.99, 'Plan Rows': 1, 'Plan Width': 36, 'Actual Startup Time': 6.934, 'Actual Total Time': 114.485, 'Actual Rows': 7857, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(s.site_id = q1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1004.62, 'Total Cost': 4708.73, 'Plan Rows': 1, 'Plan Width': 40, 'Actual Startup Time': 6.846, 'Actual Total Time': 92.509, 'Actual Rows': 10660, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(s.site_id = u1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Gather', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 1004.18, 'Total Cost': 4701.45, 'Plan Rows': 1, 'Plan Width': 28, 'Actual Startup Time': 6.828, 'Actual Total Time': 37.101, 'Actual Rows': 27353, 'Actual Loops': 1, 'Workers Planned': 1, 'Workers Launched': 1, 'Single Copy': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.18, 'Total Cost': 3701.35, 'Plan Rows': 1, 'Plan Width': 28, 'Actual Startup Time': 5.817, 'Actual Total Time': 88.965, 'Actual Rows': 13676, 'Actual Loops': 2, 'Inner Unique': False, 'Join Filter': '(s.site_id = a1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.75, 'Total Cost': 3599.85, 'Plan Rows': 14, 'Plan Width': 16, 'Actual Startup Time': 5.807, 'Actual Total Time': 33.984, 'Actual Rows': 25960, 'Actual Loops': 2, 'Inner Unique': False, 'Join Filter': '(s.site_id = tq1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.19, 'Total Cost': 3537.85, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 5.723, 'Actual Total Time': 9.084, 'Actual Rows': 7, 'Actual Loops': 2, 'Inner Unique': True, 'Hash Cond': '(t1.site_id = s.site_id)', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.0, 'Total Cost': 3534.62, 'Plan Rows': 14, 'Plan Width': 8, 'Actual Startup Time': 0.288, 'Actual Total Time': 9.028, 'Actual Rows': 37, 'Actual Loops': 2, 'Filter': "((name)::text = ANY ('{aes,bios,build,decorator,foreach,html-table,prototype,tags,ubuntu-16.04}'::text[]))", 'Rows Removed by Filter': 93348, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3.16, 'Total Cost': 3.16, 'Plan Rows': 2, 'Plan Width': 4, 'Actual Startup Time': 0.013, 'Actual Total Time': 0.014, 'Actual Rows': 2, 'Actual Loops': 2, 'Hash Buckets': 1024, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 9, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Relation Name': 'site', 'Alias': 's', 'Startup Cost': 0.0, 'Total Cost': 3.16, 'Plan Rows': 2, 'Plan Width': 4, 'Actual Startup Time': 0.011, 'Actual Total Time': 0.012, 'Actual Rows': 2, 'Actual Loops': 2, 'Filter': "((site_name)::text = ANY ('{stackoverflow,superuser}'::text[]))", 'Rows Removed by Filter': 171, 'Workers': []}]}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.61, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.018, 'Actual Total Time': 3.371, 'Actual Rows': 3709, 'Actual Loops': 14, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 51920, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'answer_site_id_question_id_idx', 'Relation Name': 'answer', 'Alias': 'a1', 'Startup Cost': 0.43, 'Total Cost': 7.24, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 51920, 'Index Cond': '((site_id = tq1.site_id) AND (question_id = tq1.question_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 7.26, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 0, 'Actual Loops': 27353, 'Index Cond': '((id = a1.owner_user_id) AND (site_id = a1.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((downvotes >= 0) AND (downvotes <= 10))', 'Rows Removed by Filter': 1}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 7.25, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 10660, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((view_count >= 100) AND (view_count <= 100000))', 'Rows Removed by Filter': 0}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'badge_pkey', 'Relation Name': 'badge', 'Alias': 'b', 'Startup Cost': 0.56, 'Total Cost': 4.03, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.005, 'Actual Total Time': 0.006, 'Actual Rows': 0, 'Actual Loops': 7857, 'Index Cond': '((site_id = a1.site_id) AND (user_id = a1.owner_user_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((name)::text = ANY (\'{Cleanup,Fanatic,Inquisitive,Mortarboard,"Tag Editor",Talkative}\'::text[]))', 'Rows Removed by Filter': 39, 'Heap Fetches': 0}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'acc', 'Startup Cost': 0.43, 'Total Cost': 7.25, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 3290, 'Index Cond': '(id = u1.account_id)', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 3290}]}]}


sql file: q1-001.sql

sql: select count(*) from tag, site, question, tag_question
where
site.site_name='scifi' and
tag.name='steins-gate' and
tag.site_id = site.site_id and
question.site_id = site.site_id and
tag_question.site_id = site.site_id and
tag_question.question_id = question.id and
tag_question.tag_id = tag.id

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 6447.28, 'Total Cost': 6447.29, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 1.354, 'Actual Total Time': 1.355, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.56, 'Total Cost': 6447.28, 'Plan Rows': 1, 'Plan Width': 0, 'Actual Startup Time': 0.827, 'Actual Total Time': 1.354, 'Actual Rows': 1, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(tag.site_id = question.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.13, 'Total Cost': 6368.74, 'Plan Rows': 23, 'Plan Width': 16, 'Actual Startup Time': 0.823, 'Actual Total Time': 1.349, 'Actual Rows': 1, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.56, 'Total Cost': 6306.75, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.815, 'Actual Total Time': 1.341, 'Actual Rows': 1, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Index Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'site_pkey', 'Relation Name': 'site', 'Alias': 'site', 'Startup Cost': 0.14, 'Total Cost': 15.17, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.007, 'Actual Total Time': 0.009, 'Actual Rows': 1, 'Actual Loops': 1, 'Filter': "((site_name)::text = 'scifi'::text)", 'Rows Removed by Filter': 172}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_pkey', 'Relation Name': 'tag', 'Alias': 'tag', 'Startup Cost': 0.42, 'Total Cost': 6291.56, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.807, 'Actual Total Time': 1.33, 'Actual Rows': 1, 'Actual Loops': 1, 'Index Cond': '(site_id = site.site_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((name)::text = 'steins-gate'::text)", 'Rows Removed by Filter': 3083}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tag_question', 'Startup Cost': 0.56, 'Total Cost': 61.69, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.007, 'Actual Total Time': 0.008, 'Actual Rows': 1, 'Actual Loops': 1, 'Index Cond': '((site_id = tag.site_id) AND (tag_id = tag.id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 1}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'question', 'Startup Cost': 0.43, 'Total Cost': 3.4, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.003, 'Actual Rows': 1, 'Actual Loops': 1, 'Index Cond': '((id = tag_question.question_id) AND (site_id = tag_question.site_id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 0}]}]}


sql file: q8-001.sql

sql: select count(distinct q1.id) from
site, post_link pl, question q1, question q2, comment c1, comment c2,
tag, tag_question tq1, tag_question tq2
where
site.site_name = 'german' and
pl.site_id = site.site_id and

pl.site_id = q1.site_id and
pl.post_id_from = q1.id and
pl.site_id = q2.site_id and
pl.post_id_to = q2.id and

c1.site_id = q1.site_id and
c1.post_id = q1.id and

c2.site_id = q2.site_id and
c2.post_id = q2.id and

c1.date < c2.date and

tag.name in ('jquery', 'android', 'excel', 'iphone', 'sql-server') and
tag.id = tq1.tag_id and
tag.site_id = tq1.site_id and
tag.id = tq2.tag_id and
tag.site_id = tq1.site_id and

tag.site_id = pl.site_id and

tq1.site_id = q1.site_id and
tq1.question_id = q1.id and
tq2.site_id = q2.site_id and
tq2.question_id = q2.id;

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 7113.16, 'Total Cost': 7113.17, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 1.688, 'Actual Total Time': 1.689, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 7113.16, 'Total Cost': 7113.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 1.685, 'Actual Total Time': 1.686, 'Actual Rows': 0, 'Actual Loops': 1, 'Sort Key': ['q1.id'], 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.13, 'Total Cost': 7113.15, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 1.681, 'Actual Total Time': 1.682, 'Actual Rows': 0, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '((c1.date < c2.date) AND (pl.post_id_to = c2.post_id) AND (c2.site_id = tag.site_id))', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.56, 'Total Cost': 7104.97, 'Plan Rows': 1, 'Plan Width': 56, 'Actual Startup Time': 1.681, 'Actual Total Time': 1.682, 'Actual Rows': 0, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '((tag.id = tq2.tag_id) AND (tag.site_id = tq2.site_id))', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.0, 'Total Cost': 7096.81, 'Plan Rows': 1, 'Plan Width': 56, 'Actual Startup Time': 1.681, 'Actual Total Time': 1.682, 'Actual Rows': 0, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(q2.site_id = tag.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.56, 'Total Cost': 7092.56, 'Plan Rows': 1, 'Plan Width': 48, 'Actual Startup Time': 1.681, 'Actual Total Time': 1.682, 'Actual Rows': 0, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(pl.site_id = tag.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.13, 'Total Cost': 7084.54, 'Plan Rows': 1, 'Plan Width': 48, 'Actual Startup Time': 1.681, 'Actual Total Time': 1.681, 'Actual Rows': 0, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(c1.site_id = tag.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.56, 'Total Cost': 7076.37, 'Plan Rows': 1, 'Plan Width': 32, 'Actual Startup Time': 1.681, 'Actual Total Time': 1.681, 'Actual Rows': 0, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(q1.site_id = tag.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.13, 'Total Cost': 6978.69, 'Plan Rows': 23, 'Plan Width': 24, 'Actual Startup Time': 1.681, 'Actual Total Time': 1.681, 'Actual Rows': 0, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.56, 'Total Cost': 6916.69, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 1.681, 'Actual Total Time': 1.681, 'Actual Rows': 0, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Index Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'site_pkey', 'Relation Name': 'site', 'Alias': 'site', 'Startup Cost': 0.14, 'Total Cost': 15.17, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.017, 'Actual Total Time': 0.021, 'Actual Rows': 1, 'Actual Loops': 1, 'Filter': "((site_name)::text = 'german'::text)", 'Rows Removed by Filter': 172}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_pkey', 'Relation Name': 'tag', 'Alias': 'tag', 'Startup Cost': 0.42, 'Total Cost': 6901.51, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 1.658, 'Actual Total Time': 1.658, 'Actual Rows': 0, 'Actual Loops': 1, 'Index Cond': '(site_id = site.site_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((name)::text = ANY ('{jquery,android,excel,iphone,sql-server}'::text[]))", 'Rows Removed by Filter': 258}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.69, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.0, 'Actual Total Time': 0.0, 'Actual Rows': 0, 'Actual Loops': 0, 'Index Cond': '((site_id = tag.site_id) AND (tag_id = tag.id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 0}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 4.23, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.0, 'Actual Total Time': 0.0, 'Actual Rows': 0, 'Actual Loops': 0, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'comment_site_id_post_id_idx', 'Relation Name': 'comment', 'Alias': 'c1', 'Startup Cost': 0.57, 'Total Cost': 8.15, 'Plan Rows': 1, 'Plan Width': 16, 'Actual Startup Time': 0.0, 'Actual Total Time': 0.0, 'Actual Rows': 0, 'Actual Loops': 0, 'Index Cond': '((site_id = q1.site_id) AND (post_id = q1.id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'post_link_pkey', 'Relation Name': 'post_link', 'Alias': 'pl', 'Startup Cost': 0.43, 'Total Cost': 8.01, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.0, 'Actual Total Time': 0.0, 'Actual Rows': 0, 'Actual Loops': 0, 'Index Cond': '((site_id = q1.site_id) AND (post_id_from = q1.id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 0}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q2', 'Startup Cost': 0.43, 'Total Cost': 4.23, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.0, 'Actual Total Time': 0.0, 'Actual Rows': 0, 'Actual Loops': 0, 'Index Cond': '((id = pl.post_id_to) AND (site_id = pl.site_id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 0}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_pkey', 'Relation Name': 'tag_question', 'Alias': 'tq2', 'Startup Cost': 0.56, 'Total Cost': 8.15, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.0, 'Actual Total Time': 0.0, 'Actual Rows': 0, 'Actual Loops': 0, 'Index Cond': '((site_id = pl.site_id) AND (question_id = pl.post_id_to))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'comment_site_id_post_id_idx', 'Relation Name': 'comment', 'Alias': 'c2', 'Startup Cost': 0.57, 'Total Cost': 8.15, 'Plan Rows': 1, 'Plan Width': 16, 'Actual Startup Time': 0.0, 'Actual Total Time': 0.0, 'Actual Rows': 0, 'Actual Loops': 0, 'Index Cond': '((site_id = tq2.site_id) AND (post_id = tq2.question_id))', 'Rows Removed by Index Recheck': 0}]}]}]}


sql file: q5-005.sql

sql: select COUNT(distinct account.display_name)
from
tag t1, site s1, question q1, tag_question tq1, so_user u1, comment c1,
account
where
-- underappreciated (high votes, low views) questions with at least one comment
s1.site_name='drupal' and
t1.name in ('emails', 'composer', 'drush', 'theming', 'tokens', 'distributions', 'rating', 'navigation', 'path-aliases', 'entities') and
t1.site_id = s1.site_id and
q1.site_id = s1.site_id and
tq1.site_id = s1.site_id and
tq1.question_id = q1.id and
tq1.tag_id = t1.id and
q1.owner_user_id = u1.id and
q1.site_id = u1.site_id and
q1.score > 7 and
q1.view_count < 1940 and
c1.site_id = q1.site_id and
c1.post_id = q1.id and

-- to get the display name
account.id = u1.account_id;

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 4076.64, 'Total Cost': 4076.65, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 21.267, 'Actual Total Time': 21.294, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 4076.64, 'Total Cost': 4076.64, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 21.259, 'Actual Total Time': 21.288, 'Actual Rows': 57, 'Actual Loops': 1, 'Sort Key': ['account.display_name'], 'Sort Method': 'quicksort', 'Sort Space Used': 26, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1002.62, 'Total Cost': 4076.63, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 1.916, 'Actual Total Time': 21.272, 'Actual Rows': 57, 'Actual Loops': 1, 'Inner Unique': True, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1002.18, 'Total Cost': 4069.0, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 1.913, 'Actual Total Time': 21.197, 'Actual Rows': 57, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(t1.site_id = c1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1001.62, 'Total Cost': 4061.2, 'Plan Rows': 1, 'Plan Width': 32, 'Actual Startup Time': 1.908, 'Actual Total Time': 21.103, 'Actual Rows': 29, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(t1.site_id = u1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Gather', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 1001.18, 'Total Cost': 4053.54, 'Plan Rows': 1, 'Plan Width': 28, 'Actual Startup Time': 1.904, 'Actual Total Time': 21.021, 'Actual Rows': 29, 'Actual Loops': 1, 'Workers Planned': 1, 'Workers Launched': 1, 'Single Copy': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.18, 'Total Cost': 3053.44, 'Plan Rows': 1, 'Plan Width': 28, 'Actual Startup Time': 5.718, 'Actual Total Time': 15.262, 'Actual Rows': 14, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(t1.site_id = q1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.74, 'Total Cost': 2946.37, 'Plan Rows': 14, 'Plan Width': 16, 'Actual Startup Time': 5.701, 'Actual Total Time': 7.122, 'Actual Rows': 6790, 'Actual Loops': 2, 'Inner Unique': False, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.18, 'Total Cost': 2884.44, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 5.697, 'Actual Total Time': 5.703, 'Actual Rows': 5, 'Actual Loops': 2, 'Inner Unique': True, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.03, 'Total Cost': 2848.0, 'Plan Rows': 15, 'Plan Width': 8, 'Actual Startup Time': 0.114, 'Actual Total Time': 5.665, 'Actual Rows': 44, 'Actual Loops': 2, 'Filter': "((name)::text = ANY ('{emails,composer,drush,theming,tokens,distributions,rating,navigation,path-aliases,entities}'::text[]))", 'Rows Removed by Filter': 93341, 'Workers': []}, {'Node Type': 'Memoize', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 0.15, 'Total Cost': 2.42, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 0, 'Actual Loops': 88, 'Cache Key': 't1.site_id', 'Cache Mode': 'logical', 'Cache Hits': 14, 'Cache Misses': 13, 'Cache Evictions': 0, 'Cache Overflows': 0, 'Peak Memory Usage': 1, 'Workers': [{'Worker Number': 0, 'Cache Hits': 21, 'Cache Misses': 40, 'Cache Evictions': 0, 'Cache Overflows': 0, 'Peak Memory Usage': 3}], 'Plans': [{'Node Type': 'Index Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'site_pkey', 'Relation Name': 'site', 'Alias': 's1', 'Startup Cost': 0.14, 'Total Cost': 2.41, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 0, 'Actual Loops': 53, 'Index Cond': '(site_id = t1.site_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((site_name)::text = 'drupal'::text)", 'Rows Removed by Filter': 1, 'Workers': []}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.62, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.004, 'Actual Total Time': 0.215, 'Actual Rows': 1358, 'Actual Loops': 10, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 7.64, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 0, 'Actual Loops': 13580, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((score > 7) AND (view_count < 1940))', 'Rows Removed by Filter': 1, 'Workers': []}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 7.64, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.003, 'Actual Rows': 1, 'Actual Loops': 29, 'Index Cond': '((id = q1.owner_user_id) AND (site_id = q1.site_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'comment_site_id_post_id_idx', 'Relation Name': 'comment', 'Alias': 'c1', 'Startup Cost': 0.57, 'Total Cost': 7.79, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.003, 'Actual Rows': 2, 'Actual Loops': 29, 'Index Cond': '((site_id = tq1.site_id) AND (post_id = tq1.question_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'account', 'Startup Cost': 0.43, 'Total Cost': 7.63, 'Plan Rows': 1, 'Plan Width': 15, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 57, 'Index Cond': '(id = u1.account_id)', 'Rows Removed by Index Recheck': 0}]}]}]}


sql file: q2-003.sql

sql: select distinct account.display_name
from
tag t1, site s1, question q1, tag_question tq1, so_user u1,
tag t2, site s2, question q2, tag_question tq2, so_user u2,
account
where
-- group theory askers
s1.site_name='drupal' and
t1.name  = 'theming' and
t1.site_id = s1.site_id and
q1.site_id = s1.site_id and
tq1.site_id = s1.site_id and
tq1.question_id = q1.id and
tq1.tag_id = t1.id and
q1.owner_user_id = u1.id and
q1.site_id = u1.site_id and

-- D&D askers
s2.site_name='ru' and
t2.name  = 'php' and
t2.site_id = s2.site_id and
q2.site_id = s2.site_id and
tq2.site_id = s2.site_id and
tq2.question_id = q2.id and
tq2.tag_id = t2.id and
q2.owner_user_id = u2.id and
q2.site_id = u2.site_id and

-- intersect
u1.account_id = u2.account_id and
account.id = u1.account_id;

detailed info: {'Node Type': 'Unique', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 6510.38, 'Total Cost': 6510.39, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 107.727, 'Actual Total Time': 107.954, 'Actual Rows': 5, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 6510.38, 'Total Cost': 6510.39, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 107.726, 'Actual Total Time': 107.951, 'Actual Rows': 7, 'Actual Loops': 1, 'Sort Key': ['account.display_name'], 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3756.38, 'Total Cost': 6510.37, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 101.476, 'Actual Total Time': 107.942, 'Actual Rows': 7, 'Actual Loops': 1, 'Inner Unique': True, 'Plans': [{'Node Type': 'Gather', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3755.95, 'Total Cost': 6502.86, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 101.469, 'Actual Total Time': 107.919, 'Actual Rows': 7, 'Actual Loops': 1, 'Workers Planned': 1, 'Workers Launched': 1, 'Single Copy': False, 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2755.95, 'Total Cost': 5502.76, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 95.871, 'Actual Total Time': 98.988, 'Actual Rows': 4, 'Actual Loops': 2, 'Inner Unique': False, 'Hash Cond': '(u1.account_id = u2.account_id)', 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.61, 'Total Cost': 2751.41, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 3.248, 'Actual Total Time': 13.205, 'Actual Rows': 2714, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(t1.site_id = u1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.17, 'Total Cost': 2743.88, 'Plan Rows': 1, 'Plan Width': 20, 'Actual Startup Time': 3.244, 'Actual Total Time': 9.236, 'Actual Rows': 2714, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(t1.site_id = q1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.74, 'Total Cost': 2638.48, 'Plan Rows': 14, 'Plan Width': 16, 'Actual Startup Time': 3.238, 'Actual Total Time': 4.01, 'Actual Rows': 2714, 'Actual Loops': 2, 'Inner Unique': False, 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.18, 'Total Cost': 2576.49, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 3.228, 'Actual Total Time': 3.232, 'Actual Rows': 0, 'Actual Loops': 2, 'Inner Unique': True, 'Hash Cond': '(t1.site_id = s1.site_id)', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.0, 'Total Cost': 2573.31, 'Plan Rows': 2, 'Plan Width': 8, 'Actual Startup Time': 2.008, 'Actual Total Time': 3.206, 'Actual Rows': 1, 'Actual Loops': 2, 'Filter': "((name)::text = 'theming'::text)", 'Rows Removed by Filter': 93384, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3.16, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.014, 'Actual Total Time': 0.015, 'Actual Rows': 1, 'Actual Loops': 2, 'Hash Buckets': 1024, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 9, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Relation Name': 'site', 'Alias': 's1', 'Startup Cost': 0.0, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.007, 'Actual Total Time': 0.011, 'Actual Rows': 1, 'Actual Loops': 2, 'Filter': "((site_name)::text = 'drupal'::text)", 'Rows Removed by Filter': 172, 'Workers': []}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.69, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.017, 'Actual Total Time': 1.289, 'Actual Rows': 5427, 'Actual Loops': 1, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 7.52, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 5427, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 7.52, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 5427, 'Index Cond': '((id = q1.owner_user_id) AND (site_id = q1.site_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': True, 'Async Capable': False, 'Startup Cost': 2751.32, 'Total Cost': 2751.32, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 85.47, 'Actual Total Time': 85.472, 'Actual Rows': 10210, 'Actual Loops': 2, 'Hash Buckets': 32768, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 1304, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.61, 'Total Cost': 2751.32, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 2.913, 'Actual Total Time': 44.0, 'Actual Rows': 10210, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(t2.site_id = u2.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.17, 'Total Cost': 2743.79, 'Plan Rows': 1, 'Plan Width': 20, 'Actual Startup Time': 2.902, 'Actual Total Time': 29.356, 'Actual Rows': 10210, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(t2.site_id = q2.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.74, 'Total Cost': 2638.39, 'Plan Rows': 14, 'Plan Width': 16, 'Actual Startup Time': 2.893, 'Actual Total Time': 6.574, 'Actual Rows': 10210, 'Actual Loops': 2, 'Inner Unique': False, 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.18, 'Total Cost': 2576.54, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 2.876, 'Actual Total Time': 2.88, 'Actual Rows': 0, 'Actual Loops': 2, 'Inner Unique': True, 'Hash Cond': '(t2.site_id = s2.site_id)', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 't2', 'Startup Cost': 0.0, 'Total Cost': 2573.31, 'Plan Rows': 22, 'Plan Width': 8, 'Actual Startup Time': 0.086, 'Actual Total Time': 2.863, 'Actual Rows': 20, 'Actual Loops': 2, 'Filter': "((name)::text = 'php'::text)", 'Rows Removed by Filter': 93365, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3.16, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.011, 'Actual Total Time': 0.012, 'Actual Rows': 1, 'Actual Loops': 2, 'Hash Buckets': 1024, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 9, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Relation Name': 'site', 'Alias': 's2', 'Startup Cost': 0.0, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.009, 'Actual Total Time': 0.01, 'Actual Rows': 1, 'Actual Loops': 2, 'Filter': "((site_name)::text = 'ru'::text)", 'Rows Removed by Filter': 172, 'Workers': []}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq2', 'Startup Cost': 0.56, 'Total Cost': 61.54, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.032, 'Actual Total Time': 6.41, 'Actual Rows': 20421, 'Actual Loops': 1, 'Index Cond': '((site_id = t2.site_id) AND (tag_id = t2.id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q2', 'Startup Cost': 0.43, 'Total Cost': 7.52, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 20421, 'Index Cond': '((id = tq2.question_id) AND (site_id = tq2.site_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u2', 'Startup Cost': 0.44, 'Total Cost': 7.52, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 20421, 'Index Cond': '((id = q2.owner_user_id) AND (site_id = q2.site_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}]}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'account', 'Startup Cost': 0.43, 'Total Cost': 7.51, 'Plan Rows': 1, 'Plan Width': 15, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.003, 'Actual Rows': 1, 'Actual Loops': 7, 'Index Cond': '(id = u1.account_id)', 'Rows Removed by Index Recheck': 0}]}]}]}


sql file: q3-003.sql

sql: select COUNT(distinct account.display_name)
from
tag t1, site s1, question q1, answer a1, tag_question tq1, so_user u1,
tag t2, site s2, question q2, tag_question tq2, so_user u2,
account
where
-- answerers
s1.site_name='stackoverflow' and
t1.name  = 'matrix' and
t1.site_id = s1.site_id and
q1.site_id = s1.site_id and
tq1.site_id = s1.site_id and
tq1.question_id = q1.id and
tq1.tag_id = t1.id and
a1.site_id = q1.site_id and
a1.question_id = q1.id and
a1.owner_user_id = u1.id and
a1.site_id = u1.site_id and

-- askers
s2.site_name='math' and
t2.name  = 'polynomials' and
t2.site_id = s2.site_id and
q2.site_id = s2.site_id and
tq2.site_id = s2.site_id and
tq2.question_id = q2.id and
tq2.tag_id = t2.id and
q2.owner_user_id = u2.id and
q2.site_id = u2.site_id and


-- intersect
u1.account_id = u2.account_id and
account.id = u1.account_id;

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 6522.52, 'Total Cost': 6522.53, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 118.75, 'Actual Total Time': 120.318, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 6522.52, 'Total Cost': 6522.52, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 118.696, 'Actual Total Time': 120.285, 'Actual Rows': 1049, 'Actual Loops': 1, 'Sort Key': ['account.display_name'], 'Sort Method': 'quicksort', 'Sort Space Used': 72, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 6332.38, 'Total Cost': 6522.51, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 51.432, 'Actual Total Time': 120.176, 'Actual Rows': 1049, 'Actual Loops': 1, 'Inner Unique': True, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 6331.94, 'Total Cost': 6514.85, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 51.426, 'Actual Total Time': 119.381, 'Actual Rows': 1049, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(t1.site_id = q1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Gather', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 6331.51, 'Total Cost': 6507.18, 'Plan Rows': 1, 'Plan Width': 36, 'Actual Startup Time': 51.42, 'Actual Total Time': 117.869, 'Actual Rows': 1049, 'Actual Loops': 1, 'Workers Planned': 1, 'Workers Launched': 1, 'Single Copy': False, 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 5331.51, 'Total Cost': 5507.08, 'Plan Rows': 1, 'Plan Width': 36, 'Actual Startup Time': 49.934, 'Actual Total Time': 82.358, 'Actual Rows': 524, 'Actual Loops': 2, 'Inner Unique': False, 'Hash Cond': '(u1.account_id = u2.account_id)', 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2577.93, 'Total Cost': 2753.49, 'Plan Rows': 1, 'Plan Width': 32, 'Actual Startup Time': 3.086, 'Actual Total Time': 35.211, 'Actual Rows': 5818, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(t1.site_id = u1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2577.49, 'Total Cost': 2745.81, 'Plan Rows': 1, 'Plan Width': 28, 'Actual Startup Time': 3.082, 'Actual Total Time': 25.476, 'Actual Rows': 5818, 'Actual Loops': 2, 'Inner Unique': False, 'Join Filter': '(t1.site_id = a1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2577.06, 'Total Cost': 2638.51, 'Plan Rows': 14, 'Plan Width': 16, 'Actual Startup Time': 3.079, 'Actual Total Time': 8.94, 'Actual Rows': 9068, 'Actual Loops': 2, 'Inner Unique': False, 'Workers': [], 'Plans': [{'Node Type': 'Merge Join', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2576.49, 'Total Cost': 2576.52, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 3.074, 'Actual Total Time': 3.075, 'Actual Rows': 0, 'Actual Loops': 2, 'Inner Unique': True, 'Merge Cond': '(t1.site_id = s1.site_id)', 'Workers': [], 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 2573.32, 'Total Cost': 2573.32, 'Plan Rows': 2, 'Plan Width': 8, 'Actual Startup Time': 3.055, 'Actual Total Time': 3.056, 'Actual Rows': 10, 'Actual Loops': 2, 'Sort Key': ['t1.site_id'], 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory', 'Workers': [{'Worker Number': 0, 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory'}], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.0, 'Total Cost': 2573.31, 'Plan Rows': 2, 'Plan Width': 8, 'Actual Startup Time': 0.353, 'Actual Total Time': 3.049, 'Actual Rows': 10, 'Actual Loops': 2, 'Filter': "((name)::text = 'matrix'::text)", 'Rows Removed by Filter': 93375, 'Workers': []}]}, {'Node Type': 'Sort', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3.17, 'Total Cost': 3.18, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.017, 'Actual Total Time': 0.017, 'Actual Rows': 1, 'Actual Loops': 2, 'Sort Key': ['s1.site_id'], 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory', 'Workers': [{'Worker Number': 0, 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory'}], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Relation Name': 'site', 'Alias': 's1', 'Startup Cost': 0.0, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.014, 'Actual Total Time': 0.014, 'Actual Rows': 1, 'Actual Loops': 2, 'Filter': "((site_name)::text = 'stackoverflow'::text)", 'Rows Removed by Filter': 172, 'Workers': []}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.69, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.008, 'Actual Total Time': 10.825, 'Actual Rows': 18136, 'Actual Loops': 1, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'answer_site_id_question_id_idx', 'Relation Name': 'answer', 'Alias': 'a1', 'Startup Cost': 0.43, 'Total Cost': 7.65, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 18136, 'Index Cond': '((site_id = tq1.site_id) AND (question_id = tq1.question_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 7.66, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 11636, 'Index Cond': '((id = a1.owner_user_id) AND (site_id = a1.site_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': True, 'Async Capable': False, 'Startup Cost': 2753.57, 'Total Cost': 2753.57, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 46.635, 'Actual Total Time': 46.637, 'Actual Rows': 5382, 'Actual Loops': 2, 'Hash Buckets': 16384, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 696, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2577.93, 'Total Cost': 2753.57, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 3.58, 'Actual Total Time': 24.701, 'Actual Rows': 5382, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(t2.site_id = u2.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2577.49, 'Total Cost': 2745.89, 'Plan Rows': 1, 'Plan Width': 20, 'Actual Startup Time': 3.577, 'Actual Total Time': 15.872, 'Actual Rows': 5382, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(t2.site_id = q2.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2577.06, 'Total Cost': 2638.51, 'Plan Rows': 14, 'Plan Width': 16, 'Actual Startup Time': 3.573, 'Actual Total Time': 6.204, 'Actual Rows': 5382, 'Actual Loops': 2, 'Inner Unique': False, 'Workers': [], 'Plans': [{'Node Type': 'Merge Join', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2576.49, 'Total Cost': 2576.52, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 3.567, 'Actual Total Time': 3.568, 'Actual Rows': 0, 'Actual Loops': 2, 'Inner Unique': True, 'Merge Cond': '(t2.site_id = s2.site_id)', 'Workers': [], 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 2573.32, 'Total Cost': 2573.32, 'Plan Rows': 2, 'Plan Width': 8, 'Actual Startup Time': 3.561, 'Actual Total Time': 3.561, 'Actual Rows': 2, 'Actual Loops': 2, 'Sort Key': ['t2.site_id'], 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory', 'Workers': [{'Worker Number': 0, 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory'}], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 't2', 'Startup Cost': 0.0, 'Total Cost': 2573.31, 'Plan Rows': 2, 'Plan Width': 8, 'Actual Startup Time': 1.528, 'Actual Total Time': 3.555, 'Actual Rows': 5, 'Actual Loops': 2, 'Filter': "((name)::text = 'polynomials'::text)", 'Rows Removed by Filter': 93380, 'Workers': []}]}, {'Node Type': 'Sort', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3.17, 'Total Cost': 3.18, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.009, 'Actual Total Time': 0.009, 'Actual Rows': 1, 'Actual Loops': 1, 'Sort Key': ['s2.site_id'], 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Relation Name': 'site', 'Alias': 's2', 'Startup Cost': 0.0, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.005, 'Actual Total Time': 0.007, 'Actual Rows': 1, 'Actual Loops': 1, 'Filter': "((site_name)::text = 'math'::text)", 'Rows Removed by Filter': 172, 'Workers': []}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq2', 'Startup Cost': 0.56, 'Total Cost': 61.69, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.011, 'Actual Total Time': 4.76, 'Actual Rows': 10763, 'Actual Loops': 1, 'Index Cond': '((site_id = t2.site_id) AND (tag_id = t2.id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q2', 'Startup Cost': 0.43, 'Total Cost': 7.66, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 10763, 'Index Cond': '((id = tq2.question_id) AND (site_id = tq2.site_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u2', 'Startup Cost': 0.44, 'Total Cost': 7.66, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 10763, 'Index Cond': '((id = q2.owner_user_id) AND (site_id = q2.site_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}]}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 7.66, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 1049, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'account', 'Startup Cost': 0.43, 'Total Cost': 7.65, 'Plan Rows': 1, 'Plan Width': 15, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 1049, 'Index Cond': '(id = u1.account_id)', 'Rows Removed by Index Recheck': 0}]}]}]}


sql file: q14-004.sql

sql: SELECT COUNT(*)
FROM
site as s,
so_user as u1,
question as q1,
answer as a1,
tag as t1,
tag_question as tq1,
badge as b,
account as acc
WHERE
s.site_id = q1.site_id
AND s.site_id = u1.site_id
AND s.site_id = a1.site_id
AND s.site_id = t1.site_id
AND s.site_id = tq1.site_id
AND s.site_id = b.site_id
AND q1.id = tq1.question_id
AND q1.id = a1.question_id
AND a1.owner_user_id = u1.id
AND t1.id = tq1.tag_id
AND b.user_id = u1.id
AND acc.id = u1.account_id
AND (s.site_name in ('askubuntu','math'))
AND (t1.name in ('discrete-mathematics','elementary-number-theory','ordinary-differential-equations','statistics','systems-of-equations','vectors'))
AND (q1.view_count >= 0)
AND (q1.view_count <= 100)
AND (u1.downvotes >= 0)
AND (u1.downvotes <= 1)
AND (b.name ILIKE '%ste%')

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 4319.89, 'Total Cost': 4319.9, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 154.949, 'Actual Total Time': 154.986, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4129.88, 'Total Cost': 4319.89, 'Plan Rows': 1, 'Plan Width': 0, 'Actual Startup Time': 10.491, 'Actual Total Time': 154.977, 'Actual Rows': 79, 'Actual Loops': 1, 'Inner Unique': True, 'Plans': [{'Node Type': 'Gather', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 4129.44, 'Total Cost': 4312.64, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 10.489, 'Actual Total Time': 154.888, 'Actual Rows': 79, 'Actual Loops': 1, 'Workers Planned': 1, 'Workers Launched': 1, 'Single Copy': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3129.44, 'Total Cost': 3312.54, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 12.146, 'Actual Total Time': 124.84, 'Actual Rows': 40, 'Actual Loops': 2, 'Inner Unique': False, 'Join Filter': '((s.site_id = b.site_id) AND (b.user_id = a1.owner_user_id))', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3128.88, 'Total Cost': 3305.06, 'Plan Rows': 1, 'Plan Width': 36, 'Actual Startup Time': 9.39, 'Actual Total Time': 97.33, 'Actual Rows': 719, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(s.site_id = q1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3128.44, 'Total Cost': 3297.8, 'Plan Rows': 1, 'Plan Width': 40, 'Actual Startup Time': 7.533, 'Actual Total Time': 90.978, 'Actual Rows': 2522, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(s.site_id = u1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3128.0, 'Total Cost': 3290.52, 'Plan Rows': 1, 'Plan Width': 28, 'Actual Startup Time': 7.441, 'Actual Total Time': 66.312, 'Actual Rows': 18093, 'Actual Loops': 2, 'Inner Unique': False, 'Join Filter': '(s.site_id = a1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3127.57, 'Total Cost': 3189.02, 'Plan Rows': 14, 'Plan Width': 16, 'Actual Startup Time': 7.379, 'Actual Total Time': 25.365, 'Actual Rows': 34382, 'Actual Loops': 2, 'Inner Unique': False, 'Join Filter': '(s.site_id = tq1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Merge Join', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3127.01, 'Total Cost': 3127.25, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 6.612, 'Actual Total Time': 6.619, 'Actual Rows': 3, 'Actual Loops': 2, 'Inner Unique': True, 'Merge Cond': '(t1.site_id = s.site_id)', 'Workers': [], 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3123.83, 'Total Cost': 3123.94, 'Plan Rows': 44, 'Plan Width': 8, 'Actual Startup Time': 6.589, 'Actual Total Time': 6.591, 'Actual Rows': 24, 'Actual Loops': 2, 'Sort Key': ['t1.site_id'], 'Sort Method': 'quicksort', 'Sort Space Used': 26, 'Sort Space Type': 'Memory', 'Workers': [{'Worker Number': 0, 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory'}], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.0, 'Total Cost': 3122.63, 'Plan Rows': 44, 'Plan Width': 8, 'Actual Startup Time': 0.236, 'Actual Total Time': 6.578, 'Actual Rows': 42, 'Actual Loops': 2, 'Filter': "((name)::text = ANY ('{discrete-mathematics,elementary-number-theory,ordinary-differential-equations,statistics,systems-of-equations,vectors}'::text[]))", 'Rows Removed by Filter': 93343, 'Workers': []}]}, {'Node Type': 'Sort', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3.17, 'Total Cost': 3.18, 'Plan Rows': 2, 'Plan Width': 4, 'Actual Startup Time': 0.02, 'Actual Total Time': 0.021, 'Actual Rows': 2, 'Actual Loops': 2, 'Sort Key': ['s.site_id'], 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory', 'Workers': [{'Worker Number': 0, 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory'}], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Relation Name': 'site', 'Alias': 's', 'Startup Cost': 0.0, 'Total Cost': 3.16, 'Plan Rows': 2, 'Plan Width': 4, 'Actual Startup Time': 0.012, 'Actual Total Time': 0.017, 'Actual Rows': 2, 'Actual Loops': 2, 'Filter': "((site_name)::text = ANY ('{askubuntu,math}'::text[]))", 'Rows Removed by Filter': 171, 'Workers': []}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.38, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.26, 'Actual Total Time': 5.583, 'Actual Rows': 11461, 'Actual Loops': 6, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'answer_site_id_question_id_idx', 'Relation Name': 'answer', 'Alias': 'a1', 'Startup Cost': 0.43, 'Total Cost': 7.24, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 68765, 'Index Cond': '((site_id = tq1.site_id) AND (question_id = tq1.question_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 7.26, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 0, 'Actual Loops': 36186, 'Index Cond': '((id = a1.owner_user_id) AND (site_id = a1.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((downvotes >= 0) AND (downvotes <= 1))', 'Rows Removed by Filter': 1, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 7.25, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 0, 'Actual Loops': 5043, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((view_count >= 0) AND (view_count <= 100))', 'Rows Removed by Filter': 1, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'badge_pkey', 'Relation Name': 'badge', 'Alias': 'b', 'Startup Cost': 0.56, 'Total Cost': 7.47, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.038, 'Actual Total Time': 0.038, 'Actual Rows': 0, 'Actual Loops': 1438, 'Index Cond': '((site_id = u1.site_id) AND (user_id = u1.id))', 'Rows Removed by Index Recheck': 0, 'Filter': "((name)::text ~~* '%ste%'::text)", 'Rows Removed by Filter': 100, 'Workers': []}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'acc', 'Startup Cost': 0.43, 'Total Cost': 7.25, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 79, 'Index Cond': '(id = u1.account_id)', 'Rows Removed by Index Recheck': 0}]}]}


sql file: q9-006.sql

sql: select count(distinct account.id) from
account, site, so_user, question q, post_link pl, tag, tag_question tq where
not exists (select * from answer a where a.site_id = q.site_id and a.question_id = q.id) and
site.site_name = 'stackoverflow' and
site.site_id = q.site_id and
pl.site_id = q.site_id and
pl.post_id_to = q.id and

tag.name = 'unity3d' and
tag.site_id = q.site_id and

q.creation_date > '2016-01-01'::date and

tq.site_id = tag.site_id and
tq.tag_id = tag.id and
tq.question_id = q.id and

q.owner_user_id = so_user.id and
q.site_id = so_user.site_id and
so_user.reputation > 96 and

account.id = so_user.account_id and
account.website_url != '';

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3323553.68, 'Total Cost': 3323553.69, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 1667.359, 'Actual Total Time': 1679.328, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3323553.67, 'Total Cost': 3323553.68, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 1667.348, 'Actual Total Time': 1679.318, 'Actual Rows': 72, 'Actual Loops': 1, 'Sort Key': ['account.id'], 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Gather', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 2512629.85, 'Total Cost': 3323553.66, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 1666.006, 'Actual Total Time': 1679.305, 'Actual Rows': 72, 'Actual Loops': 1, 'Workers Planned': 7, 'Workers Launched': 7, 'Single Copy': False, 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Join Type': 'Right Anti', 'Startup Cost': 2511629.85, 'Total Cost': 3322553.56, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 1663.656, 'Actual Total Time': 1663.669, 'Actual Rows': 9, 'Actual Loops': 8, 'Inner Unique': False, 'Hash Cond': '((a.site_id = q.site_id) AND (a.question_id = q.id))', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'answer', 'Alias': 'a', 'Startup Cost': 0.0, 'Total Cost': 804116.4, 'Plan Rows': 907640, 'Plan Width': 8, 'Actual Startup Time': 0.018, 'Actual Total Time': 151.675, 'Actual Rows': 793444, 'Actual Loops': 8, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': True, 'Async Capable': False, 'Startup Cost': 2511629.83, 'Total Cost': 2511629.83, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 1472.383, 'Actual Total Time': 1472.394, 'Actual Rows': 39, 'Actual Loops': 8, 'Hash Buckets': 1024, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 264, 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2484399.3, 'Total Cost': 2511629.83, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 1461.55, 'Actual Total Time': 1472.361, 'Actual Rows': 39, 'Actual Loops': 8, 'Inner Unique': False, 'Hash Cond': '((pl.site_id = site.site_id) AND (pl.post_id_to = q.id))', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'post_link', 'Alias': 'pl', 'Startup Cost': 0.0, 'Total Cost': 21752.3, 'Plan Rows': 730430, 'Plan Width': 8, 'Actual Startup Time': 0.006, 'Actual Total Time': 11.747, 'Actual Rows': 283042, 'Actual Loops': 8, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': True, 'Async Capable': False, 'Startup Cost': 2484399.28, 'Total Cost': 2484399.28, 'Plan Rows': 1, 'Plan Width': 32, 'Actual Startup Time': 1446.76, 'Actual Total Time': 1446.77, 'Actual Rows': 165, 'Actual Loops': 8, 'Hash Buckets': 1024, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 264, 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2232020.77, 'Total Cost': 2484399.28, 'Plan Rows': 1, 'Plan Width': 32, 'Actual Startup Time': 1348.225, 'Actual Total Time': 1446.646, 'Actual Rows': 165, 'Actual Loops': 8, 'Inner Unique': False, 'Hash Cond': '((so_user.site_id = site.site_id) AND (so_user.id = q.owner_user_id))', 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 150846.03, 'Total Cost': 402907.99, 'Plan Rows': 42206, 'Plan Width': 12, 'Actual Startup Time': 81.46, 'Actual Total Time': 231.722, 'Actual Rows': 186086, 'Actual Loops': 8, 'Inner Unique': True, 'Hash Cond': '(so_user.account_id = account.id)', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'so_user', 'Alias': 'so_user', 'Startup Cost': 0.0, 'Total Cost': 249942.21, 'Plan Rows': 807523, 'Plan Width': 12, 'Actual Startup Time': 0.019, 'Actual Total Time': 89.623, 'Actual Rows': 507431, 'Actual Loops': 8, 'Filter': '(reputation > 96)', 'Rows Removed by Filter': 2129731, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': True, 'Async Capable': False, 'Startup Cost': 149034.54, 'Total Cost': 149034.54, 'Plan Rows': 144919, 'Plan Width': 4, 'Actual Startup Time': 81.185, 'Actual Total Time': 81.186, 'Actual Rows': 90584, 'Actual Loops': 8, 'Hash Buckets': 1048576, 'Original Hash Buckets': 1048576, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 36640, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'account', 'Alias': 'account', 'Startup Cost': 0.0, 'Total Cost': 149034.54, 'Plan Rows': 144919, 'Plan Width': 4, 'Actual Startup Time': 0.019, 'Actual Total Time': 68.656, 'Actual Rows': 90584, 'Actual Loops': 8, 'Filter': "((website_url)::text <> ''::text)", 'Rows Removed by Filter': 1643435, 'Workers': []}]}]}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': True, 'Async Capable': False, 'Startup Cost': 2081174.73, 'Total Cost': 2081174.73, 'Plan Rows': 1, 'Plan Width': 28, 'Actual Startup Time': 1203.776, 'Actual Total Time': 1203.782, 'Actual Rows': 2041, 'Actual Loops': 8, 'Hash Buckets': 16384, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 1432, 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 295801.63, 'Total Cost': 2081174.73, 'Plan Rows': 1, 'Plan Width': 28, 'Actual Startup Time': 774.245, 'Actual Total Time': 1152.385, 'Actual Rows': 2041, 'Actual Loops': 8, 'Inner Unique': False, 'Hash Cond': '((q.site_id = site.site_id) AND (q.id = tq.question_id))', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'question', 'Alias': 'q', 'Startup Cost': 0.0, 'Total Cost': 1779220.98, 'Plan Rows': 820281, 'Plan Width': 12, 'Actual Startup Time': 0.033, 'Actual Total Time': 339.094, 'Actual Rows': 726054, 'Actual Loops': 8, 'Filter': "(creation_date > '2016-01-01'::date)", 'Rows Removed by Filter': 857251, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': True, 'Async Capable': False, 'Startup Cost': 295801.55, 'Total Cost': 295801.55, 'Plan Rows': 5, 'Plan Width': 16, 'Actual Startup Time': 773.963, 'Actual Total Time': 773.967, 'Actual Rows': 3132, 'Actual Loops': 8, 'Hash Buckets': 32768, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 1784, 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2576.51, 'Total Cost': 295801.55, 'Plan Rows': 5, 'Plan Width': 16, 'Actual Startup Time': 59.838, 'Actual Total Time': 561.402, 'Actual Rows': 3132, 'Actual Loops': 8, 'Inner Unique': True, 'Hash Cond': '((site.site_id = tag.site_id) AND (tq.tag_id = tag.id))', 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.18, 'Total Cost': 293004.34, 'Plan Rows': 42642, 'Plan Width': 16, 'Actual Startup Time': 50.342, 'Actual Total Time': 451.568, 'Actual Rows': 3477604, 'Actual Loops': 8, 'Inner Unique': True, 'Hash Cond': '(tq.site_id = site.site_id)', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag_question', 'Alias': 'tq', 'Startup Cost': 0.0, 'Total Cost': 273162.12, 'Plan Rows': 7377012, 'Plan Width': 12, 'Actual Startup Time': 0.025, 'Actual Total Time': 176.767, 'Actual Rows': 4610477, 'Actual Loops': 8, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3.16, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.017, 'Actual Total Time': 0.018, 'Actual Rows': 1, 'Actual Loops': 8, 'Hash Buckets': 1024, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 9, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Relation Name': 'site', 'Alias': 'site', 'Startup Cost': 0.0, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.015, 'Actual Total Time': 0.016, 'Actual Rows': 1, 'Actual Loops': 8, 'Filter': "((site_name)::text = 'stackoverflow'::text)", 'Rows Removed by Filter': 172, 'Workers': []}]}]}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': True, 'Async Capable': False, 'Startup Cost': 2573.31, 'Total Cost': 2573.31, 'Plan Rows': 2, 'Plan Width': 8, 'Actual Startup Time': 0.947, 'Actual Total Time': 0.948, 'Actual Rows': 1, 'Actual Loops': 8, 'Hash Buckets': 1024, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 104, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 'tag', 'Startup Cost': 0.0, 'Total Cost': 2573.31, 'Plan Rows': 2, 'Plan Width': 8, 'Actual Startup Time': 0.485, 'Actual Total Time': 0.934, 'Actual Rows': 1, 'Actual Loops': 8, 'Filter': "((name)::text = 'unity3d'::text)", 'Rows Removed by Filter': 23345, 'Workers': []}]}]}]}]}]}]}]}]}]}]}]}]}]}


sql file: q16-004.sql

sql: SELECT COUNT(*)
FROM
site as s,
so_user as u1,
tag as t1,
tag_question as tq1,
question as q1,
badge as b1,
account as acc
WHERE
s.site_id = u1.site_id
AND s.site_id = b1.site_id
AND s.site_id = t1.site_id
AND s.site_id = tq1.site_id
AND s.site_id = q1.site_id
AND t1.id = tq1.tag_id
AND q1.id = tq1.question_id
AND q1.owner_user_id = u1.id
AND acc.id = u1.account_id
AND b1.user_id = u1.id
AND (q1.favorite_count >= 0)
AND (q1.favorite_count <= 1)
AND s.site_name = 'stackoverflow'
AND (t1.name in ('excel','google-cloud-storage','javafx-2','listview','mobile-safari','npgsql','out-of-memory','system.reactive','word-wrap','wxpython'))
AND (acc.website_url ILIKE ('%de'))

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 4035.0, 'Total Cost': 4035.01, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 839.063, 'Actual Total Time': 882.992, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3853.9, 'Total Cost': 4035.0, 'Plan Rows': 1, 'Plan Width': 0, 'Actual Startup Time': 18.16, 'Actual Total Time': 882.929, 'Actual Rows': 1791, 'Actual Loops': 1, 'Inner Unique': True, 'Plans': [{'Node Type': 'Gather', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3853.46, 'Total Cost': 4028.11, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 10.052, 'Actual Total Time': 296.058, 'Actual Rows': 866262, 'Actual Loops': 1, 'Workers Planned': 1, 'Workers Launched': 1, 'Single Copy': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2853.46, 'Total Cost': 3028.01, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 7.423, 'Actual Total Time': 484.077, 'Actual Rows': 433131, 'Actual Loops': 2, 'Inner Unique': False, 'Join Filter': '((s.site_id = b1.site_id) AND (b1.user_id = q1.owner_user_id))', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2852.9, 'Total Cost': 3024.12, 'Plan Rows': 1, 'Plan Width': 32, 'Actual Startup Time': 7.377, 'Actual Total Time': 399.467, 'Actual Rows': 10219, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(s.site_id = u1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2852.46, 'Total Cost': 3010.27, 'Plan Rows': 2, 'Plan Width': 20, 'Actual Startup Time': 7.33, 'Actual Total Time': 356.019, 'Actual Rows': 10219, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(s.site_id = q1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2852.03, 'Total Cost': 2913.56, 'Plan Rows': 14, 'Plan Width': 16, 'Actual Startup Time': 7.289, 'Actual Total Time': 120.533, 'Actual Rows': 70740, 'Actual Loops': 2, 'Inner Unique': False, 'Join Filter': '(s.site_id = tq1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Merge Join', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2851.46, 'Total Cost': 2851.55, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 7.269, 'Actual Total Time': 7.28, 'Actual Rows': 5, 'Actual Loops': 2, 'Inner Unique': True, 'Merge Cond': '(t1.site_id = s.site_id)', 'Workers': [], 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 2848.29, 'Total Cost': 2848.33, 'Plan Rows': 15, 'Plan Width': 8, 'Actual Startup Time': 7.254, 'Actual Total Time': 7.257, 'Actual Rows': 23, 'Actual Loops': 2, 'Sort Key': ['t1.site_id'], 'Sort Method': 'quicksort', 'Sort Space Used': 26, 'Sort Space Type': 'Memory', 'Workers': [{'Worker Number': 0, 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory'}], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.03, 'Total Cost': 2848.0, 'Plan Rows': 15, 'Plan Width': 8, 'Actual Startup Time': 0.318, 'Actual Total Time': 7.212, 'Actual Rows': 26, 'Actual Loops': 2, 'Filter': "((name)::text = ANY ('{excel,google-cloud-storage,javafx-2,listview,mobile-safari,npgsql,out-of-memory,system.reactive,word-wrap,wxpython}'::text[]))", 'Rows Removed by Filter': 93359, 'Workers': []}]}, {'Node Type': 'Sort', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3.17, 'Total Cost': 3.18, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.012, 'Actual Total Time': 0.013, 'Actual Rows': 1, 'Actual Loops': 2, 'Sort Key': ['s.site_id'], 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory', 'Workers': [{'Worker Number': 0, 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory'}], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Relation Name': 'site', 'Alias': 's', 'Startup Cost': 0.0, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.009, 'Actual Total Time': 0.01, 'Actual Rows': 1, 'Actual Loops': 2, 'Filter': "((site_name)::text = 'stackoverflow'::text)", 'Rows Removed by Filter': 172, 'Workers': []}]}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.62, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.011, 'Actual Total Time': 21.926, 'Actual Rows': 14148, 'Actual Loops': 10, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 141479, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 6.9, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.003, 'Actual Rows': 0, 'Actual Loops': 141479, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((favorite_count >= 0) AND (favorite_count <= 1))', 'Rows Removed by Filter': 1, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 6.91, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.004, 'Actual Total Time': 0.004, 'Actual Rows': 1, 'Actual Loops': 20438, 'Index Cond': '((id = q1.owner_user_id) AND (site_id = q1.site_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'badge_pkey', 'Relation Name': 'badge', 'Alias': 'b1', 'Startup Cost': 0.56, 'Total Cost': 3.87, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.004, 'Actual Total Time': 0.006, 'Actual Rows': 42, 'Actual Loops': 20438, 'Index Cond': '((site_id = u1.site_id) AND (user_id = u1.id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 0, 'Workers': []}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'acc', 'Startup Cost': 0.43, 'Total Cost': 6.89, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 0, 'Actual Loops': 866262, 'Index Cond': '(id = u1.account_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((website_url)::text ~~* '%de'::text)", 'Rows Removed by Filter': 1}]}]}


sql file: q13-004.sql

sql: SELECT acc.location, count(*)
FROM
site as s,
so_user as u1,
question as q1,
answer as a1,
tag as t1,
tag_question as tq1,
badge as b,
account as acc
WHERE
s.site_id = q1.site_id
AND s.site_id = u1.site_id
AND s.site_id = a1.site_id
AND s.site_id = t1.site_id
AND s.site_id = tq1.site_id
AND s.site_id = b.site_id
AND q1.id = tq1.question_id
AND q1.id = a1.question_id
AND a1.owner_user_id = u1.id
AND t1.id = tq1.tag_id
AND b.user_id = u1.id
AND acc.id = u1.account_id
AND (s.site_name in ('physics','pt','ru','salesforce','serverfault'))
AND (t1.name in ('ajax','banco-de-dados','c#','electromagnetism','electrostatics','jquery','json','laravel','linux','quantum-field-theory','thermodynamics','база-данных','регулярные-выражения'))
AND (q1.view_count >= 0)
AND (q1.view_count <= 100)
AND (u1.reputation >= 10)
AND (u1.reputation <= 100000)
AND (b.name in ('Suffrage','Talkative'))
GROUP BY acc.location
ORDER BY COUNT(*)
DESC
LIMIT 100

detailed info: {'Node Type': 'Limit', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 5791.42, 'Total Cost': 5791.43, 'Plan Rows': 1, 'Plan Width': 26, 'Actual Startup Time': 168.13, 'Actual Total Time': 177.123, 'Actual Rows': 100, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 5791.42, 'Total Cost': 5791.43, 'Plan Rows': 1, 'Plan Width': 26, 'Actual Startup Time': 168.129, 'Actual Total Time': 177.118, 'Actual Rows': 100, 'Actual Loops': 1, 'Sort Key': ['(count(*)) DESC'], 'Sort Method': 'top-N heapsort', 'Sort Space Used': 37, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Aggregate', 'Strategy': 'Sorted', 'Partial Mode': 'Simple', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 5791.39, 'Total Cost': 5791.41, 'Plan Rows': 1, 'Plan Width': 26, 'Actual Startup Time': 167.764, 'Actual Total Time': 177.082, 'Actual Rows': 346, 'Actual Loops': 1, 'Group Key': ['acc.location'], 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 5791.39, 'Total Cost': 5791.4, 'Plan Rows': 1, 'Plan Width': 18, 'Actual Startup Time': 167.756, 'Actual Total Time': 176.87, 'Actual Rows': 6159, 'Actual Loops': 1, 'Sort Key': ['acc.location'], 'Sort Method': 'quicksort', 'Sort Space Used': 376, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1003.01, 'Total Cost': 5791.38, 'Plan Rows': 1, 'Plan Width': 18, 'Actual Startup Time': 7.829, 'Actual Total Time': 175.796, 'Actual Rows': 6159, 'Actual Loops': 1, 'Inner Unique': True, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1002.58, 'Total Cost': 5784.14, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 7.825, 'Actual Total Time': 169.891, 'Actual Rows': 6159, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(s.site_id = b.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1002.01, 'Total Cost': 5780.1, 'Plan Rows': 1, 'Plan Width': 36, 'Actual Startup Time': 7.812, 'Actual Total Time': 136.848, 'Actual Rows': 7885, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(s.site_id = q1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Gather', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 1001.58, 'Total Cost': 5772.83, 'Plan Rows': 1, 'Plan Width': 40, 'Actual Startup Time': 5.914, 'Actual Total Time': 70.836, 'Actual Rows': 40329, 'Actual Loops': 1, 'Workers Planned': 1, 'Workers Launched': 1, 'Single Copy': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.58, 'Total Cost': 4772.73, 'Plan Rows': 1, 'Plan Width': 40, 'Actual Startup Time': 4.794, 'Actual Total Time': 103.773, 'Actual Rows': 20164, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(s.site_id = u1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.14, 'Total Cost': 4765.45, 'Plan Rows': 1, 'Plan Width': 28, 'Actual Startup Time': 4.781, 'Actual Total Time': 73.12, 'Actual Rows': 22377, 'Actual Loops': 2, 'Inner Unique': False, 'Join Filter': '(s.site_id = a1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.71, 'Total Cost': 4373.94, 'Plan Rows': 54, 'Plan Width': 16, 'Actual Startup Time': 4.775, 'Actual Total Time': 28.187, 'Actual Rows': 46191, 'Actual Loops': 2, 'Inner Unique': False, 'Join Filter': '(s.site_id = tq1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.14, 'Total Cost': 4250.84, 'Plan Rows': 2, 'Plan Width': 12, 'Actual Startup Time': 4.752, 'Actual Total Time': 11.076, 'Actual Rows': 14, 'Actual Loops': 2, 'Inner Unique': True, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.0, 'Total Cost': 4083.95, 'Plan Rows': 75, 'Plan Width': 8, 'Actual Startup Time': 0.026, 'Actual Total Time': 11.002, 'Actual Rows': 111, 'Actual Loops': 2, 'Filter': "((name)::text = ANY ('{ajax,banco-de-dados,c#,electromagnetism,electrostatics,jquery,json,laravel,linux,quantum-field-theory,thermodynamics,база-данных,регулярные-выражения}'::text[]))", 'Rows Removed by Filter': 93274, 'Workers': []}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'site_pkey', 'Relation Name': 'site', 'Alias': 's', 'Startup Cost': 0.14, 'Total Cost': 2.22, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 0, 'Actual Loops': 222, 'Index Cond': '(site_id = t1.site_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((site_name)::text = ANY ('{physics,pt,ru,salesforce,serverfault}'::text[]))", 'Rows Removed by Filter': 1, 'Workers': []}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.16, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.007, 'Actual Total Time': 1.101, 'Actual Rows': 3422, 'Actual Loops': 27, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 92382, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'answer_site_id_question_id_idx', 'Relation Name': 'answer', 'Alias': 'a1', 'Startup Cost': 0.43, 'Total Cost': 7.24, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 0, 'Actual Loops': 92382, 'Index Cond': '((site_id = tq1.site_id) AND (question_id = tq1.question_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 7.26, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 44754, 'Index Cond': '((id = a1.owner_user_id) AND (site_id = a1.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((reputation >= 10) AND (reputation <= 100000))', 'Rows Removed by Filter': 0, 'Workers': []}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 7.25, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 0, 'Actual Loops': 40329, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((view_count >= 0) AND (view_count <= 100))', 'Rows Removed by Filter': 1}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'badge_pkey', 'Relation Name': 'badge', 'Alias': 'b', 'Startup Cost': 0.56, 'Total Cost': 4.03, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.004, 'Actual Total Time': 0.004, 'Actual Rows': 1, 'Actual Loops': 7885, 'Index Cond': '((site_id = a1.site_id) AND (user_id = a1.owner_user_id))', 'Rows Removed by Index Recheck': 0, 'Filter': "((name)::text = ANY ('{Suffrage,Talkative}'::text[]))", 'Rows Removed by Filter': 57, 'Heap Fetches': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'acc', 'Startup Cost': 0.43, 'Total Cost': 7.25, 'Plan Rows': 1, 'Plan Width': 22, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 6159, 'Index Cond': '(id = u1.account_id)', 'Rows Removed by Index Recheck': 0}]}]}]}]}]}


sql file: q16-002.sql

sql: SELECT COUNT(*)
FROM
site as s,
so_user as u1,
tag as t1,
tag_question as tq1,
question as q1,
badge as b1,
account as acc
WHERE
s.site_id = u1.site_id
AND s.site_id = b1.site_id
AND s.site_id = t1.site_id
AND s.site_id = tq1.site_id
AND s.site_id = q1.site_id
AND t1.id = tq1.tag_id
AND q1.id = tq1.question_id
AND q1.owner_user_id = u1.id
AND acc.id = u1.account_id
AND b1.user_id = u1.id
AND (q1.score >= 10)
AND (q1.score <= 1000)
AND s.site_name = 'stackoverflow'
AND (t1.name in ('apple-push-notifications','argparse','automation','charts','clickonce','deprecated','git-merge','lodash','new-operator','project-management'))
AND (acc.website_url ILIKE ('%de'))

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 4032.19, 'Total Cost': 4032.2, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 259.645, 'Actual Total Time': 259.702, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3854.77, 'Total Cost': 4032.18, 'Plan Rows': 1, 'Plan Width': 0, 'Actual Startup Time': 23.456, 'Actual Total Time': 259.66, 'Actual Rows': 1510, 'Actual Loops': 1, 'Inner Unique': True, 'Plans': [{'Node Type': 'Gather', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3854.34, 'Total Cost': 4025.29, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 6.491, 'Actual Total Time': 123.554, 'Actual Rows': 207412, 'Actual Loops': 1, 'Workers Planned': 1, 'Workers Launched': 1, 'Single Copy': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2854.34, 'Total Cost': 3025.19, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 5.325, 'Actual Total Time': 127.983, 'Actual Rows': 103706, 'Actual Loops': 2, 'Inner Unique': False, 'Join Filter': '((s.site_id = b1.site_id) AND (b1.user_id = q1.owner_user_id))', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2853.77, 'Total Cost': 3018.02, 'Plan Rows': 1, 'Plan Width': 32, 'Actual Startup Time': 5.312, 'Actual Total Time': 57.841, 'Actual Rows': 744, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(s.site_id = u1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2853.33, 'Total Cost': 3011.07, 'Plan Rows': 1, 'Plan Width': 20, 'Actual Startup Time': 5.303, 'Actual Total Time': 55.643, 'Actual Rows': 744, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(s.site_id = q1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2852.9, 'Total Cost': 2914.35, 'Plan Rows': 14, 'Plan Width': 16, 'Actual Startup Time': 5.288, 'Actual Total Time': 23.192, 'Actual Rows': 14996, 'Actual Loops': 2, 'Inner Unique': False, 'Join Filter': '(s.site_id = tq1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Merge Join', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2852.33, 'Total Cost': 2852.57, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 5.27, 'Actual Total Time': 5.278, 'Actual Rows': 5, 'Actual Loops': 2, 'Inner Unique': True, 'Merge Cond': '(t1.site_id = s.site_id)', 'Workers': [], 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 2849.16, 'Total Cost': 2849.27, 'Plan Rows': 43, 'Plan Width': 8, 'Actual Startup Time': 5.252, 'Actual Total Time': 5.255, 'Actual Rows': 42, 'Actual Loops': 2, 'Sort Key': ['t1.site_id'], 'Sort Method': 'quicksort', 'Sort Space Used': 27, 'Sort Space Type': 'Memory', 'Workers': [{'Worker Number': 0, 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory'}], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.03, 'Total Cost': 2848.0, 'Plan Rows': 43, 'Plan Width': 8, 'Actual Startup Time': 0.139, 'Actual Total Time': 5.24, 'Actual Rows': 50, 'Actual Loops': 2, 'Filter': "((name)::text = ANY ('{apple-push-notifications,argparse,automation,charts,clickonce,deprecated,git-merge,lodash,new-operator,project-management}'::text[]))", 'Rows Removed by Filter': 93336, 'Workers': []}]}, {'Node Type': 'Sort', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3.17, 'Total Cost': 3.18, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.013, 'Actual Total Time': 0.014, 'Actual Rows': 1, 'Actual Loops': 2, 'Sort Key': ['s.site_id'], 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory', 'Workers': [{'Worker Number': 0, 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory'}], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Relation Name': 'site', 'Alias': 's', 'Startup Cost': 0.0, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.01, 'Actual Total Time': 0.01, 'Actual Rows': 1, 'Actual Loops': 2, 'Filter': "((site_name)::text = 'stackoverflow'::text)", 'Rows Removed by Filter': 172, 'Workers': []}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.4, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.009, 'Actual Total Time': 3.408, 'Actual Rows': 2999, 'Actual Loops': 10, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 6.9, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 0, 'Actual Loops': 29992, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0, 'Filter': '((score >= 10) AND (score <= 1000))', 'Rows Removed by Filter': 1, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 6.94, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.003, 'Actual Rows': 1, 'Actual Loops': 1487, 'Index Cond': '((id = q1.owner_user_id) AND (site_id = q1.site_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'badge_pkey', 'Relation Name': 'badge', 'Alias': 'b1', 'Startup Cost': 0.56, 'Total Cost': 7.16, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.004, 'Actual Total Time': 0.087, 'Actual Rows': 139, 'Actual Loops': 1487, 'Index Cond': '((site_id = u1.site_id) AND (user_id = u1.id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'acc', 'Startup Cost': 0.43, 'Total Cost': 6.89, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 0, 'Actual Loops': 207412, 'Index Cond': '(id = u1.account_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((website_url)::text ~~* '%de'::text)", 'Rows Removed by Filter': 1}]}]}


sql file: q2-005.sql

sql: select distinct account.display_name
from
tag t1, site s1, question q1, tag_question tq1, so_user u1,
tag t2, site s2, question q2, tag_question tq2, so_user u2,
account
where
-- group theory askers
s1.site_name='stackoverflow' and
t1.name  = 'forms' and
t1.site_id = s1.site_id and
q1.site_id = s1.site_id and
tq1.site_id = s1.site_id and
tq1.question_id = q1.id and
tq1.tag_id = t1.id and
q1.owner_user_id = u1.id and
q1.site_id = u1.site_id and

-- D&D askers
s2.site_name='english' and
t2.name  = 'single-word-requests' and
t2.site_id = s2.site_id and
q2.site_id = s2.site_id and
tq2.site_id = s2.site_id and
tq2.question_id = q2.id and
tq2.tag_id = t2.id and
q2.owner_user_id = u2.id and
q2.site_id = u2.site_id and

-- intersect
u1.account_id = u2.account_id and
account.id = u1.account_id;

detailed info: {'Node Type': 'Unique', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 6510.47, 'Total Cost': 6510.48, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 247.179, 'Actual Total Time': 247.393, 'Actual Rows': 307, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 6510.47, 'Total Cost': 6510.48, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 247.178, 'Actual Total Time': 247.348, 'Actual Rows': 1015, 'Actual Loops': 1, 'Sort Key': ['account.display_name'], 'Sort Method': 'quicksort', 'Sort Space Used': 47, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3756.47, 'Total Cost': 6510.46, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 37.306, 'Actual Total Time': 247.112, 'Actual Rows': 1015, 'Actual Loops': 1, 'Inner Unique': True, 'Plans': [{'Node Type': 'Gather', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3756.04, 'Total Cost': 6502.95, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 37.301, 'Actual Total Time': 245.775, 'Actual Rows': 1015, 'Actual Loops': 1, 'Workers Planned': 1, 'Workers Launched': 1, 'Single Copy': False, 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2756.04, 'Total Cost': 5502.85, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 37.019, 'Actual Total Time': 141.165, 'Actual Rows': 508, 'Actual Loops': 2, 'Inner Unique': False, 'Hash Cond': '(u1.account_id = u2.account_id)', 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.61, 'Total Cost': 2751.41, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 2.851, 'Actual Total Time': 105.753, 'Actual Rows': 24036, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(t1.site_id = u1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.17, 'Total Cost': 2743.88, 'Plan Rows': 1, 'Plan Width': 20, 'Actual Startup Time': 2.849, 'Actual Total Time': 60.162, 'Actual Rows': 24036, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(t1.site_id = q1.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.74, 'Total Cost': 2638.48, 'Plan Rows': 14, 'Plan Width': 16, 'Actual Startup Time': 2.846, 'Actual Total Time': 16.678, 'Actual Rows': 24036, 'Actual Loops': 2, 'Inner Unique': False, 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.18, 'Total Cost': 2576.49, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 2.842, 'Actual Total Time': 2.844, 'Actual Rows': 0, 'Actual Loops': 2, 'Inner Unique': True, 'Hash Cond': '(t1.site_id = s1.site_id)', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.0, 'Total Cost': 2573.31, 'Plan Rows': 2, 'Plan Width': 8, 'Actual Startup Time': 0.415, 'Actual Total Time': 2.83, 'Actual Rows': 10, 'Actual Loops': 2, 'Filter': "((name)::text = 'forms'::text)", 'Rows Removed by Filter': 93376, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3.16, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.007, 'Actual Total Time': 0.007, 'Actual Rows': 1, 'Actual Loops': 2, 'Hash Buckets': 1024, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 9, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Relation Name': 'site', 'Alias': 's1', 'Startup Cost': 0.0, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.005, 'Actual Total Time': 0.006, 'Actual Rows': 1, 'Actual Loops': 2, 'Filter': "((site_name)::text = 'stackoverflow'::text)", 'Rows Removed by Filter': 172, 'Workers': []}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.69, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.008, 'Actual Total Time': 25.395, 'Actual Rows': 48073, 'Actual Loops': 1, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 7.52, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 48073, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 7.52, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 48073, 'Index Cond': '((id = q1.owner_user_id) AND (site_id = q1.site_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': True, 'Async Capable': False, 'Startup Cost': 2751.41, 'Total Cost': 2751.41, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 33.949, 'Actual Total Time': 33.952, 'Actual Rows': 5113, 'Actual Loops': 2, 'Hash Buckets': 16384, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 664, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.61, 'Total Cost': 2751.41, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 3.107, 'Actual Total Time': 18.989, 'Actual Rows': 5113, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(t2.site_id = u2.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 4.17, 'Total Cost': 2743.88, 'Plan Rows': 1, 'Plan Width': 20, 'Actual Startup Time': 3.105, 'Actual Total Time': 11.674, 'Actual Rows': 5113, 'Actual Loops': 2, 'Inner Unique': True, 'Join Filter': '(t2.site_id = q2.site_id)', 'Rows Removed by Join Filter': 0, 'Workers': [], 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.74, 'Total Cost': 2638.48, 'Plan Rows': 14, 'Plan Width': 16, 'Actual Startup Time': 3.103, 'Actual Total Time': 4.284, 'Actual Rows': 5113, 'Actual Loops': 2, 'Inner Unique': False, 'Workers': [], 'Plans': [{'Node Type': 'Hash Join', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 3.18, 'Total Cost': 2576.49, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 3.098, 'Actual Total Time': 3.1, 'Actual Rows': 0, 'Actual Loops': 2, 'Inner Unique': True, 'Hash Cond': '(t2.site_id = s2.site_id)', 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': True, 'Async Capable': False, 'Relation Name': 'tag', 'Alias': 't2', 'Startup Cost': 0.0, 'Total Cost': 2573.31, 'Plan Rows': 2, 'Plan Width': 8, 'Actual Startup Time': 0.507, 'Actual Total Time': 3.084, 'Actual Rows': 1, 'Actual Loops': 2, 'Filter': "((name)::text = 'single-word-requests'::text)", 'Rows Removed by Filter': 93384, 'Workers': []}, {'Node Type': 'Hash', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 3.16, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.012, 'Actual Total Time': 0.012, 'Actual Rows': 1, 'Actual Loops': 2, 'Hash Buckets': 1024, 'Original Hash Buckets': 1024, 'Hash Batches': 1, 'Original Hash Batches': 1, 'Peak Memory Usage': 9, 'Workers': [], 'Plans': [{'Node Type': 'Seq Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Relation Name': 'site', 'Alias': 's2', 'Startup Cost': 0.0, 'Total Cost': 3.16, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.008, 'Actual Total Time': 0.01, 'Actual Rows': 1, 'Actual Loops': 2, 'Filter': "((site_name)::text = 'english'::text)", 'Rows Removed by Filter': 172, 'Workers': []}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq2', 'Startup Cost': 0.56, 'Total Cost': 61.69, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.007, 'Actual Total Time': 1.875, 'Actual Rows': 10226, 'Actual Loops': 1, 'Index Cond': '((site_id = t2.site_id) AND (tag_id = t2.id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q2', 'Startup Cost': 0.43, 'Total Cost': 7.52, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 10226, 'Index Cond': '((id = tq2.question_id) AND (site_id = tq2.site_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u2', 'Startup Cost': 0.44, 'Total Cost': 7.52, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 10226, 'Index Cond': '((id = q2.owner_user_id) AND (site_id = q2.site_id))', 'Rows Removed by Index Recheck': 0, 'Workers': []}]}]}]}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'account', 'Startup Cost': 0.43, 'Total Cost': 7.51, 'Plan Rows': 1, 'Plan Width': 15, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 1015, 'Index Cond': '(id = u1.account_id)', 'Rows Removed by Index Recheck': 0}]}]}]}


sql file: q4-001.sql

sql: select COUNT(distinct account.display_name)
from
tag t1, site s1, question q1, answer a1, tag_question tq1, so_user u1,
account
where
-- answerers posted at least 1 yr after the question was asked
s1.site_name='physics' and
t1.name = 'homework-and-exercises' and
t1.site_id = s1.site_id and
q1.site_id = s1.site_id and
tq1.site_id = s1.site_id and
tq1.question_id = q1.id and
tq1.tag_id = t1.id and
a1.site_id = q1.site_id and
a1.question_id = q1.id and
a1.owner_user_id = u1.id and
a1.site_id = u1.site_id and
a1.creation_date >= q1.creation_date + '1 year'::interval and

-- to get the display name
account.id = u1.account_id;

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 6797.88, 'Total Cost': 6797.89, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 29.103, 'Actual Total Time': 29.104, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 6797.87, 'Total Cost': 6797.88, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 29.085, 'Actual Total Time': 29.091, 'Actual Rows': 249, 'Actual Loops': 1, 'Sort Key': ['account.display_name'], 'Sort Method': 'quicksort', 'Sort Space Used': 30, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.87, 'Total Cost': 6797.86, 'Plan Rows': 1, 'Plan Width': 11, 'Actual Startup Time': 0.668, 'Actual Total Time': 29.006, 'Actual Rows': 249, 'Actual Loops': 1, 'Inner Unique': True, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.44, 'Total Cost': 6790.76, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.661, 'Actual Total Time': 28.279, 'Actual Rows': 249, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(t1.site_id = u1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.0, 'Total Cost': 6783.63, 'Plan Rows': 1, 'Plan Width': 24, 'Actual Startup Time': 0.654, 'Actual Total Time': 27.577, 'Actual Rows': 249, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': "((t1.site_id = q1.site_id) AND (a1.creation_date >= (q1.creation_date + '1 year'::interval)))", 'Rows Removed by Join Filter': 5828, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.56, 'Total Cost': 6776.51, 'Plan Rows': 1, 'Plan Width': 36, 'Actual Startup Time': 0.642, 'Actual Total Time': 16.938, 'Actual Rows': 6077, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(t1.site_id = a1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.13, 'Total Cost': 6613.11, 'Plan Rows': 23, 'Plan Width': 16, 'Actual Startup Time': 0.635, 'Actual Total Time': 5.375, 'Actual Rows': 13293, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.56, 'Total Cost': 6551.11, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.625, 'Actual Total Time': 1.373, 'Actual Rows': 1, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Index Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'site_pkey', 'Relation Name': 'site', 'Alias': 's1', 'Startup Cost': 0.14, 'Total Cost': 15.17, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.017, 'Actual Total Time': 0.02, 'Actual Rows': 1, 'Actual Loops': 1, 'Filter': "((site_name)::text = 'physics'::text)", 'Rows Removed by Filter': 172}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_pkey', 'Relation Name': 'tag', 'Alias': 't1', 'Startup Cost': 0.42, 'Total Cost': 6535.93, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.607, 'Actual Total Time': 1.351, 'Actual Rows': 1, 'Actual Loops': 1, 'Index Cond': '(site_id = s1.site_id)', 'Rows Removed by Index Recheck': 0, 'Filter': "((name)::text = 'homework-and-exercises'::text)", 'Rows Removed by Filter': 892}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'tag_question_site_id_tag_id_question_id_idx', 'Relation Name': 'tag_question', 'Alias': 'tq1', 'Startup Cost': 0.56, 'Total Cost': 61.69, 'Plan Rows': 31, 'Plan Width': 12, 'Actual Startup Time': 0.01, 'Actual Total Time': 3.336, 'Actual Rows': 13293, 'Actual Loops': 1, 'Index Cond': '((site_id = t1.site_id) AND (tag_id = t1.id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'answer_site_id_question_id_idx', 'Relation Name': 'answer', 'Alias': 'a1', 'Startup Cost': 0.43, 'Total Cost': 7.09, 'Plan Rows': 1, 'Plan Width': 20, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 0, 'Actual Loops': 13293, 'Index Cond': '((site_id = tq1.site_id) AND (question_id = tq1.question_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 7.1, 'Plan Rows': 1, 'Plan Width': 16, 'Actual Startup Time': 0.002, 'Actual Total Time': 0.002, 'Actual Rows': 1, 'Actual Loops': 6077, 'Index Cond': '((id = tq1.question_id) AND (site_id = tq1.site_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'so_user_pkey', 'Relation Name': 'so_user', 'Alias': 'u1', 'Startup Cost': 0.44, 'Total Cost': 7.12, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.003, 'Actual Rows': 1, 'Actual Loops': 249, 'Index Cond': '((id = a1.owner_user_id) AND (site_id = a1.site_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'account_pkey', 'Relation Name': 'account', 'Alias': 'account', 'Startup Cost': 0.43, 'Total Cost': 7.1, 'Plan Rows': 1, 'Plan Width': 15, 'Actual Startup Time': 0.003, 'Actual Total Time': 0.003, 'Actual Rows': 1, 'Actual Loops': 249, 'Index Cond': '(id = u1.account_id)', 'Rows Removed by Index Recheck': 0}]}]}]}


sql file: q10-002.sql

sql: select count(distinct q1.id) from
site, post_link pl1, post_link pl2, question q1, question q2, question q3 where

site.site_name = 'hinduism' and
q1.site_id = site.site_id and
q1.site_id = q2.site_id and
q2.site_id = q3.site_id and

pl1.site_id = q1.site_id and
pl1.post_id_from = q1.id and
pl1.post_id_to = q2.id and

pl2.site_id = q1.site_id and
pl2.post_id_from = q2.id and
pl2.post_id_to = q3.id and

exists ( select * from comment where comment.site_id = q3.site_id and comment.post_id = q3.id ) and
exists ( select * from comment where comment.site_id = q2.site_id and comment.post_id = q2.id ) and
exists ( select * from comment where comment.site_id = q1.site_id and comment.post_id = q1.id ) and

q1.score > q3.score;

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 133797.16, 'Total Cost': 133797.17, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 18.021, 'Actual Total Time': 18.022, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 133796.9, 'Total Cost': 133797.03, 'Plan Rows': 52, 'Plan Width': 4, 'Actual Startup Time': 17.984, 'Actual Total Time': 17.999, 'Actual Rows': 698, 'Actual Loops': 1, 'Sort Key': ['q1.id'], 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Semi', 'Startup Cost': 4.01, 'Total Cost': 133795.42, 'Plan Rows': 52, 'Plan Width': 4, 'Actual Startup Time': 0.071, 'Actual Total Time': 17.963, 'Actual Rows': 698, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(pl1.post_id_from = comment_2.post_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Semi', 'Startup Cost': 3.44, 'Total Cost': 133738.64, 'Plan Rows': 52, 'Plan Width': 40, 'Actual Startup Time': 0.067, 'Actual Total Time': 17.163, 'Actual Rows': 741, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '((q1.site_id = comment_1.site_id) AND (pl1.post_id_to = comment_1.post_id))', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Semi', 'Startup Cost': 2.88, 'Total Cost': 133681.87, 'Plan Rows': 52, 'Plan Width': 48, 'Actual Startup Time': 0.062, 'Actual Total Time': 16.35, 'Actual Rows': 813, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '((q1.site_id = comment.site_id) AND (pl2.post_id_to = comment.post_id))', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.31, 'Total Cost': 133625.09, 'Plan Rows': 52, 'Plan Width': 52, 'Actual Startup Time': 0.054, 'Actual Total Time': 15.214, 'Actual Rows': 983, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(q1.site_id = q2.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.88, 'Total Cost': 133200.61, 'Plan Rows': 52, 'Plan Width': 44, 'Actual Startup Time': 0.048, 'Actual Total Time': 14.314, 'Actual Rows': 983, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '((q1.score > q3.score) AND (q1.site_id = q3.site_id))', 'Rows Removed by Join Filter': 4492, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.44, 'Total Cost': 131926.77, 'Plan Rows': 156, 'Plan Width': 40, 'Actual Startup Time': 0.04, 'Actual Total Time': 9.341, 'Actual Rows': 5475, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(site.site_id = q1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.0, 'Total Cost': 130653.33, 'Plan Rows': 156, 'Plan Width': 28, 'Actual Startup Time': 0.033, 'Actual Total Time': 4.288, 'Actual Rows': 5475, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(site.site_id = pl2.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.57, 'Total Cost': 23915.3, 'Plan Rows': 13089, 'Plan Width': 16, 'Actual Startup Time': 0.028, 'Actual Total Time': 0.709, 'Actual Rows': 4342, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Index Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'site_pkey', 'Relation Name': 'site', 'Alias': 'site', 'Startup Cost': 0.14, 'Total Cost': 15.17, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.017, 'Actual Total Time': 0.022, 'Actual Rows': 1, 'Actual Loops': 1, 'Filter': "((site_name)::text = 'hinduism'::text)", 'Rows Removed by Filter': 172}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'post_link_pkey', 'Relation Name': 'post_link', 'Alias': 'pl1', 'Startup Cost': 0.43, 'Total Cost': 23762.05, 'Plan Rows': 13807, 'Plan Width': 12, 'Actual Startup Time': 0.01, 'Actual Total Time': 0.475, 'Actual Rows': 4342, 'Actual Loops': 1, 'Index Cond': '(site_id = site.site_id)', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'post_link_pkey', 'Relation Name': 'post_link', 'Alias': 'pl2', 'Startup Cost': 0.43, 'Total Cost': 8.14, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 4342, 'Index Cond': '((site_id = pl1.site_id) AND (post_id_from = pl1.post_id_to))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 8.15, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 5475, 'Index Cond': '((id = pl1.post_id_from) AND (site_id = pl1.site_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q3', 'Startup Cost': 0.43, 'Total Cost': 8.15, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 5475, 'Index Cond': '((id = pl2.post_id_to) AND (site_id = pl2.site_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q2', 'Startup Cost': 0.43, 'Total Cost': 8.15, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 983, 'Index Cond': '((id = pl1.post_id_to) AND (site_id = pl1.site_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'comment_site_id_post_id_idx', 'Relation Name': 'comment', 'Alias': 'comment', 'Startup Cost': 0.57, 'Total Cost': 8.28, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 983, 'Index Cond': '((site_id = q3.site_id) AND (post_id = q3.id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'comment_site_id_post_id_idx', 'Relation Name': 'comment', 'Alias': 'comment_1', 'Startup Cost': 0.57, 'Total Cost': 8.28, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 813, 'Index Cond': '((site_id = q2.site_id) AND (post_id = q2.id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'comment_site_id_post_id_idx', 'Relation Name': 'comment', 'Alias': 'comment_2', 'Startup Cost': 0.57, 'Total Cost': 8.28, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 741, 'Index Cond': '((site_id = q1.site_id) AND (post_id = q1.id))', 'Rows Removed by Index Recheck': 0}]}]}]}


sql file: q10-001.sql

sql: select count(distinct q1.id) from
site, post_link pl1, post_link pl2, question q1, question q2, question q3 where

site.site_name = 'aviation' and
q1.site_id = site.site_id and
q1.site_id = q2.site_id and
q2.site_id = q3.site_id and

pl1.site_id = q1.site_id and
pl1.post_id_from = q1.id and
pl1.post_id_to = q2.id and

pl2.site_id = q1.site_id and
pl2.post_id_from = q2.id and
pl2.post_id_to = q3.id and

exists ( select * from comment where comment.site_id = q3.site_id and comment.post_id = q3.id ) and
exists ( select * from comment where comment.site_id = q2.site_id and comment.post_id = q2.id ) and
exists ( select * from comment where comment.site_id = q1.site_id and comment.post_id = q1.id ) and

q1.score > q3.score;

detailed info: {'Node Type': 'Aggregate', 'Strategy': 'Plain', 'Partial Mode': 'Simple', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 133556.26, 'Total Cost': 133556.27, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 17.838, 'Actual Total Time': 17.839, 'Actual Rows': 1, 'Actual Loops': 1, 'Plans': [{'Node Type': 'Sort', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Startup Cost': 133556.0, 'Total Cost': 133556.13, 'Plan Rows': 52, 'Plan Width': 4, 'Actual Startup Time': 17.812, 'Actual Total Time': 17.822, 'Actual Rows': 464, 'Actual Loops': 1, 'Sort Key': ['q1.id'], 'Sort Method': 'quicksort', 'Sort Space Used': 25, 'Sort Space Type': 'Memory', 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Semi', 'Startup Cost': 4.01, 'Total Cost': 133554.52, 'Plan Rows': 52, 'Plan Width': 4, 'Actual Startup Time': 0.16, 'Actual Total Time': 17.797, 'Actual Rows': 464, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(pl1.post_id_from = comment_2.post_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Semi', 'Startup Cost': 3.44, 'Total Cost': 133511.33, 'Plan Rows': 52, 'Plan Width': 40, 'Actual Startup Time': 0.157, 'Actual Total Time': 17.243, 'Actual Rows': 539, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(q1.site_id = comment_1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Semi', 'Startup Cost': 2.88, 'Total Cost': 133468.13, 'Plan Rows': 52, 'Plan Width': 48, 'Actual Startup Time': 0.154, 'Actual Total Time': 16.66, 'Actual Rows': 634, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(q1.site_id = comment.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 2.31, 'Total Cost': 133424.94, 'Plan Rows': 52, 'Plan Width': 52, 'Actual Startup Time': 0.051, 'Actual Total Time': 15.852, 'Actual Rows': 765, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(q1.site_id = q2.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.88, 'Total Cost': 133200.61, 'Plan Rows': 52, 'Plan Width': 44, 'Actual Startup Time': 0.046, 'Actual Total Time': 15.169, 'Actual Rows': 765, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '((q1.score > q3.score) AND (q1.site_id = q3.site_id))', 'Rows Removed by Join Filter': 3910, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.44, 'Total Cost': 131926.77, 'Plan Rows': 156, 'Plan Width': 40, 'Actual Startup Time': 0.042, 'Actual Total Time': 10.296, 'Actual Rows': 4675, 'Actual Loops': 1, 'Inner Unique': True, 'Join Filter': '(site.site_id = q1.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 1.0, 'Total Cost': 130653.33, 'Plan Rows': 156, 'Plan Width': 28, 'Actual Startup Time': 0.034, 'Actual Total Time': 5.226, 'Actual Rows': 4675, 'Actual Loops': 1, 'Inner Unique': False, 'Join Filter': '(site.site_id = pl2.site_id)', 'Rows Removed by Join Filter': 0, 'Plans': [{'Node Type': 'Nested Loop', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Join Type': 'Inner', 'Startup Cost': 0.57, 'Total Cost': 23915.3, 'Plan Rows': 13089, 'Plan Width': 16, 'Actual Startup Time': 0.028, 'Actual Total Time': 0.979, 'Actual Rows': 5647, 'Actual Loops': 1, 'Inner Unique': False, 'Plans': [{'Node Type': 'Index Scan', 'Parent Relationship': 'Outer', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'site_pkey', 'Relation Name': 'site', 'Alias': 'site', 'Startup Cost': 0.14, 'Total Cost': 15.17, 'Plan Rows': 1, 'Plan Width': 4, 'Actual Startup Time': 0.014, 'Actual Total Time': 0.021, 'Actual Rows': 1, 'Actual Loops': 1, 'Filter': "((site_name)::text = 'aviation'::text)", 'Rows Removed by Filter': 172}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'post_link_pkey', 'Relation Name': 'post_link', 'Alias': 'pl1', 'Startup Cost': 0.43, 'Total Cost': 23762.05, 'Plan Rows': 13807, 'Plan Width': 12, 'Actual Startup Time': 0.013, 'Actual Total Time': 0.719, 'Actual Rows': 5647, 'Actual Loops': 1, 'Index Cond': '(site_id = site.site_id)', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 5647}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'post_link_pkey', 'Relation Name': 'post_link', 'Alias': 'pl2', 'Startup Cost': 0.43, 'Total Cost': 8.14, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 5647, 'Index Cond': '((site_id = pl1.site_id) AND (post_id_from = pl1.post_id_to))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 4675}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q1', 'Startup Cost': 0.43, 'Total Cost': 8.15, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 4675, 'Index Cond': '((id = pl1.post_id_from) AND (site_id = pl1.site_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q3', 'Startup Cost': 0.43, 'Total Cost': 8.15, 'Plan Rows': 1, 'Plan Width': 12, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 4675, 'Index Cond': '((id = pl2.post_id_to) AND (site_id = pl2.site_id))', 'Rows Removed by Index Recheck': 0}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'question_pkey', 'Relation Name': 'question', 'Alias': 'q2', 'Startup Cost': 0.43, 'Total Cost': 4.3, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 765, 'Index Cond': '((id = pl1.post_id_to) AND (site_id = pl1.site_id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 0}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'comment_site_id_post_id_idx', 'Relation Name': 'comment', 'Alias': 'comment', 'Startup Cost': 0.57, 'Total Cost': 4.44, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 765, 'Index Cond': '((site_id = pl2.site_id) AND (post_id = pl2.post_id_to))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 0}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'comment_site_id_post_id_idx', 'Relation Name': 'comment', 'Alias': 'comment_1', 'Startup Cost': 0.57, 'Total Cost': 4.44, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 634, 'Index Cond': '((site_id = pl1.site_id) AND (post_id = pl1.post_id_to))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 0}]}, {'Node Type': 'Index Only Scan', 'Parent Relationship': 'Inner', 'Parallel Aware': False, 'Async Capable': False, 'Scan Direction': 'Forward', 'Index Name': 'comment_site_id_post_id_idx', 'Relation Name': 'comment', 'Alias': 'comment_2', 'Startup Cost': 0.57, 'Total Cost': 4.44, 'Plan Rows': 1, 'Plan Width': 8, 'Actual Startup Time': 0.001, 'Actual Total Time': 0.001, 'Actual Rows': 1, 'Actual Loops': 539, 'Index Cond': '((site_id = q1.site_id) AND (post_id = q1.id))', 'Rows Removed by Index Recheck': 0, 'Heap Fetches': 0}]}]}]}


